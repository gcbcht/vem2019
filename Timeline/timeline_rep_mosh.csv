REPOSITORY,ISSUE_ID,STATUS,EVENT,CREATED_AT,TIME DURATION,NEGATIVE,NEUTRAL,POSITIVE,MSG,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,opened,2011-10-13 07:43:47,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,title,2011-10-13 07:43:47,00:00,,1,,"b""b' Scrollback and alternate screen (was: Use alternate screen on  )'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,body,2011-10-13 07:43:47,00:00,,1,,"b""b' When the remote application uses smcup to enter the alternate screen", the client should put the real terminal in alternate screen mode too," so that for example the mouse wheel lets you scroll in less and emacs and barnowl.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,1,2011-10-13 07:43:47,870.87,1,,,"b""b' Or perhaps the client should always put the real terminal in alternate screen mode"," for much the same reason that curses applications do\\xe2\\x80\\x94the scrollback history it generates in the primary screen isn\\xe2\\x80\\x99t particularly useful anyway.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,2,2011-10-13 07:43:47,1229.12,1,,,"b'b"" In normal use (like line-by-line typing at the shell)", the real-terminal scrollback will be somewhat useful. I\'m not sure I want to give that up completely," although maybe the user would be annoyed that larger prints are only there partially in the scrollback.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,closed,2012-02-27 18:43:46,659.98,2,2,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,reopened,2012-02-27 18:43:48,0.03,2,2,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,closed,2012-03-06 22:45:07,241.32,2,2,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,3,2011-10-13 07:43:47,786.07,1,,,"b""b' Hi", I would like to know if you have any plan on this issue? I think mosh should work just like ssh," that it will enter smcup mode when the remote application requests so. I find it quite annoying when I use vim to open a large file and it leaves a lot of scrollbacks.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,reopened,2012-04-16 04:59:35,374.47,3,2,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,4,2011-10-13 07:43:47,1311.38,,1,,b'b\' Here is the current proposed solution: (a) mosh-client puts the terminal in the alternate screen for the whole time (b) mosh-server interprets  the way xterm does," so people\\\'s ""vim"" continues to work the same as in xterm (or in screen with altscreen enabled) (c) we grab control-pgUp and control-PgDown for our own devious ends (providing proper scrollback).\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,5,2011-10-13 07:43:47,4.48,,1,,"b""b' Sounds reasonable to me.  I proposed the following modifications to (c):we also grab Ctrl-Up and Ctrl-Down (since this is what Ctrl-wheel sends in gnome-terminal)but we don\\xe2\\x80\\x99t grab any keys for scrollback while the inner application is inside an alternate screen.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,6,2011-10-13 07:43:47,1375.77,,,1,"b'b"" Do I understand correctly that the plan here is to provide scrollback similar to what a regular terminal provides?  That is", if I run a command with a lot of output," I can reliably scroll back with my terminal\'s scrollbars to see everything that was output by that command?  That is a really important usability issue for me.  Thanks!""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,7,2011-10-13 07:43:47,620.58,,1,,"b'b"" Yes", Scott, that\'s the plan," although you won\'t be able to use your local terminal\'s scroll bars. For now you can use screen or tmux on the server side to get this feature.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,8,2011-10-13 07:43:47,406.73,,,1,"b""b' This is a cool idea. Is it possible to support mousewheel too?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,9,2011-10-13 07:43:47,18.13,,1,,"b'b"" Yes", if we do it with Anders\'s amendment," it will support the mouse wheel.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,10,2011-10-13 07:43:47,892.32,,1,,"b'b"" Agreed. This is the only significant issue with Mosh at the moment. It\'s the only issue that has tainted my experience. ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,11,2011-10-13 07:43:47,1207.98,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,12,2011-10-13 07:43:47,708.25,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,13,2011-10-13 07:43:47,1111.63,,,1,"b'b"" I agree. I\'d much rather read a whole page of PGP garbage :)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,14,2011-10-13 07:43:47,371.17,,1,,"b'b"" +1 (I ... just ... couldn\'t resist ...)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,15,2011-10-13 07:43:47,22.85,,1,,"b""b' +1 to that'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,16,2011-10-13 07:43:47,1295.25,,1,,"b""b' +1 for fixing scrollback in mosh (showstopper for me) -2 Mkaysi'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,17,2011-10-13 07:43:47,520.37,,1,,"b""b' +1"," I sometimes a file on the server to copy it locally and not supporting scroll back prevents this.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,18,2011-10-13 07:43:47,369.52,,1,,"b""b' +1 for fixing scrollback (the only real problem with mosh so far).'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,19,2011-10-13 07:43:47,330.65,,1,,b'b\' +1 for fixing scrollback, -1 for mkaysi," I wonder why mosh can\\\'t just behave like ssh on this. I have huge directories I ""ls"" all day so I have to use ssh.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,20,2011-10-13 07:43:47,1267.93,,,1,b'b\' @ubershmekel: You could use or on the remote side for scrollback.  Or simply  .I\\\'m glad you asked. :) SSH is simply conveying a stream of bytes from server to client; it doesn\\\'t care what the bytes represent.  So the local terminal (XTerm or what-not) gets the entire history in order, and can scroll. By contrast, Mosh tracks the _current_ state of the terminal on the _server_ side, and then synchronizes this representation between client and server.  This is the key design decision which enables Mosh\\\'s unique features -roaming, local echo, and better utilization of bad connections.  On the other hand, it complicates some things which are simple in SSH\\\'s world of carrying bytes in order. To support scrollback we will need to add history to this terminal state object, and augment the protocol so the client can request bits of history on demand, as the user scrolls.  (Without doing it on demand, we lose a key advantage of Mosh over SSH," which is that commands which spew output will update at a fixed ""framerate"" rather than lagging the connection.) This is certainly doable"," and is obviously something that a lot of people want.  But it\\\'s not really ""just do the same as SSH"" and it\\\'s not a trivial change.  In the meantime", I think running or on the server side is a fine workaround (and has many other advantages).\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,21,2011-10-13 07:43:47,618.73,1,,,"b""b' I must say that running on the server was exactly the thing I hoped to avoid with mosh. This is what I was doing with SSH when I was afraid that connection will be broken because of IP change or something. With mosh I hoped that I could just run it and everything else would be cared automatically. You could maybe even integrate mosh with screen. :-)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,22,2011-10-13 07:43:47,258.78,,,1,"b""b' @kmcallister  I wonder if mosh could grow an alternate mode where it skips all the pty magic and just acts like regular ssh. This would of course remove the benefit of latency optimization"," but I believe many people (at least myself) are only interested in the connection-persistence anyway. In this mode a display would be restored simply by playing back the last n bytes unconditionally. Keeping track of the  buffer offsets in order to trigger the right amount of playback at the right times should actually be fairly easy then...'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,23,2011-10-13 07:43:47,22.82,,,1,"b""b' You can run This also helps with another problem.  If a dies unexpectedly (say", because the client machine lost power), the corresponding will hang around uselessly.  But running will cause the other process to exit," killing that old  .  You can of course make this more sophisticated with named sessions and such.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,24,2011-10-13 07:43:47,1.83,,1,,"b'b"" @m-o-e: What you describe is doable"," but I\'m reluctant to add alternative modes to Mosh which fundamentally change the operating principle.  Perhaps something like [autossh]url  would meet your needs?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,25,2011-10-13 07:43:47,107.75,,1,,b'b\' I tried using Mosh for the connection persistence, and nothing I read prior to using it gave me a clear indication that it was anything but an ordinary shell with an improved transport.  When Mosh discarded some important output I had no idea what was going on, and I wasted a few days (calendar time, several hours actual troubleshooting time) looking at everything else because it didn\\\'t occur to me that a tool for persistent connections and better latency would also throw away my data.  After that, I can\\\'t trust you, not because the way Mosh works is unreasonable, but because the way it is described fails to convey that you can\\\'t count on receiving the complete output of any command.  (I suspect it also fails to convey the goals that drove the decision to make it work that way, but that\\\'s not important.)  At the very least, the conditions for discarding data should be given a prominent position where no new user who reads anything about Mosh could reasonably fail to miss it.  If I had read such a notice before my output was lost," even if I hadn\\\'t understood the warning I would have traded those days of aggravation with a moment of ""Oh _that_\\\'s what that meant!"" \''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,26,2011-10-13 07:43:47,8.13,,,1,"b'b"" I cannot agree with Polyergic. I think site is nicely done and also interface with the underlined characters nicely tell that there is some prediction being done. I didn\'t have problems of not understanding what is happening. The only thing which surprised me was that still didn\'t make output work as I was used. So I would maybe just urgue for a switch (I can then bash-alias) which would transfer everything. It can still predict. So I see three options here:prediction + not transfer everything (useful for high latency", low bandwidth links)prediction + transfer everything (useful for high latency, high bandwidth links)no prediction + not transfer everything (useful for just connection persistence) I fall into 2. category. Trans-Atlantic links to Europe have 100ms latency," but they are fast. I would rename mosh to tash in this case: trans-atlantic shell. :-)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,27,2011-10-13 07:43:47,404.7,1,,,"b'b"" @kmcallister  Emulating a terminal (screen) inside an emulated terminal (mosh)", in orderto emulate native functionality (scrollback) of the enclosing terminal emulator(xterm, iterm) does not and can not possibly result in an acceptable user experience. That is the underlying problem here. Of course neither is mosh to blame for 30 years of stagnation in the terminal emulator business, nor can it cleanlyresolve the situation from where it\'s currently sitting in the stack. Hence my proposal of a \'dumb-mode\'," as a short-term bandaidfor the next few decades.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,28,2011-10-13 07:43:47,5.7,,,1,"b'b"" @mitar", I don\'t see any disagreement between what I said and what you said; restating things tersely," what I see is this: I said: Mosh loses data in an unexpected way; descriptions of Mosh should set expectations to match its behavior. You said:  The Mosh website is nice; the prediction indicators are nice; an option to transfer everything would be nice. What am I missing?  Did you see a clear notice somewhere that Mosh won\'t keep all of the output of your commands?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,29,2011-10-13 07:43:47,255.83,,1,,"b""b' @m-o-eWell", could you describe what about the user experience is unacceptable?  This would be useful information for us. In general," the world of computers is full of apparently ridiculous levels of nesting and emulation which nevertheless provide a perfectly fine user experience.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,30,2011-10-13 07:43:47,42.93,1,,,"b'b"" @kmcallister  Foremost the frankenstack does not support native scrolling. That\'s a showstopper.\'copy-mode\' and virtual scrolling hacks are no substitute. There\'s also a plethora of more subtleissues", but you (as the author of a terminal emulator) don\'t need me to tell you about those. ;) As said, I\'m not blaming mosh for the ridiculous terminal-situation of today that\'s been diresince long before mosh even existed. Given the project scope mosh had little choice otherthan crouch on the shoulders of gnomes, like everyone else, and for that it isn\'t even faring too bad. I\'m just saying that with the supposed \'dumb\'-mode mosh might work for those of us who haveno problems with latency and who would like the persistence, but can not tolerate a broken scrollback. A bandaid on top of the bandaid," so to say. Just until someone finally takes a heart and supersedes VT100 terminal emulation altogether...""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,31,2011-10-13 07:43:47,6.88,,,1,b'b\' I," also would love to have a ""dumb"" mode that lets me use normal scrollback in my terminal window to look at the history of what I did before or scroll through the output of a large command. I haven\\\'t done vt100 stuff since my BBS days", so please feel free to smack me down, but couldn\\\'t you do both things?  Every time your screen state changes in such a way that you have to scroll a line up off of the screen, couldn\\\'t you just go to the bottom and do a , scrolling the top line off the screen and into scrollback, then continue syncing the screen state like you do now? Clearly, we could lose some output if we go offline and stuff scrolls off the page on the server, but I\\\'d be OK with that.  So long as it worked while I\\\'m online and interacting with the shell," I\\\'d be happy.  I\\\'d be even happier if you kept track of when stuff scrolled off the top on the server side that we didn\\\'t see and scrolled off some sort of marker like ""mosh:  60 lines scrolled on server while you were offline""", but that\\\'s certainly in bonus round territory.  :-) To be clear, I\\\'m expressing a preference here.  If it\\\'s hard, and conflicts with your goals, then that\\\'s fine too.  I\\\'ll use mosh regardless, because the stateless connection stuff really complements the way I work.  :-)  Thanks for creating this!\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,32,2011-10-13 07:43:47,425.88,,,1,"b'b"" @timspencer I think what you\'re suggesting sounds reasonable but may not be easy to implement.  My understanding is that mosh doesn\'t keep track of the byte stream", it just looks at the current state of the terminal and computes a diff with the previous state, and sends updates to the client, periodically.  If you  , the screen will be updating very quickly, but mosh won\'t send _everything_ to the client, it\'ll just take regular snapshots and send diffs.  At least that\'s my understanding, I haven\'t read the source code. Having said that," it would be awesome indeed to have a streaming mode where mosh just streams everything and only does connection persistent plus its prediction things.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,33,2011-10-13 07:43:47,1344.78,,,1,"b""b' Can we separate this into two issues?  The issue I reported is that mosh should put the terminal into alternate screen mode.  This is a clear bugfix that we can implement today.  It\\xe2\\x80\\x99s required for gnome-terminal\\xe2\\x80\\x99s mouse-wheel-to-arrow-key emulation in curses applications.  (Don\\xe2\\x80\\x99t confuse that with the fancier xterm mouse-event protocol that nobody uses.) The second issue that\\xe2\\x80\\x99s grown out of this thread is that mosh doesn\\xe2\\x80\\x99t support useful scrollback history.  It\\xe2\\x80\\x99s true that one side effect of putting the terminal into alternate screen mode would be that mosh\\xe2\\x80\\x99s useless scrollback history would become inaccessible.  I consider that a feature", not a bug.  If we later want to go put a lot of work into designing a system to add useful scrollback, that would be awesome.  But that\\xe2\\x80\\x99s a totally separate feature request, and it\\xe2\\x80\\x99s not needed for what I understand to be the common case where the user is just running inside anyway.  I propose reopening #122 for that. We should fix mosh now to put the terminal into alternate screen mode," with a command-line switch to disable it (like  ) for people who think broken scrollback is more important than a working mouse wheel.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,34,2011-10-13 07:43:47,458.37,,1,,"b'b"" Anders", ok," I\'m sold on this for 1.2.4 if it just means adding smcup and rmcup to Terminal::Emulator::open() and Terminal::Emulator::close(). Would you be willing to submit a pull request? (I assume we want the actual terminfo calls to remain in ).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,35,2011-10-13 07:43:47,1121.43,1,,,"b'b"" I consider gnome-terminal\'s mouse wheel to arrow key emulation to be a horrible bug. There are lots of people who agree with me: url  Unfortunately", the GNOME developers do not agree with the bug interpretation, and neither it seems does andersk. I will try to convince you (futilely, I suspect) that it is indeed a horrible bug. The reason why mapping wheel events to arrow keys is bad is because scrolling the mouse wheel is supposed to be a _nondestructive_ operation. My mental model of the mouse wheel is that scrolling the wheel is supposed to only change your view of the terminal scroll buffer. It should never alter the terminal state itself. Unfortunately, in many situations, such as IRC clients and many other scenarios which are mentioned in the GNOME bugzilla thread, the GNOME behavior of emulating arrow keys does in fact result in permanent loss of an application\'s input buffer state whenever the mouse wheel is bumped. For example say I am in the middle of typing a line when I bump the mouse wheel. The mouse wheel infuriatingly triggers a keyboard arrow press, which wipes out the line that I was typing. Fixing the individual applications is problematic given the large number of applications that exhibit the problem. The fact that mosh fails to use alternate screen mode has been a huge blessing for me, because it means that accidental mouse wheel events don\'t destroy IRC client state from inside mosh. Since all of my IRC client usage occurs within mosh, this (unintended?) feature of mosh completely neutralizes the underlying GNOME bug for me. I would be very sad to see this behavior go away. If you do choose to implement this completely demented idea, please (as andersk suggests) provide a switch to disable it. It\'s not that I prefer broken scrollback. It\'s that I hate data loss above all other considerations, and unwanted arrow keys result in data loss. (Regarding the second issue in this bug, wherein mosh causes data loss of scrollback contents," I of course strongly support any efforts to change mosh to preserve scrollback data. There is nothing in the world that is more important than avoiding data loss.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,36,2011-10-13 07:43:47,9.45,,1,,"b""b' davidjao: gnome-terminal already provides a checkbox (Edit \\xe2\\x86\\x92 Profile Preferences \\xe2\\x86\\x92 Scrolling \\xe2\\x86\\x92 Use keystrokes to scroll on alternate screen) to disable the arrow key emulation entirely.  But nobody disagrees that there might as well be a command line switch for those who need to work around this on a per-application basis for some reason.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,37,2011-10-13 07:43:47,5.32,1,,,"b'b"" This checkbox only exists on Ubuntu and derivatives of Ubuntu. It is not included in the upstream gnome-terminal", and other distributions such as Fedora, Debian, Arch, etc. do not provide it. Of course you can patch it in yourself," but that is a pain. I understand that we all agree a command line switch is desirable but I am worried that it might be left out or regarded as unimportant. That\'s why I wanted to comment on why it is important.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,closed,2013-03-10 20:10:05,910.5,8,20,11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,38,2011-10-13 07:43:47,1231.55,,,1,"b'b"" Thanks everyone", the no-init option works perfectly to disable alternate screen mode for those of us who don\'t want it. In the spirit of keeping the documentation up to date," could we mention in the man page (in the ENVIRONMENT VARIABLES section) that the MOSH_NO_TERM_INIT variable inhibits ?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,39,2011-10-13 07:43:47,679.53,,1,,"b'b\' For me the ""no-init"" option doesn\\\'t resolve the scrollback problem with mouse wheel.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,40,2011-10-13 07:43:47,717.47,,,1,"b'b\' ""no-init"" is completely broken here with the XFCE terminal: some part of the output is forgotten in history", and the scrollbar gets updated inconsistently. Why can\\\'t mosh just behave as ssh does? Being opinionated is fine, but it would also be nice to benefit from the networking improvements without having different terminal emulation decisions forced on the user.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,41,2011-10-13 07:43:47,1380.73,,,1,"b""b' The workaround works. What would be the equivalent command for using tmux instead of screen and ensuring no tmux processes are left behind when I disconnect? Thanks.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,42,2011-10-13 07:43:47,902.42,,,1,"b""b' Actually I spoke too soon. The screen workaround has issues. If I use it in two separate terminal windows", one after the other," the second window hijacks the screen in the first window. Would be great to have scrollback to eliminate the need for this. Thanks.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,43,2011-10-13 07:43:47,2.42,,1,,"b""b' @dtenenba", this is not a support forum for tmux and screen. Read the manpages ([tmux(1)]url  [screen(1)]url  especially the parts about the option to  , and the  ,  ," options to  .'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,44,2011-10-13 07:43:47,645.28,,,1,"b'b"" I would like to call [this article]url  into attention. It describes a nice simple setup combining and resulting in a working scrollback history (with mouse) on terminals supporting xterm mouse. On OS X"," that\'s iTerm or even  with [easySIMBL]url  and [MouseTerm]url  plugin.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,45,2011-10-13 07:43:47,799.87,,1,,"b""b' It seems this is still not really implemented? Running still disables scrolling for me? (Mac OS X with Terminal.)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,46,2011-10-13 07:43:47,1277.93,,,1,"b""b'   only exists to restore the pre-1.2.4 behavior of not disabling the terminal\\xe2\\x80\\x99s scroll bar", to appease those who believed that functionality was being lost. Mosh has never been able to guarantee that the terminal\\xe2\\x80\\x99s scroll buffer will actually be filled with anything, much less anything useful," because of the way it optimizes frame deltas in its state synchronization protocol. See #122.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,47,2011-10-13 07:43:47,1135.85,,,1,"b'b"" It would be really nice if mosh supported scrollback. I\'m using mysql on the server and Describe\'s output is longer than the screen so it\'s impossible for me to see the top. Oh well"," back to ssh I guess.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,48,2011-10-13 07:43:47,121.43,,1,,"b""b' In the mysql cli you can just do and the output will be redirected to instead of being printed directly.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,49,2011-10-13 07:43:47,112.43,,,1,"b""b' @tsuna Thank you! That command is awesome'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,50,2011-10-13 07:43:47,1097.47,,1,,"b""b' any hope that this will be fixed someday?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,51,2011-10-13 07:43:47,1046.82,,1,,"b'b"" The flag sometimes works sometimes doesn\'t. We are hoping to see a native scrollback support with Mosh.  Latest iTerm2 on macOS Sierra 10.12.5""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,52,2011-10-13 07:43:47,1070.72,,1,,"b""b' Yea this is a pretty big deal for me. I will use this once this obvious showstopper is fixed. '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,53,2011-10-13 07:43:47,1221.97,,,1,b'b\' Really not sure what all the fuss is about, if you want scrollback use screen or tmux, they are wonderful tools, and using them appropriately will let you do SO much more than trying bolt more features into mosh. The unix philosophy for tools, do one thing well, is PERFECTLY illustrated in this case. url I just tested this on my local machine connecting to another machine. I connect using mosh, reconnect to tmux using as the argument of the connection string, and I\\\'m reconnected to my session with the ability to scroll back through history," scroll my tmux ""window bar"" to go to different panes", in short everything that people have been asking for above WITHOUT any changes to mosh.  If you are scrolling back through previous commands you are probably using only mosh or you are in screen. It does this whether you connect via SSH or mosh," because it uses the ""alternate screen"" itself. I like screen", but tmux is much better for multiple commands and sessions, and handles scrolling and history in a far more sane manner in my opinion.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,54,2011-10-13 07:43:47,1246.55,,,1,"b'b\' @dragon788 good to hear that. But are you able scroll up using mousebecause you mentioned you\\\'re able to scroll using ""window bar"" which Ithink not an issue here. On Sat", 21 Oct 2017 at 6:26 AM dragon788  wrote:*Eduardo D. Bergavera, Jr.*Linux AdminEmail: edbergavera@OpenID: url ~edbergaveraGithub: url \'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,55,2011-10-13 07:43:47,1247.6,1,,,b'b\' The fuss has nothing to do with lack of scrollback functionality. The fuss is that in alternate screen mode," mouse wheel events destroy the current command buffer because a mouse wheel event is interpreted as an arrow key. This is devastating because it means accidental scrolling leads to data loss.  Your suggestion seems to be ""don\\\'t use GNU screen"" but this advice is untenable for many obvious reasons.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,56,2011-10-13 07:43:47,1348.25,,1,,"b'b"" @edbergavera I\'m scrolling back using the tmux history via copy-mode (which preserves the command output on the remote", which IMO since it is where the commands are running and where it really matters is where the history should be). I believe you can use the mouse scroll wheel if you have a plugin for tmux that interprets the scroll wheel escape codes as a signal to enter copy mode and scroll," or you can simply Prefix+[ or whatever you bind to enter copy mode and then scroll with your mouse assuming your terminal isn\'t capturing the events and forwards them to the server intact. Prefix+Esc is another equivalent.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,57,2011-10-13 07:43:47,891.5,,1,,"b""b' What about a flag telling how much history to load at start (like tail -n)?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,58,2011-10-13 07:43:47,687.05,1,,,"b'b"" I\'m sad that this is still open", I have been chckeing in every couple of years to see if native scrolling support have been solved but untill then I can sadly not use this.  To clarify," I only care about reliably reconnecting after network outage without prorams on the remote host terminating.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,2,closed,-,-,-,10,29,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,opened,2012-02-21 23:01:36,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,title,2012-02-21 23:01:36,00:00,1,,,"b""b' mosh script interacts badly with ControlMaster'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,body,2012-02-21 23:01:36,00:00,,1,,"b'b"" I\'m not sure exactly what\'s going on", but I use ControlMaster to avoid establishing multiple connections to a server. If I have an open ssh connection to a server (and therefore an active ControlMaster socket)," starting mosh fails: The relevant portion of  is:  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,1,2012-02-21 23:01:36,11.97,1,,,b'b\' Thanks, nice catch. The problem seems to be that ControlMaster overrides ProxyCommand," which we use (since ab297467a) to detect the remote IP address so that mosh-client can connect to the same host we\\\'re SSHing to. One fix is that we just give ""-S none"" to ssh", which will disable ControlMaster on the Mosh startup sessions while leaving it in place for any other sessions. Is this going to be annoying (i.e. are you depending on ControlMaster to not have to retype your password, or just for efficiency)? Possible fix 2 is that we fall back in this case to connecting to the server\\\'s idea of its IP address (instead of the client\\\'s idea of its IP address that we get from ProxyCommand). This means that you will be able to set up a Mosh connection over ControlMaster, except when the server is behind a NAT (which works currently). Thoughts?\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,2,2012-02-21 23:01:36,3.32,,,1,"b'b"" I\'m only using ControlMaster to short-circuit the connection process"," so disabling it for mosh connections would be fine for my use case.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,3,2012-02-21 23:01:36,16.65,,1,,"b""b' Ok"," I will just add -S none to the mosh startup script then.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,closed,2012-02-25 17:20:54,1099.3,2,2,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,4,2012-02-21 23:01:36,426.75,,1,,"b'b"" This fix annoys me a lot", because establishing a new ssh connection is slow for me (luckily I do not need retype password for the most time). I usually keep a ssh connection to transfer files. If it were quick," I might just use ssh after all :-)  I\'d like to have an option to disable this behavior.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,5,2012-02-21 23:01:36,622.25,,1,,"b'b"" You\'re not the only one. I have a workaround though: Judge for yourself how much of a hack that is.I\'ve tried my best to keep it secure in the sense that a MITM between the server and shouldn\'t cause any security issues", but of course they can still cause a denial of service because the script might no longer work. If your server is not behind a NAT, you can replace the line entirely with something like  ," similar to how #716 proposes to solve the problem of when ProxyCommand is unavailable. Depending on how you feel about SSH environment variables you may want to add and to the list of variables to unset in the command near the top of the script.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,6,2012-02-21 23:01:36,1049.48,,,1,"b'b"" @ScoreUnder Thanks! :+1: Your script works well and doesn\'t need a JSON parser actually. Just and you\'ll get it :-)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,7,2012-02-21 23:01:36,829.88,,,1,"b'b"" Thanks for the catch"," I\'ve now updated the post above to reflect that. It\'s always nice to be able to remove unnecessary dependencies :smile: ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,8,2012-02-21 23:01:36,1105.48,,1,,"b'b"" This was closed in 2012?  I just found that -S none in the mosh client script. *sigh* There\'s got to be a better way to do that.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,9,2012-02-21 23:01:36,308.47,,,1,"b'b"" Actually", now that we have and  , we could remove for those options.  (Compromises," compromises.  There\'s no perfect solution to finding the remote IP.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,reopened,2017-05-21 23:55:51,394.95,2,5,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,10,2012-02-21 23:01:36,3.28,1,,,"b""b' Oops"," I commented before looking at the code-which already does exactly that.  Try those options. '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,closed,2017-05-21 23:59:08,3.28,3,5,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,11,2012-02-21 23:01:36,990.48,,,1,b'b\' Oh," interesting. In my mosh-client ""bin"" there\\\'s a hardcoded -S none ... you\\\'re saying if I update there\\\'s commandline args that disable it I think. Checking.  Oh"," apparently it\\\'s only ""hardcoded"" if $use_remote_ip is ""proxy"".  Apparently I can use experimental-remote-ip local", remote, or proxy. Proxy being -S -oProxyCommand=blah ... Interesting. Oh, lol, you even said that a comment before last.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,12,2012-02-21 23:01:36,338.5,1,,,"b'b"" Sadly doesn\'t work for me in some cases. With  ", it gets the intranet IP; with  ," it doesn\'t pick up my settings in ssh config.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,13,2012-02-21 23:01:36,915.63,,1,,"b""b' What about some of these environment variables?  ssh to outside IP of a host"," then issue  : set | grep ^SSH_ '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,14,2012-02-21 23:01:36,213.23,,1,,"b'b"" @jettero In my case the server is behind a NAT with port-forwarding settings. The server itself doesn\'t know its outside IP. If could pick up my ssh_config settings it would work well for my case.  I know this option resolves the hostname itself and passes IP to ssh in case the hostname resolves to a different IP. My hostname won\'t do that however"," and I think everyone should ensure the hostname they\'re sshing into doesn\'t change back and forth frequently.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,15,2012-02-21 23:01:36,303.4,,1,,"b'b"" Yeah", mine seems to know. If I ssh to it on the outside IP, even through the nat, the env vars show the pub IP and the inside IP both. See the first block. Oh," I suppose that\'s false actually... hrm.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,24,closed,-,-,-,4,8,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,26,open,opened,2012-02-24 07:24:52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,26,open,title,2012-02-24 07:24:52,00:00,,1,,"b""b' Investigate information leakage and using chaff and timing fuzz'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,26,open,body,2012-02-24 07:24:52,00:00,,1,,"b'b"" Should we add timing fuzz and bogus packets to foil passive statistical eavesdropping? (We do add chaff to the datagrams we\'re already sending"," but is this enough?)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,26,open,1,2012-02-24 07:24:52,710.95,,1,,"b""b' Relevant: url ~-use01.pdf'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,26,open,closed,2012-03-18 18:01:17,636.42,0,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,26,open,2,2012-02-24 07:24:52,443.77,,,1,b'b\' Although it would be easy to add timing fuzz on the order of 10 ms," Nelson\\\'s link suggests that we would have to add something on the other of >100 ms of jitter to foil a statistical eavedropper that wanted to figure out if we were hitting ""same-hand"" or ""opposite-hand"" keypairs while typing. I don\\\'t think the benefits are worth that level of UI latency.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,26,open,reopened,2012-03-19 02:40:14,518.95,0,3,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,26,open,3,2012-02-24 07:24:52,446.18,1,,,"b'b"" Alternatively"," we could send a stream of randomly-timed dummy packets whenever the user is typing.  This would preserve interactivity but increase network traffic substantially. There\'s probably some meaty statistics behind the question of how a certain amount of dummy traffic affects the required sample size for recovering timing. We could do this on good connections only (automatically or by the user\'s choice).  Then we can worry about active attackers who degrade a link in order to gather statistical timing information...""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,26,open,4,2012-02-24 07:24:52,1269.62,,1,,"b'b"" Some of this could be addressed as part of / after #816 and having the transmitter run asynchronously with typing. Disclaimer: I don\'t know how decoupled they are now", but I get the impression that the frame-rate-limited updates are mostly in the server-client direction.  I\'m thinking of mechanisms similar to TCP\'s delayed acks to aggregate sending keystroke packets if another keystroke comes in moments later, and quantising to fixed intervals (as a variant of jitter).  With the chaff already in the protocol," it shouldn\'t be possible to tell whether a given packet is sending 1 or more keystrokes at a time.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,26,open,-,-,-,1,4,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,opened,2012-03-07 09:45:21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,title,2012-03-07 09:45:21,00:00,,,1,"b""b' Mac OS X sleeps (!) while running mosh'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,body,2012-03-07 09:45:21,00:00,1,,,b'b\' When logged in remotely with mosh to a Macintosh," OS X seems to go to sleep (and we start getting the ""Last contact"" countup). It doesn\\\'t even respond to pings. SSHing to the machine seems to wake it up. It looks like this is a feature -""pmset -g"" shows a sleep time of ""10"" when not logged in with SSH"," and a sleep of ""0"" (disabled) when logged in with SSH. (I think ""ttyskeepawake"" is what makes SSH inhibit sleeping.) Is it possible to have mosh-server also set the sleep time to be 0 when there is a user logged in? Unfortunately pmset requires root... Starting a screen did update utmp but didn\\\'t disable ""sleep"".\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,1,2012-03-07 09:45:21,686.32,,1,,"b""b' Appears intractable for now. WONTFIX'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,closed,2012-03-31 21:11:40,686.32,1,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,2,2012-03-07 09:45:21,270.48,1,,,"b'b\' I cannot replicate that logging in with ssh causes ""sleep"" to be set to 0: logging in with ssh seems to leave sleep set to whatever it previously had been set to", but the computer likely does not go to sleep because there is an active terminal (based on description of ttyskeepawake).Are you certain you weren\\\'t accidentally looking at the report under two different power situations, such as on battery and when charging? I don\\\'t see any special code in Apple\\\'s fork of OpenSSH that would cause it to be messing directly with the power management subsystem. Put differently: when you were in that screen session, did the computer actually go to sleep, or did it simply report that the sleep timer was set to 10? (As far as I can tell, that is just the current settings that you have set in Preferences, and would not update that dynamically.)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,3,2012-03-07 09:45:21,51.62,1,,,"b""b' Yes", if I log in with ssh and run  , I get: Active Profiles:AC Power      2*Currently in use: autorestart  0 powerbutton  1 halfdim    1 panicrestart 157680000 hibernatefile  / networkoversleep   0 disksleep  10 sleep    0 (imposed by 21) hibernatemode  0 ttyskeepawake  1 displaysleep 10 womp     1 If I in and run the same command: Active Profiles:AC Power      2*Currently in use: autorestart  0 powerbutton  1 halfdim    1 panicrestart 157680000 hibernatefile  / networkoversleep   0 disksleep  10 sleep    10 hibernatemode  0 ttyskeepawake  1 displaysleep 10 womp     1 I believe the machine is a desktop iMac,"  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,4,2012-03-07 09:45:21,17.8,,1,,b'b\' Yeah: that\\\'s Mac OS X 10.7.3. For reference, I am using 10.6.8 (but am also currently cheating with regards to how I am testing this; I\\\'ll get a second computer soon and look more carefully). When it says that," with ""(imposed by #)"""," taken as a pid what process is that #? (I ask because 21 seems like a ""fishy""ly low process number to be the sshd daemon that launchd spawned for you", so I\\\'d love to verify. Using it as a pid, btw, is based on the documentation for the imposing mechanism on Wikipedia.)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,5,2012-03-07 09:45:21,6.15,,1,,"b'b"" It\'s powerd:  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,reopened,2012-04-17 02:57:57,346.28,3,3,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,6,2012-03-07 09:45:21,9.53,,1,,b'b\' FTR," I went ahead and did the ""correct test"": remotely SSH\\\'ing into my 10.6.8 laptop from an SSH client", and I got the following. On 10.6.8 powerd doesn\\\'t even exist, so that would help explain the differences in understanding I have of how these pieces can be put together. ;P I\\\'ll see if I can learn anything more, or find someone to ask, about what is causing powerd to start that imposing feature for sshd. (Mind giving me the output of while connected in via SSH?)  \'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,7,2012-03-07 09:45:21,11.17,,,1,"b'b\' Here you go: $ pmset -g assertions 4/16/12 11:08:27 PM EDTAssertion status system-wide:  ChargeInhibit         0  PreventUserIdleDisplaySleep     0  PreventUserIdleSystemSleep      1  NoRealPowerSources_debug      0  CPUBoundAssertion         0  EnableIdleSleep         1  PreventSystemSleep        0  DisableInflow         0  DisableLowPowerBatteryWarnings    0  ExternalMedia         0 Listed by owning process: pid 21: [0x0000012c00000015] PreventUserIdleSystemSleep named: """"   Details: /   Localized=A remote user is connected. That prevents system sleep. Kernel Assertions: 0x0004Kernel Assertion ID = 500  Created At = 12/31/69 7:03:13 PM EST  Modified At = 12/31/69 7:08:57 PM EST  Owner ID = 0xffffff800b96c000  Level = 255  Assertions Set = None (4)Kernel Assertion ID = 501  Created At = 12/31/69 7:03:33 PM EST  Modified At = 12/31/69 7:00:00 PM EST  Owner ID = 0xffffff800b991000  Level = 0  Assertions Set = None (4)Kernel Assertion ID = 502  Created At = 12/31/69 7:05:14 PM EST  Modified At = 4/2/12 8:45:28 AM EDT  Owner ID = 0xffffff806af7d000  Level = 0  Assertions Set = None (4)Kernel Assertion ID = 503  Created At = 12/31/69 7:05:19 PM EST  Modified At = 12/31/69 7:00:00 PM EST  Owner ID = 0xffffff806af80000  Level = 0  Assertions Set = None (4)Kernel Assertion ID = 504  Created At = 12/31/69 7:05:24 PM EST  Modified At = 12/31/69 7:00:00 PM EST  Owner ID = 0xffffff806afca000  Level = 0  Assertions Set = None (4)Kernel Assertion ID = 505  Created At = 12/31/69 7:05:29 PM EST  Modified At = 12/31/69 7:00:00 PM EST  Owner ID = 0xffffff806af83000  Level = 0  Assertions Set = None (4)Kernel Assertion ID = 506  Created At = 12/31/69 7:05:34 PM EST  Modified At = 12/31/69 7:00:00 PM EST  Owner ID = 0xffffff806af86000  Level = 0  Assertions Set = None (4)\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,8,2012-03-07 09:45:21,15.1,,,1,"b'b"" Ok", awesome: that output actually helped a lot! From [PowerManagement-271.1/]url  So yeah, it seems like fixing #61 (Mac OS X not having working utmp due to libutempter not supporting that platform) will solve this issue: mosh just needs to get a utmp entry with a hostname added for that TTY. The reason wasn\'t enough is that Apple was explicitly filtering those entries out," as they could be local sessions.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,9,2012-03-07 09:45:21,715.2,,1,,"b""b' Just noticed this behavior on macOS 10.12 Sierra running as a mosh host. The initial login correctly wakes the machine up via the Bonjour Sleep Proxy"," but then it goes back to sleep after a few seconds.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,10,2012-03-07 09:45:21,476.3,,1,,"b""b' Still the same issue as of 2019. Can we do something about it in a host level ?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,47,open,-,-,-,3,6,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,opened,2012-03-19 09:34:13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,title,2012-03-19 09:34:13,00:00,,1,,"b""b' Improve chaff randomness'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,body,2012-03-19 09:34:13,00:00,,,1,"b'b"" There are two problems with Mosh\'s randomized chaff:is very predictable.provides low-quality randomness on some platforms. We solve both of these by implementing [Marsaglia\'s MWC256 pseudorandom number generator]url  and seeding its 1 kB of state from  . I don\'t have a formal argument for why we don\'t need cryptographic-strength randomness here.  But MWC256 should anyway be a large improvement over  .""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,1,2012-03-19 09:34:13,300.05,,,1,"b'b"" You raise a good point. Zephyr suggests just using / directly -can you think of a reason that isnt good enough? My inclination is that that\'s simpler than including our own PRNG.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,closed,2012-03-19 14:34:17,300.07,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,reopened,2012-03-19 14:34:19,0.03,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,2,2012-03-19 09:34:13,114.28,,1,,"b""b' Please let me know if you approve of the version I pushed to the keithw-prng branch.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,3,2012-03-19 09:34:13,717.53,,1,,"b'b"" I re-pushed my branch", based on your with a few additional changes:Add a method so we can fill the array in one  , with simpler codeOpen in mode  .  Doesn\'t matter on POSIX," but it\'s one less thing to change when we inevitably port Mosh to Windows.Removed because it\'s not testing much of anythingOther small changes; a diff between the branches should be reasonably clear.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,4,2012-03-19 09:34:13,890.82,,1,,"b""b' This is in now.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,closed,2012-03-21 19:16:54,282.58,0,4,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,68,closed,-,-,-,0,4,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,opened,2012-04-10 02:30:49,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,title,2012-04-10 02:30:49,00:00,,1,,"b""b' Missing byte swapping functions'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,body,2012-04-10 02:30:49,00:00,,1,,"b'b"" When running ./configure I get an error: checking whether pipe2 is declared... nochecking whether signalfd is declared... nochecking whether htobe64 is declared... nochecking whether OSSwapHostToBigInt64 is declared... noconfigure: error: Unable to find byte swapping functions I assume I\'m missing some dependency"," but I installed everything mentioned in the docs and I\'m not totally sure what this one is.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,1,2012-04-10 02:30:49,26.28,,,1,"b""b' Thanks"," what platform are you on?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,2,2012-04-10 02:30:49,47.07,,1,,"b""b' Same here.  Ubuntu 8.04.3 LTS.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,3,2012-04-10 02:30:49,1.15,,1,,"b""b' Yeah"," Ubuntu 8.04 is probably too old to get mosh without some effort to get the byte-swapping functions and protobuf.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,4,2012-04-10 02:30:49,3.8,,1,,"b'b"" I\'ve got protobuf", no problem.  Where do the byte-swapping functions come from?  If replacing them is all that\'s necessary," it seems like that shouldn\'t be a big deal.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,5,2012-04-10 02:30:49,0.98,,1,,"b""b' On Linux"," generally /'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,closed,2012-04-10 03:50:06,79.28,0,6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,reopened,2012-04-10 03:50:12,0.1,0,6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,6,2012-04-10 02:30:49,176.63,,1,,"b'b"" For RedHat 5 64 glibc-2.5-42", this issue also shows up. There are byte swap functions at /," however. Can that be supported in the build script? I\'d like to avoid updating glibc if possible.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,7,2012-04-10 02:30:49,137.8,,,1,"b""b' Same issue on CentOS 5.5glibc version: glibc-2.5-81 Looks like I have / as well"," any help on getting the build script to use that instead would be much appreciated!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,8,2012-04-10 02:30:49,91.38,,1,,"b'b"" Same issue here", Freebsd 9.0-RELEASE, glib-2.28.8_2. Installing [should fix the issue]url  but apparently the configure script still doesn\'t find it :( edit: the HEAD compiles perfectly," so it has already been fixed for freebsd""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,9,2012-04-10 02:30:49,83.87,,1,,"b""b' For me (Ubuntu 8.04) the package is libc6-dev. The / (and /) that comes with libc6 2.7 looks _very_ different from current versions.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,10,2012-04-10 02:30:49,22.35,,1,,"b'b"" As I see it the GCC 4.2.3 doesn\'t have __builtin_bswap64 but libc6 2.7 does offer bswap64. And / does define the endianess of the machine. htobe64 does not exist but with the given endianess you could just use the existing bswap64.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,11,2012-04-10 02:30:49,11.52,,,1,"b'b"" I\'m in the same boat as iguana (The San Diego Supercomputing Center is fond of CentOS 5.5). I see that the downtime project ran into this issue and ended up rolling their own byte swapping last year url  I have no idea how much of a pain it would be to swap in this swap code to mosh", but it\'s available under BSD license here: url ~:/downtimedb.c (Wow," that\'s quite a lot of activity on this thread in the past day!)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,12,2012-04-10 02:30:49,40.55,1,,,"b'b"" It should be enough to just define the missing functions somehere in mosh the same way they\'re defined in / and don\'t use the gcc-builtin bswap64 as it\'s [supposedly]url  bad anyways.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,13,2012-04-10 02:30:49,21.52,,,1,"b""b' Same issue on Red Hat Enterprise 5.5 (Tikanga)"," gclibc 4.1.2.  No root on this (remote) machine but I would love to try mosh on it....'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,14,2012-04-10 02:30:49,37.92,,1,,"b""b' Same issue on CentOS 5.7'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,15,2012-04-10 02:30:49,65.22,1,,,"b""b' Also", same issue on CentOS 5.8," unfortunately.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,16,2012-04-10 02:30:49,238.62,,1,,"b""b' Same issue on RHEL5'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,17,2012-04-10 02:30:49,358.57,1,,,b'b\' I also ran into this issue (in my case, on CentOS 5.6). I worked around it by copying a couple header files from the iphone-dev project\\\'s mirror of the BSD licensed files originally from Apple, and then modifying one of them to explicitly set the endianness of the machine (the configure test apparently doesn\\\'t obey CFLAGS). Here were the exact commands I ran (initially, was empty): After creating those files and setting explicitly, the  build worked and I have a working mosh binary (I haven\\\'t verified end to end yet," my little OS X laptop is still churning away trying to ""brew install mobile-shell""). I would recommend just slurping these macros (or their functional equivalents) into the mosh build. It seems a shame to leave  users in the cold on this.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,18,2012-04-10 02:30:49,283.42,,,1,"b'b"" Confirming that andrewgho\'s fix worked on CentOS 5.5. Mosh works"," and is a lot less laggy than typical SSH. Thank you!""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,19,2012-04-10 02:30:49,381.05,,1,,"b""b' Which boost rpms do the Centos users that have got this to compile got installed?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,20,2012-04-10 02:30:49,235.82,,1,,"b""b' The solution provided by @andrewgho works for  I also had issues emerging protobuf", beginning with the necessity to properly link it in with: Unrelated to this issue forum, I also had to symlink to and open relevant UDP ports on my target server. I will update with package version details," by-request.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,21,2012-04-10 02:30:49,70.27,,1,,"b'b"" jamespo", if you\'re referring to the error about a missing  file," I fixed it with the following: yum install boost141-devel./configure with-boost-libdir=/export CPLUS_INCLUDE_PATH=/""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,22,2012-04-10 02:30:49,9.67,,1,,"b'b"" As previously confirmed", this issue affects CentOS 5.8.  Additionally, I am having difficulty adapting @andrewgho\'s solution for a local (non-root) installation. My attempts to place the header files elsewhere and update references to  to point to their location are not convincing the configure script to move on.  Simply removing the check from the configure script gets past the issue (which I think would be properly resolved during compilation)," but our system also lacks protobuf. I\'m currently working on trying to statically link that to see if my attempts at providing a local version of the include actually works.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,23,2012-04-10 02:30:49,12.98,1,,,"b'b"" @petergaultney : The protobuf issue is easier to get around: Compile protobuf with ./configure prefix=$ and make install to there. Then similarly compile mosh with ./configure prefix=$. I\'m also similarly stuck on adapting @andrewgho \'s method in a non-root environment. Let us know if you make any more progress there.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,24,2012-04-10 02:30:49,1.42,,1,,b'b\' petergaultney, I managed it by doing the following," starting from the root of the extracted source archive: cd /wget url wget -Omachine-OSByteOrder.h url mv OSByteOrder.h echo ""#define **LITTLE_ENDIAN**""; cat  then I applied these patches to OSByteOrder.h", byteorder.h and the configure script:url url url \'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,25,2012-04-10 02:30:49,3.65,1,,,b'b\' oops," forgot the parens: (echo ""#define LITTLE_ENDIAN""; cat ) \''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,26,2012-04-10 02:30:49,3.33,1,,,"b""b' Also the path depth is inconsistent on those patches", so I made it harder than it needed to be to apply them," sorry about that.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,27,2012-04-10 02:30:49,17.42,,,1,"b'b"" @bvenable your patches work! That\'s almost exactly what I did", but I think I probably didn\'t provide a full path in the configure script.  @jhclark I found it necessary to export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:~/ as well," to get configure to recognize the location of protobuf.  Now it looks like the next issue to resolve is the missing  file. Hopefully finding a copy of the file and adapting @bvenable\'s method on that will get me to a running mosh.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,28,2012-04-10 02:30:49,2.7,,1,,"b'b"" @petergaultney see url  I\'m using CentOS 5.8 and those steps fixed the missing  issue.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,29,2012-04-10 02:30:49,2.28,,,1,"b'b"" @bvenable well", the \'root\' of all my problems is lack of root access. yum install just won\'t cut it. :) It looks like I can probably just do a local  of boostdevel, though," and get mosh to work off that. We shall see.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,30,2012-04-10 02:30:49,0.13,,1,,"b'b"" @petergaultney Just remembered you\'re non-root"," I imagine you can work around that by wgetting the boost141-devel-1.41.0-2.el5 RPM and using rpm2cpio etc. to extract it and then adjust the configure flag and environment variable to match.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,31,2012-04-10 02:30:49,2.3,,,1,"b""b' @petergaultney compiling should work too.  Use The Source!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,32,2012-04-10 02:30:49,443.42,,,1,"b'b"" Yeah if you\'re on linux and having issues with htobe64 then your best bet is to use the pull request in issue #150 Even that though requires that bswap_64() etc are available.  It\'d be good if there was a fallback if those functions weren\'t available... I worked around it with: That obviously only for a little-endian machine"," so it needs to be in ifdef\'s (like the #150 patch) for general use.  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,33,2012-04-10 02:30:49,484.73,,,1,"b""b' @bvenable thanks that fixed it. The only other thing I had to do was poke a UDP hole in my iptables and add export LANG=en_-8 to my ~/.bashrc (without that it would just hang)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,34,2012-04-10 02:30:49,427.32,,1,,"b'b"" Using the repo from the #150 pull request along with @petergaultney\'s suggestions worked for me:  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,35,2012-04-10 02:30:49,882.55,,1,,"b""b' As of c2a5941f8897c4b374db1a3033832f7c08dd1a09 we have byte-swap functions for every platform", so the original issue is fixed. Mosh now builds on CentOS 5.8, without EPEL packages.  This will be included in the next release.  If you still have problems on CentOS, please open another ticket.  For general ," you could create a page on the [Mosh wiki]url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,closed,2012-04-16 07:40:29,230.28,6,21,10,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,36,2012-04-10 02:30:49,1059.27,,,1,"b""b' I have managed to get mosh working on my ubuntu 8.04 LTS servers. In short: I had to enable back-ports", install from repo all -dev packages, grab protobuf from git and build it, build libutempter from source, then build mosh from source.  Finally I had to create symlinks in / to / for libprotobuf and open udp port 60000-61000 in firewall. I also had to use the andrewgho solution to solve the endian issue.  All is working.  If anyone has any questions or needs specifics," just let me know.  I will update my blog with details later.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,37,2012-04-10 02:30:49,1115.85,,,1,"b'b"" @zanberdo: Mosh 1.2 will be released very soon; there is already a [release candidate]url It should eliminate several of those steps", so you might want to hold off on that blog post. :) (If you\'re still having the byteorder problem with the current git version of Mosh," we\'d like to hear about and fix it.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,38,2012-04-10 02:30:49,233.57,,,1,"b""b' @zanberdo: I just installed the relevant protobuf and libutempter packages from Ubuntu 10.04 and then installed the mosh package built for 10.04 and it worked nicely.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,39,2012-04-10 02:30:49,526.4,,,1,"b'b"" @dakira thanks for the tip. As usual", I took the more challenging approach.  It\'s more gratifying when it works," but clearly it is also more work!""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,40,2012-04-10 02:30:49,528.15,,1,,"b""b' @kmcallister I will hold off on any blog posts on this subject.  Between the up coming release and @dakira letting me know the ubuntu 10.04 packages work with 8.04 it seems rather pointless of me to muddy the waters with all the extra work I did.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,107,closed,-,-,-,6,22,14,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,opened,2012-04-10 14:53:25,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,title,2012-04-10 14:53:25,00:00,,1,,"b""b' Mosh 1.1.3 on OS X hangs on connect'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,body,2012-04-10 14:53:25,00:00,,1,,"b'b\' OS X 10.7.3. Brew. Installed with ""brew install mobile-shell"" Connecting to an Ubuntu 10.04.4 LTS server results in a hang. Mosh prints one empty line after \\\'mosh \\\' and then nothing happens. I see the following processes running: To make sure the server side is ok .. I can connect to this host from another Ubuntu machine.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,1,2012-04-10 14:53:25,319.53,1,,,b'b\' I am also experiencing this issue," however I can connect successfully to the host in another session.OS X 10.7.3. Brew. Installed with ""brew install mobile-shell"" connecting to Ubuntu 10.04.4 LTS mosh 1.1.3 As st3fan said", mosh prints one empty line and hangs, it seems to be stuck on perl5.12\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,2,2012-04-10 14:53:25,4.68,,1,,"b""b' I killed a few of the (local) mosh-related processes on OS X and it suddenly started working and has been ever since. Not sure what exactly fixed it...'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,3,2012-04-10 14:53:25,504.77,,1,,"b""b' +1 '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,4,2012-04-10 14:53:25,248.85,,,1,"b'b\' Do you guys still have this problem if you change the first line of / to read ""#!/"" ? That is", if you use the system Perl instead of whatever is first in your PATH?\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,5,2012-04-10 14:53:25,93.05,,1,,"b'b"" I am having this problem. It\'s hanging on line 223 of / which is  . The SSH process it\'s waiting for does not seem to terminate. Commenting out this line does allow it the connection to succeed but obviously causes unterminating SSH processes to build up.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,6,2012-04-10 14:53:25,118.98,,1,,"b""b' +1 I can confirm it still hangs with the shebang.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,7,2012-04-10 14:53:25,9.92,,1,,"b'b"" It looks like running spawns three processes. If I kill two of them"," mosh unhangs. I still can\'t connect to my server (now mosh sticks on forever). I\'m not sure if this is a configuration issue or a result of killing those processes.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,8,2012-04-10 14:53:25,337.93,,,1,"b'b\' I\\\'m having this ""xx without contact"" forever too and I didn\\\'t kill any process. I\\\'m trying to mosh from a Macbook Pro Lion (10.7.3) to a Linux Mint 12 desktop. Mint is behind a NAT listening to ssh on several ports (I can ssh to it using all these ports). I\\\'ve opened UDP ports 60000-61000 too. Installed mosh with the .pkg. It connects but then hangs with a blue first line saying: I don\\\'t know if this is the same problem as you are experiencing", but the error looks the same.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,9,2012-04-10 14:53:25,12.85,,,1,"b'b"" @rafaelperrone It is not the same. You get the blue bar. I don\'t :-)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,10,2012-04-10 14:53:25,27.97,,,1,"b'b"" **st3fan**", you\'re right. Just tethered my phone connection and I could finally mosh to server. So it might be something related to my university\'s router blocking some ports. But which ports would it be? 60000-61000 UDP maybe? **NewAlexandria**," maybe you have the same issue. Try to mosh using a different connection.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,11,2012-04-10 14:53:25,110.63,,1,,"b""b' Has anyone found a workaround for this issue? I tried the latest mosh version from github and it still has the same issue. Is there any more info that I can submit here to get more insight into what is causing this?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,12,2012-04-10 14:53:25,7.83,,1,,"b""b' Just a note that using the .pkg from  also gives me the same problem.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,13,2012-04-10 14:53:25,28.92,,1,,b'b\' st3fan, it looks like the ssh command just isn\\\'t exiting for you when the mosh-server detaches. This is confusing (and I can\\\'t seem to reproduce it)," but I appreciate your patience and let\\\'s try to work through it. (1) What does ""ssh -V"" say? (2) If you run ""ssh -t SERVERNAME mosh-server"""," does that print the mosh-server startup message and then ""[mosh-server detached"," pid = 29095]"" and then put you back at your local shell? (I.e. does SSH properly exit?) (3) How about if you run this? ""ssh -t SERVERNAME -o ProxyCommand=""mosh fake-proxy -SERVERNAME 22"" mosh-server"" Does it put you back at your local shell?\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,14,2012-04-10 14:53:25,14.02,,1,,"b""b'   Yup. The last command drops me back into the local shell.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,15,2012-04-10 14:53:25,2.68,,,1,"b""b' Ha! So I am using zsh. I switched from zsh to bash and now things work! I will try to find out if this is zsh related or profile related.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,16,2012-04-10 14:53:25,21.28,,1,,"b""b' Did a little more testing. When I start zsh with to prevent it from loading my .zshrc it still has the same hanging issue. So it does not seem to be related to my specific profile.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,17,2012-04-10 14:53:25,2.9,,1,,"b'b"" Im having the same issue", but its not consistent," sometimes it\'ll happen and sometimes it\'ll succeed. I\'m running bash.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,18,2012-04-10 14:53:25,817.58,1,,,b'b\' I appear to be having a similar problem -but I believe it\\\'s actually a _server_ issue in my case, not client. I have two servers, both running Centos 5.  Both are running identical mosh binaries. When I run mosh-server via ssh to the working server, ssh exits immediately when mosh detaches. When I do the same to the non-working server, ssh exits only after mosh-server times out and quits. This happens regardless of which client I ssh from.  It happens even when I run the ssh command on the non-working server itself: $ ssh -t localhost -server MOSH CONNECT 60001 wLjTiVHPj82mG9wis6NanQ mosh-server (mosh 1.1.3a)Copyright 2012 Keith Winstein mosh-devel@License GPLv3+: GNU GPL version 3 or later url This is free software: you are free to change and redistribute it.There is NO WARRANTY, to the extent permitted by law. [mosh-server detached, pid = 3725]No connection within 60 seconds. [mosh-server is exiting.]Connection to localhost closed. I use bash on all machines. Commenting out the waitpid works around it, although at the risk of muddying the water of this bug, mosh _really_ doesn\\\'t work very well when I do that.  It drops keystrokes no matter how slowly I type, and when I exit mosh," my terminal is all screwed up (it no longer echoes anything until I do a ""reset"").  Neither of those symptoms occur on the originally-working server.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,19,2012-04-10 14:53:25,129.78,,1,,"b'b"" (I should note that if I start the server and client manually", not only does it (obviously) duck the waitpid issue," but I don\'t have the dropped-character or terminal-screwup symptoms)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,20,2012-04-10 14:53:25,108.03,1,,,"b'b"" Sorry to say but I don\'t think is the problem. I tried to reproduce my results from last night and Icould not get it to work again. It would be nice if mosh had a verbose mode. So that we can trace where it gets stuck.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,21,2012-04-10 14:53:25,64.57,,1,,"b'b"" phik and I worked to find a solution to his issue", which is fixed for him (on CentOS 5.0) by the above commit (0e9be1b)," which needs to be applied to the mosh-server. I\'d be grateful if those of you with other configurations (e.g. Mac->Linux referenced by the original submitter) could also test this on the server side and let me know if it fixes the problem. The basic diagnosis is that we were not detaching forcefully enough for some older versions of sshd.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,22,2012-04-10 14:53:25,12.7,,1,,"b'b"" The systems I was having the issue on were also running RHEL5 server-side"," so I\'ll make sure to try the patch.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,23,2012-04-10 14:53:25,200.8,1,,,"b""b' @keithw That change does not fix this issue unfortunately. I removed the mosh package and installed the head version from this repository on both server and client. Same issues. I tried to connect 10 times. 2 out of 10 were succesful"," 8 were hanging like I described in the first post of this issue.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,24,2012-04-10 14:53:25,48.57,,,1,"b'b"" Thanks for trying st3fan. Let\'s try to get to the bottom of this. Can you run: Does that come back to your local shell immediately"," or only after 50 seconds? It seems to come back immediately for me (on Ubuntu 11.10) and phik (on CentOS 5).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,25,2012-04-10 14:53:25,77.0,,1,,"b'b"" It returns immediately. I\'m on Ubuntu 10.04.4 LTS.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,26,2012-04-10 14:53:25,43.18,,1,,"b""b' It seems like #164 is an instance of this"," where the client is on Cygwin.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,27,2012-04-10 14:53:25,499.28,1,,,"b'b"" Especially annoying is that you can\'t ^C / ^\\\\ / ^Z it"," the only way out is to kill your terminal or dig through ps from another.  The ctrl-^. also doesn\'t work.  I don\'t think there should be any time during mosh\'s lifetime that it both ignores  and doesn\'t have alternative handlers installed.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,closed,2012-04-15 16:39:07,105.7,5,18,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,reopened,2012-04-15 16:39:16,0.15,5,18,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,28,2012-04-10 14:53:25,558.53,1,,,"b'b"" st3fan", maybe we can arrange a time to be on the #mosh IRC channel together and nail this down, because it\'s hard to do without quick iteration and a reproducible test case. But please try the above commit (pushed to master)," which tries to hew even closer to the Perl script that apparently works for you. Obviously I don\'t fully understand the conditions in which your SSH is not exiting.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,29,2012-04-10 14:53:25,1.17,,1,,"b'b"" lhunath", your point is well-taken. For what it\'s worth, while the mosh script is still running SSH," the SSH escape sequences (~. by default) should work. Obviously this is not the cleanest experience (how does the user know we are still somehow frozen without the SSH quitting?) but it does work.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,30,2012-04-10 14:53:25,307.98,1,,,"b""b' Unfortunately commit cc8b1f2 seems to cause other problems", breaking the server completely," on OS X. Looking at this now.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,31,2012-04-10 14:53:25,17.3,,1,,"b""b' All right"," the above commit (on branch mac-wip) appears to paper over the problem for now. Please test if can; otherwise I will be back in a few hours and will debug more completely.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,32,2012-04-10 14:53:25,526.73,,,1,"b""b' I compile and install it in Mac OS X 10.7.3"," mosh to my Ubuntu 10.04 LTS  works!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,33,2012-04-10 14:53:25,2.7,,1,,"b""b' oh", wait. I close the terminal, and mosh to server ," It hangs on again :('""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,34,2012-04-10 14:53:25,273.3,,1,,"b""b' This fix from saurik (along with 18dc967"," both now on master) seems to have fixed it for him. Would appreciate confirmation from others.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,35,2012-04-10 14:53:25,167.45,,,1,"b""b' Confirmation that master now works great for me. Ubuntu 10.04.4 LTS Server & OS X 10.7.3 Client.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,36,2012-04-10 14:53:25,83.2,,,1,"b""b' Fantastic. Closing this one with relish.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,closed,2012-04-16 15:40:05,1380.82,7,22,9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,37,2012-04-10 14:53:25,53.28,,,1,"b""b' This resolved the issue for me too. Great timing. :)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,114,closed,-,-,-,7,22,10,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,opened,2012-04-10 17:24:31,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,title,2012-04-10 17:24:31,00:00,,1,,"b""b' SSH Agent Forwarding'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,body,2012-04-10 17:24:31,00:00,,,1,"b""b' Would be great to be able to forward local SSH agents. Seems to ignore in  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,1,2012-04-10 17:24:31,616.63,,1,,"b'b"" :+1: I can\'t use mosh for this very reason. I need to be able to connect to other machines in the environment I\'m accessing plus use my ssh key to  code from github.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,2,2012-04-10 17:24:31,93.8,,1,,"b""b' This requires tunnelling the agent request from the server back to the client.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,3,2012-04-10 17:24:31,469.9,,,1,"b'b"" I\'d be interested in this feature"," too.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,4,2012-04-10 17:24:31,104.95,,1,,"b""b' If #41 ends up being resolved be adding  tunnels for arbitrary octet streams"," agent forwarding should be trivial to add on top of that.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,5,2012-04-10 17:24:31,552.62,,1,,"b""b' +1 for being able to ForwardAgent.  In our case also critical for getting code  GitHub on remote servers.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,6,2012-04-10 17:24:31,657.78,,1,,"b""b' +1 I need the agent for sudo authentication.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,7,2012-04-10 17:24:31,63.67,,1,,"b""b' +1 mostly for github'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,8,2012-04-10 17:24:31,548.43,,,1,"b""b' +1 also!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,9,2012-04-10 17:24:31,1167.8,,1,,"b""b' :+1: .. this would be very useful'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,10,2012-04-10 17:24:31,1386.95,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,11,2012-04-10 17:24:31,32.22,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,12,2012-04-10 17:24:31,118.07,1,,,"b'b"" Hard to resist the urge to say nothing but \'+1\' to @Mkaysi\'s comment...""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,13,2012-04-10 17:24:31,209.13,1,,,"b""b' All right", folks, the message has been heard loud and clear! We will put this on the roadmap for a release," probably the one immediately after 1.2. No need to keep +1ing we will do it.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,14,2012-04-10 17:24:31,1247.58,,1,,"b""b' Any word on if this is still planned for 1.2 or  1.3?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,15,2012-04-10 17:24:31,837.52,,1,,"b""b' +1 from me.  I naively thought that this was implemented and after building mosh at the server systems and running it"," realized that this is not quite ready yet.  Any updates on the timeline?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,16,2012-04-10 17:24:31,1019.07,,1,,"b""b' +1 for me as well", this is a blocking issue for me, as I do remote development," using local keys to communicate with upstream SCM repositories.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,17,2012-04-10 17:24:31,812.5,,1,,"b""b' +1 mostly for being able to work with github when doing remote development from EC2 machines.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,18,2012-04-10 17:24:31,164.43,1,,,"b'b"" Sorry for spamming everyone"," GitHub doesn\'t appear to have a feature to get notifications of changes on an issue without +1\'ing it.  So +1 for me too.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,19,2012-04-10 17:24:31,69.13,,1,,"b""b' @tsuna see at the bottom of any issue page'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,20,2012-04-10 17:24:31,1199.88,,1,,"b""b' +1 for agent forwarding'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,21,2012-04-10 17:24:31,678.92,,1,,"b'b"" Came to report another issue"," saw this. Key forwarding is absolutely required to my workflow and I am seriously concerned about the way the mosh devs handle ssh keys if it wasn\'t baked in from the beginning.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,22,2012-04-10 17:24:31,189.7,,1,,"b'b"" Mosh works fine with SSH keys (or any SSH login method)", since we just use SSH itself to handle authentication. We don\'t allow the user to forward ssh-agent requests because, frankly, nobody has contributed the code and we haven\'t gotten around to it. But in general, ssh-agent forwarding is inappropriate for high-security environments. There is little to stop a compromised remote host from requesting your credentials to do \'rm -rf /\' (or modify authorized_keys) on a bunch of remote hosts. The user doesn\'t find out what the remote host wants to do with your credentials; the ssh-agent protocol just lets a process use your key to sign any request. If you forward ssh-agent, then it lets a remote host use your key to sign any request. It\'s almost the same security characteristics as just copying your credentials to the remote host in the first place -but not quite, since the remote host loses access to your credentials after you log out (unless it uses them in the meantime to insert its evil key in your authorized_hosts file elsewhere). I am surprised by all the people saying we need this because they are security freaks. You don\'t forward ssh-agent if you are a security freak. ssh-agent forwarding is a convenience feature that should not be on by default and should only be used when connecting to semi-trusted hosts. @apeiron, no need for concern. A process that does ssh-agent forwarding just takes bytes from the remote host and ferries them to the local host\'s ssh-agent and similarly for the reply. It doesn\'t touch secret data. All it does is make remote requests to the ssh-agent look like they are coming from the local host. For the reasons above, that\'s a risky thing to allow," but actually making it happen is easy.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,23,2012-04-10 17:24:31,26.42,,,1,"b'b"" @keithw ssh-agent has confirmation feature that can protect you from that scenario when remote host does \'rm -rf /\' on other remotes. ssh agent forwarding is really good for accessing git repository from development and testing servers. Also it is good for proxying ssh connections through other hosts when there is no direct connection.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,24,2012-04-10 17:24:31,3.05,,1,,"b""b' Tell me more about this confirmation feature. My understanding is that there is no way for the agent (and therefore the local user) to learn what command the remote host intends on executing once it is able to authenticate. All the protocol allows is for ferrying public-key challenges and the associated responses.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,25,2012-04-10 17:24:31,27.87,,1,,b'b\' Yes," you can not controll what command is executed. But you can controlwhat hosts are involved.31.10.2012 9:54 \\xd0\\xbf\\xd0\\xbe\\xd0\\xbb\\xd1\\x8c\\xd0\\xb7\\xd0\\xbe\\xd0\\xb2\\xd0\\xb0\\xd1\\x82\\xd0\\xb5\\xd0\\xbb\\xd1\\x8c ""Keith Winstein"" notifications@\\xd0\\xbd\\xd0\\xb0\\xd0\\xbf\\xd0\\xb8\\xd1\\x81\\xd0\\xb0\\xd0\\xbb:\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,26,2012-04-10 17:24:31,8.65,,,1,"b'b"" I don\'t think that\'s right. The ssh-agent only learns which identity (key pair) the requesting process is trying to use. It doesn\'t learn which host the request came from (remember", forwarding makes the request appear to be coming from the local machine) and it doesn\'t learn which remote server that process is trying to connect to," or what command the process is trying to execute on the remote server. Happy to be corrected though if my understanding is off.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,27,2012-04-10 17:24:31,85.77,,1,,"b""b' Yes", it seems that you are right. So the better way to improve ssh-agent security is using different keys for different groups of servers. Anyway," that is generic weakness of single sing on systems. SSH has agent forwarding feature and it will be nice to have it in mosh.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,28,2012-04-10 17:24:31,4.92,,1,,"b'b"" I think for most people waiting on this issue"," this isn\'t as much about conveniency as it is about security.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,29,2012-04-10 17:24:31,488.02,,1,,b'b\' But with ssh you can select which connections have agent forwarding and which not. So if you log into the system you don\\\'t trust, you shouldn\\\'t forward your agent to this.I don\\\'t know if this is the case with OpenSSH, but at least the commercial one works so that for agent forward connections," ssh server adds a ""forwarding identifier"" so that the agent itself is able to see over what kind of path the forward is opened. Even if the system at the end of the path is compromised", it can also forge the end of the path, not the path that leads to it from the client.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,30,2012-04-10 17:24:31,0.78,,,1,"b'b"" And yes", agent forwarding for mosh is a must! Much more important than X11 or generic tcp stream forwarding.It\'s also something that is not particularly performance critical," since agent connections don\'t happen all the time and individual sessions are typically in the magnitude of kilobyte or less.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,31,2012-04-10 17:24:31,352.17,,1,,"b'b"" Indeed. While I appreciate the hard work that goes in to the project", I don\'t think it is appropriate for the mosh project to determine which risks its users should find acceptable. If SSH supports it, mosh should support it. In this case, the scenario you are concerned about is most often found on bastion hosts to access machines which are otherwise inaccessible. If the user doesn\'t use ssh-agent forwarding, then they need to keep keys on the bastion host, which results in the exact same vulnerability should that host be compromised. There is no improvement in security simply because mosh doesn\'t support the feature. If I need additional security measures for my keys, I\'ll make sure they have passphrases or I\'ll use multi-factor auth with a FOB. Put bluntly, mosh loses users because this feature doesn\'t exist. I can only use it in a few of my active terminals, holding out hope that I will eventually be able to use it for all my workflows when this feature is added. I evangelize mosh quite often and loudly, but the lack of agent forwarding is a common complaint. I evangelized to apeiron and he wants the feature badly enough that he came here to complain, so QED I suppose. And yes," this feature is far more important than X11 or stream forwarding. I\'m willing to bet your best and most common users are IT pros. This feature is far more desirable to them than these other features.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,32,2012-04-10 17:24:31,62.72,1,,,"b'b"" Again", the primary reason we don\'t have ssh-agent forwarding is that nobody has contributed the code. But I don\'t agree that Mosh should necessarily support insecure protocols just because SSH does. The idea of Mosh is to improve on SSH, and one way is by having a simpler and more robust security story. SSH\'s many security holes have largely been because of its complexity and the large number of options (including letting you negotiate weak ciphers and weak protocols, leading to downgrade attacks). I don\'t think we want to follow SSH down every dark path. For bastion hosts where the problem is connectivity, I (1) agree that copying and forwarding credentials have similar security risks (this is why I think it\'s silly all the people who think ssh-agent forwarding is so much more secure) but (2) disagree that either of these behaviors is justified. The right approach is for the bastion host simply to proxy the (encrypted, authenticated) connection to the other machines," and to make the authenticated connection end-to-end. There is no need to trust the bastion host at all or give it credentials -we are just using it as a network proxy. We can make Mosh (or socat) do this and it will be more secure than ssh-agent forwarding.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,33,2012-04-10 17:24:31,9.55,,,1,"b'b"" For the bastion host problem in particular", this is one option (with ssh) on how to achieve that without agent forwarding: host hidden  ProxyCommand ssh bastionhost nc -q 5 %h 22 OTOH, I agree that agent forwarding is pretty convenient for other cases. For me personally," what really keeps me from being able to use mosh at work is the fact that I need to open up new firewall holes. But I wouldn\'t say that agent forwarding is good for security.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,34,2012-04-10 17:24:31,2.5,1,,,b'b\' And again, it has not been demonstrated that agent forwarding is inherently insecure to such a point that it should not be implemented in mosh. Further, as I pointed out above, any problems are easily mitigated with key passphrases and multi-factor auth. In addition, bastion hosts are well understood and oft used, usually as more than just a network proxy. In many cases, it\\\'s used as an intentional and auditable choke-point with tools which folks do not want installed on other servers. In other words," direct end-to-end connections are exactly what those environments are trying to avoid. Let\\\'s not try and throw away everyone\\\'s workflows because we can\\\'t imagine the needs of other environments or they don\\\'t fit into one specific mindset. If we begin our argument with ""the only right way is""", we either know everything about every possible environment or we\\\'re fooling ourselves. If mosh can implement another, better way to directly reach hosts behind network choke points, that\\\'s great. But that does not make it unnecessary to implement this feature.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,35,2012-04-10 17:24:31,476.78,,1,,"b'b"" IMHO"," it would make sense focusing on finding someone that actually can implement agent forwarding (maybe as a sponsored feature?). Arguing over it does not make the need go away. It\'s a bit of a shame that mosh cannot be enjoyed in a lot (dare I say: most) use-cases.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,36,2012-04-10 17:24:31,774.88,,1,,"b'b"" Please provide instructions how to support second host authentication without storing the key on intermediate server. If forwarding is undesired"," what\'s the proper alternative?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,37,2012-04-10 17:24:31,10.18,1,,,"b""b' @romaninsh It has been proposed that nobody use jump servers", but instead directly connect to everything everywhere. I suspect that anyone who proposes this may not realize that this is not always possible," and in fact a violation of a number of security protocols in many environments.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,38,2012-04-10 17:24:31,3.02,,1,,"b'b"" @romanish I don\'t think there is such alternative. If you don\'t count using password in second authentication :). I\'d say that need to use git", rsync, scp," et cetera is full justification to have agent forwarding. Those are often needed even if intermediate hosts are not used in logging to intranet hosts.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,39,2012-04-10 17:24:31,0.55,,,1,"b'b"" Using a jump server is fine. _Trusting_ a jump server with the plaintext of your communications", and the ability to execute arbitrary commands," is unnecessary if it\'s really just a jump server.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,40,2012-04-10 17:24:31,3.4,,,1,"b'b"" I\'ll make my own trust decisions"," thanks.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,41,2012-04-10 17:24:31,2.4,,1,,"b'b\' @romanish: The ""proper"" alternative would probably be a protocol that let you authorize a host to perform some operations (e.g. to do a git push to github for a particular repository) using your credentials", in revocable and tracable fashion, without giving away the store. The problem is that ssh-agent was not intended to be forwarded. The ssh-agent can\\\'t tell the difference between a local request and a remote one, and it can\\\'t tell who is making the request or what they want to do with your credentials. So there\\\'s not really enough information in the protocol to make sane security decisions. In most cases it\\\'s basically better to actually store a private key on the remote server itself (and give that identity limited authorizations), rather than blindly forward requests from the remote server back to your ssh-agent.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,42,2012-04-10 17:24:31,3.85,1,,,"b'b"" A private key store on the remote server. Did you just try to solve a perceived security issue by adding _more_ complexity? LOL Come on", as security risks go, this one is far to the bottom of an extremely long list. While it is theoretically possible," the fact remains that if your  server is compromised such that an attacker can request your keys then you\'ve already lost the game and not-forwarding does absolutely nothing to improve your posture at that point.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,43,2012-04-10 17:24:31,24.87,1,,,"b'b"" Addendum after some more contemplation. The issue here is that you\'re trying to solve the wrong problem. The keys are not what is important to defend against an attacker. What we actually want to defend is access to other machines. In that context SSH-forwarding is not the actual problem"," but rather the use of keys without passphrases and hosts which allow access without multi-factor challenges. You can\'t solve the problem of poor key hygiene by making keys even more difficult and complex to manage.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,44,2012-04-10 17:24:31,92.67,,1,,"b""b' This issue is about having some support for SSH agent forwarding with Mosh.  Could we please not turn this issue into a debate on whether this is more or less secure than another alternative"," or which way is the best?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,45,2012-04-10 17:24:31,585.73,,1,,b'b\' @keithw I understand your reasoning. Any rogue app on any host you log into can potentially request as many authentications as it wants without me noticing. url  It\\\'s also clear that forwarding octets alongside your connection is a no brainer for many and is essential feature. Clearly we are forwarding keystrokes all the way to the server," why only keystrokes. I appreciate your effort to solve the problem with agent but it has nothing to do with mosh and by avoiding this feature you will alienate your users until eventually someone would fork your code and add the feature. My suggestion would be to add this feature but put a big warning when it\\\'s used prompting user to secure their ssh-agent. As the popularity of ""mosh"" grows your message will make more people aware of the problem and would make it easier to come up with a solution. Unfortunately I am in a whole different development universe", otherwise I would have helped you with the patch.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,46,2012-04-10 17:24:31,28.72,,1,,"b'b"" Thanks romaninsh. Yes", I think we will support ssh-agent forwarding with a flag like  , and we will also notify the user (with a popup message in the blue bar) when an agent request gets made. I suppose we could also just let the user turn forwarding on and off at runtime with a key combination. I also would like to support gateway connections, with a syntax like  , that don\'t trust the gateway host (any more than they trust any random gateway along the network path). That\'s the plan," at least. Anybody who wants to get involved is welcome to contribute and join in on the mailing list or IRC channel.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,47,2012-04-10 17:24:31,14.2,,,1,"b""b' @keithw Great decision! Me and everyone else really appreciate what you are doing"," thanks for your patience.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,48,2012-04-10 17:24:31,835.5,,,1,"b""b' The lack of ssh-agent is a show stopper for Mosh... Thanks for your considering to support it. '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,49,2012-04-10 17:24:31,1226.2,1,,,b'b\' I must say that using language like unsafe-agent-forward in command line flags is quite misleading. I accept that agent forwarding should be something that needs to be explicitly enabled either by command line option or an item in a configuration file, because it enables additional way to authenticate and it may not be something that all users want and sometimes the user may want to log into a system that he doesn\\\'t trust, in which case forwarding agent connections from these systems is unwise. A few points though: 1) If the user is running an authentication agent in his desktop machine, he must make two more or less conscious decisions in order to have his key to be visible in the remote host through agent connection. He must add the key to the agent and allow agent forwarding for ssh (or mosh once implemented) for the connection to that particular remote host. 2) The private authentication key can not be stolen via agent connection, but instead cryptographic operations (sign, decrypt) can be performed instead and they can be performed only while the connection with agent forwarding is open. In order for this being a real problem, it requires the system that is connected with agent forwarding enabled to have either compromised security or crooked administrator. While neither is unheard of, it would be much more damaging in a system like that to authenticate to another remote system using a password, which can be easily stored and used whenever the attacker wants until the password is changed or indefinitely, if the attacker installs some kind of backdoor using the password. 3) Same problem is in cases where the user is forced to store private authentication keys to remote hosts. In case these hosts are compromised, the key files can be stolen and passphrase to these keys can be snooped later or exposed to brute force password attacks or something more clever. The stealing of the key files and somehow acquiring the passphrase doesn\\\'t have to happen at the same time, so the attacker has time. 4) While forwarded agent can naturally also be used in installing backdoors just like the password, the time window for that is shorter and as said earlier, the user has control over which credentials are stored to the agent. 5) While standard agent in OpenSSH distribution doesn\\\'t have any method to require user confirmation for individual agent operations (i.e. requests to perform cryptographic operations on the private key stored to the agent) there is no reason why it must be so. Actually at least some agent implementations do just that and in addition to that also allow configuration per key to enable interactive verification for just some keys. Also other security features could be added to the agent. A couple ones intuitively coming to mind is to (add configuration to) reject agent operations if the desktop is idle or locked and allowing adding of keys without passphrase so that passphrase is asked only when the key is used for a first time and forgetting the passphrase if the key is not used within some configured period. I think that there are also some agent implementations that are doing just that (and honestly I\\\'ve personally implemented one in past). What I\\\'m trying to say, is that mosh should have agent forwarding in order to be a viable solution for infinite number of administration and software development scenarions, and adding agent forwarding to mosh so that it\\\'s enabled by command line parameter or configuration file option is not a step backwards in security but clearly forwards," because it in most cases eliminates the need to store ssh private keys to remote hosts as well as use of passwords when logging to another remote host from these ones. ""Logging to another remote host"" in most cases mean using git or scp rather than actually opening an interactive shell connection to anywhere while ssh being just a vehicle for data transport and authentication. I find it a bit peculiar that some mosh people have quite prejudiced attitude against the authentication methods in ssh", which is quite time proven, and at the same time mosh is using ssh for authentication and connection setup. As said earlier, I volunteer to help in specifying the feature and provide with an analysis of security and listing the caveats, but I don\\\'t have time to familiarize myself with mosh implementation enough to be able to write the channel code required in the implementation. However, OpenSSH is distributed with BSD-like license so at least the code to create agent listeners in a safe way (for proxy listeners opened by mosh server) and also connecting to ones (for mosh client to connect the local agent listener when receiving a forwarded agent connection via mosh connection) can be either grabbed from there or alternatively reimplemented using that as a security guideline.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,50,2012-04-10 17:24:31,29.05,1,,,"b""b' +1 for cutting the crap and using familiar ssh CLI switches", i.e. in this case. Either way," getting Agent Forwarding into mosh is the important part here.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,51,2012-04-10 17:24:31,65.97,,,1,"b'b\' +1 on ""unsafe-agent-forward"" as it was decided by the author. Please pay some respect to the person who gave us such a wonderful tool. If you think you could do better", fork and change the argument to whatever you want. I run an open-source project of my own, and It\\\'s a hard job. Please respect the time of someone who is contributing to the community. \'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,52,2012-04-10 17:24:31,38.42,1,,,b'b\' We can respect the author and his project and still criticize his opinion on a single matter. Forking is an action of last resort. Open source is not the place to be if you can\\\'t handle dissenting opinions, corrections of fact," and feedback in general. Please don\\\'t disrespect the process of open source by telling people to fork off over a discussion about the merit of a feature. This ""My way or the highway"" business has no place here. On Dec 11",2012, at 12:55 PM, Romans Malinovskis wrote:\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,53,2012-04-10 17:24:31,58.77,,1,,"b""b' @romaninsh Been running software projects", open and otherwise, for 25 years and never seen a well documented reasoning against my (usually quite good) plans as sign of disrespect. Did you read my message at all? If you did," did you understand any of it?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,54,2012-04-10 17:24:31,18.15,,1,,"b'b"" Hi folks", let\'s try to keep the thread here relatively on-topic. (Or feel free to move ancillary discussion to the mosh-devel mailing list.) I appreciate everybody\'s feedback. The important thing now is to implement the feature," which probably requires a reliable buffered flow-controlled octet stream channel to carry the bytes back and forth. (I don\'t really want to get stuck depending on any length limit of these requests and replies. And I also don\'t want to get stuck implementing a protocol that mostly works but later we learn we need revisions and have to make a breaking change again.) Anybody who wants to help with that is very welcome -please get in touch on the mailing list. The time for discussion of exactly what the argument should be called is probably not now.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,55,2012-04-10 17:24:31,1097.37,,,1,"b""b' Hm"," I wonder if mosh ever got around to supporting agent forwarding... Whoa!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,56,2012-04-10 17:24:31,1274.15,,,1,b'b\' I\\\'d love to use mosh while I\\\'m commuting on the train. Regular ssh has issues with sketchy mobile service. Without ssh-agent support, however, it\\\'s a total non-starter. I VPN into our data center. It\\\'s the only way in. I then gateway through a primary server where I do most of my work. All the hosts in our environment are trusted, since nobody outside our ops team has access. And, as an above commenter said some months back,"I\\\'ll make my own trust decisions, thanks."" Adding this feature does not stop ""security freaks"" from simply not using it. NOT adding this feature, however, stops those of us with use cases for it from using Mosh. I think it\\\'s quite clear which is the better state of affairs.\''
mosh	120	closed	57	djmitche	2012-04-10 17:24:31	2.43		+1		b'b"" Security freaks are already not using mosh.  It\'s got a long way to go to prove itself to the level that OpenSSH has.  Agent forwarding would be nice, but with or without it, this isn\'t a tool to use on critical systems.""'
mosh	120	closed	58	romaninsh	2012-04-10 17:24:31	93.25		+1		b""b' This feature is high on the list: url  I suppose we could put together some bounty on url '",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,closed,2013-04-16 16:16:30,1371.98,11,35,14,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,reopened,2013-04-16 16:16:36,0.1,11,35,14,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,59,2012-04-10 17:24:31,1042.8,,1,,"b""b' Actually I have an idea of how this could be implemented with reasonable effort and generic tunnels for that are not (necessarily) needed. Since all known agent flavours use more or less similar packet based protocol"," I think mosh-server and client should parse it enough so it can just send the request packets back and forth as a separate protocol items and handle the stream connections only locally to the agent (and upstream ssh client making auth request). Then it could just timeout the requests rather than use blocking etc.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,60,2012-04-10 17:24:31,103.17,,1,,"b""b' @romaninsh Looks like you just volunteered to set up a catincan bounty and I just volunteered to pledge the first $10.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,61,2012-04-10 17:24:31,882.93,,,1,"b'b"" Public critiquing is fine", there could be something obvious missing. Implementing SSH Agent Forwarding for Mosh will let anyone securely log into other systems, while keeping their private keys safe on their trusted devices. url  If you haven\'t tried it already, Mosh is awesomesauce, especially for office warriors\\\\* that have to switch WiFi connections frequently or debugging something half-way across the world while on the train home. Once you try Mosh," you\'ll never go back. url Fresh out of ninja hacker pirates. Overstocked on black helicopters and creepy surveillance vans though. at url  Doubtful if anyone else can see it yet.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,62,2012-04-10 17:24:31,33.72,,,1,"b'b"" I took a picture of a security freak once", but it came out blurry. ; ) Not waiting on hacker news visibility or CIH approval," it doesn\'t seem all that hard to ask some Googlers and make a hackathon weekend out of it.  Notes from Timo or maybe a G Hangout would be awesomesauce.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,63,2012-04-10 17:24:31,1338.4,,1,,"b""b' This proposal has been closed. '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,64,2012-04-10 17:24:31,29.7,,,1,"b'b"" I really appreciate the entrepreneurialism being shown here -I\'m happy to mentor anybody who wants to work on this feature! Most of the main developers hang out in  #mosh", or we can discuss over email (mosh-devel@). Please let me (and mosh-devel) know if there is something we can be doing to encourage this to happen. (I don\'t quite understand what happened with the  of the catincan thing," but in any event we are happy to help anybody who wants to put in the work to make this happen.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,65,2012-04-10 17:24:31,379.08,,,1,"b'b"" I actually started to patch it together a while ago. I think it\'s a few days\' work once I figure out how protobufs stuff work", how to push transport packets directly from the mosh-server serve() to protocol, and over overcome my natural resistance against c++ coding. Given all that, it becomes only a matter of finding those few days. I think there are no real protocol compatibility issues, because the agent forwarding must be explicitly turned on anyways in server, so if this is not done," server never sends any agent related stuff downstream.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,66,2012-04-10 17:24:31,1080.68,,1,,"b'b"" I\'ll donate at least $25", but I think catincan feature must be initiated by developer. url  @keithw ," would you mind creating it?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,67,2012-04-10 17:24:31,1085.62,,1,,"b""b' url  You can channel your donations to me :).'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,68,2012-04-10 17:24:31,1155.75,,1,,"b'b"" @rinne\'s solution: #423 ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,69,2012-04-10 17:24:31,245.4,,1,,"b""b' :arrow_up:'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,70,2012-04-10 17:24:31,527.32,,1,,"b""b' I am solving this problem with the following hack: And then of course make sure I have done ssh-add on my local host", as per normal ssh-agent setup, and have ssh-agent running too. Then in my mosh shell on the remote host, I just do: And away I go," ssh-forwarding with impunity.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,71,2012-04-10 17:24:31,116.35,,1,,"b'b"" Pretty much ruins the idea of automatic roaming"," doesn\'t it?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,72,2012-04-10 17:24:31,653.98,,1,,"b""b' I do something similar except for ssh I use autossh.  I also make a symlink to the most relevant ssh-agent pipe in my home directory and all my shells reference the symlink.  Though I was doing this before my use of mosh.url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,73,2012-04-10 17:24:31,1265.32,,1,,"b""b' +1 for agent forwarding'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,74,2012-04-10 17:24:31,1336.2,,1,,"b""b' :+1: for agent forwarding'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,75,2012-04-10 17:24:31,668.05,,1,,"b""b' +1.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,76,2012-04-10 17:24:31,933.87,,1,,"b""b' +1 Is it possible?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,77,2012-04-10 17:24:31,315.0,,,1,"b""b' Voting for agent forwarding!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,78,2012-04-10 17:24:31,459.28,,1,,"b""b' Agent forwarding is an important feature. +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,79,2012-04-10 17:24:31,358.6,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,80,2012-04-10 17:24:31,1061.03,,,1,"b""b' +1 agent forwarding would be perfect'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,81,2012-04-10 17:24:31,1274.2,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,82,2012-04-10 17:24:31,694.07,,,1,"b""b' +1 agent forwarding would be perfect'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,83,2012-04-10 17:24:31,211.18,,,1,"b""b' would love this. mosh is already a great tool.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,84,2012-04-10 17:24:31,348.2,,1,,"b""b' +1 if this is possible. Would make life much easier '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,85,2012-04-10 17:24:31,1327.88,,1,,"b'b"" Actually... why couldn\'t mosh-server work as the \'key agent\' process on the machine its running on and have the client forward the key to it that was used for the ssh connection? During the initial connect process (ie: the remote server isn\'t up yet and there is no locally running mosh-server or other key agent) mosh-client could stand in for the key agent to help the SSH process along. I\'m... not exactly sure what I\'d do for the case that there is a locally running agent perhap taking over from it and making sure the proper environment variable was modified before starting the SSH process for the initial connect&login ?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,86,2012-04-10 17:24:31,733.82,,1,,"b""b' It would be a killer feature +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,87,2012-04-10 17:24:31,429.37,,,1,"b'b"" Is there a place I can donate to the project? I\'d like to make a small donation to encourage the development of this feature.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,88,2012-04-10 17:24:31,377.95,,1,,"b""b' Having done a bit more research", it has become clear that a back-channel would be needed to properly forward the credentials for security purposes. There is, it seems, a constant back and forth between the key-agent and the remote server, which would necessitate maintaining a communications channel for that. So my idea above would, in all likelihood," not be a true solution.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,89,2012-04-10 17:24:31,1072.32,,1,,"b""b' +1 definitely a must-have feature'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,90,2012-04-10 17:24:31,195.43,,1,,"b""b' might as well throw in my own +1 =)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,91,2012-04-10 17:24:31,461.1,,,1,"b'b"" +1 would be a most useful feature. @kenrestivo\'s workaround is a great trick to have this work in the meantime.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,92,2012-04-10 17:24:31,965.93,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,93,2012-04-10 17:24:31,974.85,,1,,"b""b' +1 Please let us know if there is anything we can do to help test this.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,94,2012-04-10 17:24:31,33.58,,1,,"b""b' /me jumps on the +1 train'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,95,2012-04-10 17:24:31,188.82,,,1,"b""b' I would love this also. +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,96,2012-04-10 17:24:31,8.12,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,97,2012-04-10 17:24:31,82.25,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,98,2012-04-10 17:24:31,161.97,1,,,"b'b\' Could this thread be locked?  url  Every time I see a notification I think.. ""maybe this is it.. maybe it\\\'s fixed!""  but then it\\\'s just someone adding ""+1"" :disappointed:  (I realise I\\\'m contributing to the noise sorry for that)\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,99,2012-04-10 17:24:31,5.42,,,1,"b'b"" +1 to mathew-andrew\'s comment. :smile: ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,100,2012-04-10 17:24:31,1086.82,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,101,2012-04-10 17:24:31,336.35,,,1,"b""b' :+1: So that we can and without doing the dance () PS this project is REALLY cool"," but is it still under active development? Last commit was in January...'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,102,2012-04-10 17:24:31,731.08,,1,,"b""b' Dose work?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,103,2012-04-10 17:24:31,399.83,1,,,"b""b' unfortunately not :( '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,104,2012-04-10 17:24:31,973.05,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,105,2012-04-10 17:24:31,788.4,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,106,2012-04-10 17:24:31,1379.88,,,1,"b'b"" Wondering if mosh is still under active development. Last commit to github was January 8", 2014. That\'s almost one year ago. Also, it seems that there is a patch for -A, but nobody is merging it. This would be a nice feature, but even nicer would be if the project wasn\'t abandoned," since it is such a useful tool.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,107,2012-04-10 17:24:31,69.87,,,1,"b'b"" Yes ship it please! Let the user decide on the risk", esp. given that it\'s enabled explicitly.Many valid points have been made above, both pro and con," but I\'d rather have the choice.See url  the man himself answered that.If you\'re referring to the Pull Request url .. it seems there\'s a merge conflict.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,108,2012-04-10 17:24:31,74.07,,1,,"b'b\' Actually.. if Mosh were to implement ""raw mode"" suitable for use with SSH ProxyCommand + nc", providing a reliable TCP transport channel that stays up, that could account for all of SSH Agent Forwarding and tunnelling without Mosh (re)implementing it directly..\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,109,2012-04-10 17:24:31,954.2,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,110,2012-04-10 17:24:31,338.18,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,111,2012-04-10 17:24:31,954.6,,1,,"b""b' :thumbsup:'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,112,2012-04-10 17:24:31,798.82,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,113,2012-04-10 17:24:31,597.42,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,114,2012-04-10 17:24:31,1204.83,,1,,"b""b' :+1: '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,115,2012-04-10 17:24:31,1045.1,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,116,2012-04-10 17:24:31,821.45,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,117,2012-04-10 17:24:31,499.1,,1,,"b""b' :+1: '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,118,2012-04-10 17:24:31,1419.83,,1,,"b""b' :+1:'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,119,2012-04-10 17:24:31,828.83,,1,,"b'b"" Hey", Since the code works (thanks to kevinr), I couldn\'t stand it just sitting somewhere in a lonely Git repo. So, here\'s a Debian (actually Ubuntu) package," that works (for me at least): url  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,120,2012-04-10 17:24:31,558.73,1,,,"b'b"" +1 I don\'t know enough to comment about the security issues that may or may not exist with agent forwarding"," but it\'s a necessity in the environment I\'m working in. :\\\\""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,121,2012-04-10 17:24:31,948.08,,1,,"b'b"" I may have found a workaround using \'tmux\':1. login with normal ssh client2. open a tmux terminal and detach it3. login with mosh4. attach previously created tmux terminalYou may be able to log with ssh-agent to your remote machines. I am not sure how long tmux will keep the link with the ssh-agent...""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,122,2012-04-10 17:24:31,660.05,1,,,"b'b"" Just as one sample use-case that would seem to not work with the solution: When living in a country with poor internet connection", and wanting to treat your local workstation as a stupid shell for SSH\'ing into your actual workstation on a cloud provider. Using agent forwarding has the benefit that, for all intents and purposes, it\'s like my SSH key were installed when I log in," and uninstalled when I log out.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,123,2012-04-10 17:24:31,59.4,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,124,2012-04-10 17:24:31,1036.62,,1,,"b'b"" Must have feature for me (can\'t use mosh without it).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,125,2012-04-10 17:24:31,9.77,,1,,"b""b' The current version of agent patches on top of the current upstream master branch of mosh is in #696. Some maintainer asked for patches to be re-merged and I assumed that it meant that they were going to pull the feature to mainline. However it has been 17 days (after I re-merged the feature) and nothing has happened since.For now", cloning mosh sources from url  and compiling agent-forwarding-merge-20151128 branch (with-agent-forwarding)," does the trick.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,126,2012-04-10 17:24:31,1423.47,,1,,"b""b' :+1:'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,127,2012-04-10 17:24:31,1241.67,,1,,"b""b' Has it been added to the main yet?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,128,2012-04-10 17:24:31,583.93,,1,,"b""b' @rinne"," I get the following error by using your branch:  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,129,2012-04-10 17:24:31,586.18,1,,,"b'b"" Three possible explanations. 1) You don\'t compile mosh from agent branch (agent-forwarding-merge-20151128)"," see #696 which is the current pull request. 2) You have different mosh installed in your system and you are actually running it. 3) You don\'t have agent enabled version installed in the server side in the system you are logging into. The error message makes this one the likely culprit.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,130,2012-04-10 17:24:31,53.57,,1,,"b""b' Do you mean that mosh-server from branch must be installed on the ssh-server as well?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,131,2012-04-10 17:24:31,129.67,,1,,"b""b' Yes. Mosh server must of course support agent forwarding too. Just like in ssh connections server creates the proxy authentication socket in remote host and forwards the agent requests to through the ssh protocol connection back to the client and client in its turn forwards them to the local agent socket", which can of course be another proxy socket," if there are multiple chained connections.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,132,2012-04-10 17:24:31,1399.58,,1,,"b""b' Looking forward for merge into master.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,133,2012-04-10 17:24:31,539.9,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,134,2012-04-10 17:24:31,1414.42,,1,,"b""b' Any news on this getting into mosh?  I cannot use it without ssh-agent.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,135,2012-04-10 17:24:31,983.77,,1,,"b'b"" @dlangille You might like to check out #696. The pull request there is up to date with current mosh master and while I don\'t hold my breath waiting it to be merged"," you can compile from my forked code.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,136,2012-04-10 17:24:31,764.98,,1,,"b""b' :+1: '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,137,2012-04-10 17:24:31,899.85,1,,,"b'b"" Got excited about and really wanted to use Mosh. Spent a lot of time setting it up only to find agent forwarding doesn\'t work. Doh! Came here to find this discussion. Looking forward to a resolution!""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,138,2012-04-10 17:24:31,56.47,,1,,"b""b' @wagnerone Please check out #696.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,139,2012-04-10 17:24:31,86.98,,,1,"b""b' I appreciate the references to patches"," but we need to get this into the code base before most people would consider using it.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,140,2012-04-10 17:24:31,159.63,,,1,"b'b"" Sure. Don\'t we all? The pointer was to more recent discussion and your upvotes and appreciations are appreciated there too. Lack of interest from the mainline developers has been quite ubiquitous all the way. I have been merging the mainline changes and resolving the conflicts every now and then in hope that they might merge the patches some day.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,141,2012-04-10 17:24:31,85.27,,1,,"b""b' Lack of developer interest is disappointing. Is it an objection to the feature", interests lie elsewhere," or complete silence on the topic?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,142,2012-04-10 17:24:31,424.52,1,,,"b'b\' My interpretation is that there is some small objection to the feature for the reason unclear (mainly ""I don\\\'t use it"," so it must not be necessary""). Secondly the patch is quite big", because mosh as it was (and is) wasn\\\'t really made to accommodate such extensions. About the actual implementation I\\\'ve seen only minor and largely irrelevant discontent. I remember that @keithw wasn\\\'t originally sure, whether the way out-of-bans protocol (used by agent forwarding) data piggy-packs to mosh protocol packets is the right way to go, but that is so very basic decision in agent forwarding implementation that there isn\\\'t really too much to be done for that given that entire feature isn\\\'t going to be rewritten, which is something I absolutely won\\\'t do.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,143,2012-04-10 17:24:31,58.05,1,,,"b'b"" Really like to see #696 merged. Although I don\'t feel safe to store any SSH key on server"," I need to occasionally do git pull PHP code base on server for deployments and upgrades. The lack of agent forwarding is a pain in ass.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,144,2012-04-10 17:24:31,1390.33,,,1,"b'b"" I just use an extra pure-ssh connection to forward agent", when I need it," and do export SSH_AUTH_SOCK variable from that connection. And I\'m happy.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,145,2012-04-10 17:24:31,843.3,,1,,"b""b' +1 to merge #696'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,146,2012-04-10 17:24:31,1256.45,,,1,"b'b"" I\'d like to consider this for Mosh 1.3"," after we release 1.2.6.  I\'ve started a discussion on the mosh-devel mailing list; if you\'re interested please comment there.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,147,2012-04-10 17:24:31,30.33,,1,,"b""b' @cgull do you have the link to the mailing list thread?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,148,2012-04-10 17:24:31,31.57,,1,,"b""b' url You can also subscribe to the list from there.The list is also archived by url  and url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,149,2012-04-10 17:24:31,3.52,1,,,b'b\' @tnguyen14 url  I regret that I don\\\'t have time for that mailing list, but just a quick response to specific concern of @cgull about nasty  clients potentially blocking the mosh session. It may be possible for that to happen, but thenagain if you run a nasty program in your remote shell, it can freeze your terminal connection using much simpler approach like sending a kill signal to your mosh-server process or sending random crap to your pty. From what I remember about writing that agent forwarding code a few years back, I at least tried to write it so that if agent connection data starts to get buffered or traffic that is tunneled doesn\\\'t look like legit agent protocol packets of reasonable length, the agent connection gets very easily disconnected in order to save the terminal connection from blocking. I think agent connections are also dropped, if mosh client goes to off-line state, because it\\\'s most likely a right thing to do in aboutn 100% of the cases. That much said, I don\\\'t think the oob-protocol (the one I implemented and on top of which the agent connections are forwarded) is in its current state suitable for general purpose tunneling. I think much more fundamental changes to mosh would be needed for that and I don\\\'t think that\\\'s worth the effort. In order to do that so that it really works, there would be need for (sub-)data channels with channel specific flow control and buffer management. That stuff is actually a big part of ssh protocol implementation and to get that stuff really to work took number of years. Easily disconnecting forwarded agent sessions is just a substitute for flow control and while it\\\'s usable for this specific stuff, it\\\'s not usable for generic tunneling. Generic tunneling would also introduce a whole set of new semantic problems. E.g. what to do to a tunneled tcp connection," if the mosh connection gets into ""disconnected state"". Normal tcp connection would use retransmits and eventually break up the connection", if no ack packets are received, but since the tunnel proxy would remain open indefinitely, this would not happen and the only thing taking place would be a blocking tcp socket. Anyways, I\\\'m glad to see that there are at least some signs of maybe mainlining the agent forwarding.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,150,2012-04-10 17:24:31,1153.55,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,151,2012-04-10 17:24:31,892.57,,1,,"b""b' Well"," +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,152,2012-04-10 17:24:31,729.6,,1,,"b""b' @cgull now that 1.2.6 is released"," is there any estimate on how long 1.3 will take to get out of the door?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,153,2012-04-10 17:24:31,631.68,,1,,"b'b"" For anyone who wants to be able to use mosh with ssh-agent forwarding", you can work around this problem by adding the following to your ~/.profile or other location that will run on ssh connect. I also put the following into my user\'s crontab, so the symlink will follow when the local socket changes, though I don\'t think this is actually required since the .profile will catch it on the new login: It\'s not perfect, since it requires extra things on the remote server, but it gets the job done pretty well. This is the same hack used to get ssh-agent forwarding to work with tmux," and I found this ticket by accident and personally didn\'t even realize that mosh wasn\'t forwarding the agent itself since I was already using this setup.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,154,2012-04-10 17:24:31,925.75,,,1,"b""b' @ksanislo With that setup", how do you connect?  mosh bastion mosh internal_server?  If I could get this to work," there would be soo much happiness:)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,155,2012-04-10 17:24:31,16.02,,1,,"b'b"" @jorgelr I use mosh to my bastions", and typically just ssh to internal servers from there. Depending on what linux distro your bastion is running, you might need to tweak how you\'re making the symlinked ssh_auth_sock.  The general idea is that you want the environment variable inside your connected mosh session to end up set like this: $ echo $SSH_AUTH_SOCK/ $ readlink -f $SSH_AUTH_SOCK/-Sq7wt8 So that symlink is pointed to the latest agent socket owned by your user," which should be the ssh connection that mosh created to connect. You\'ll still need ForwardAgent yes set in your  file for the mosh bastion host.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,156,2012-04-10 17:24:31,9.68,,1,,"b""b' I don\\xe2\\x80\\x99t want people to be misled here: @ksanislo\\xe2\\x80\\x99s suggestion requires that you leave open a separate SSH connection to the host in addition to the Mosh connection"," to allow SSH to do the agent forwarding. The SSH connection that Mosh creates is used only for launching the Mosh server and is immediately closed.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,157,2012-04-10 17:24:31,19.13,,1,,"b'b"" Oh", you\'re right, the mosh session does go away instantly... I have a long running ssh between my home workstation and the bastion which is effectively where my ssh-agent ends up running...  I suppose it\'s easy enough to duplicate until there\'s a proper solution though," just: nohup ssh ${bastion_host} sleep 365d & from somewhere that will stick around is enough to keep the agent available. You could get more creative and put it in a while true loop in case it gets disconnected.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,158,2012-04-10 17:24:31,30.58,,,1,"b'b"" Thanks -I\'ll see if I can\'t get it working. But would absolutely send beer once this functionality get solved the right way in mosh. Crossing fingers and arms:)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,159,2012-04-10 17:24:31,604.65,1,,,"b'b"" BSD find doesn\'t honour -printf. The recipe works if you modify it on BSD to use ls", and awk out the fields to get date sort order to work. for the transient ssh thing, surely we want tail -2 | head -1 to get the _second last_ ssh agent," which will be the long-lived instance? I\'m confused. leave that out for now. here is a BSD recipe which seems to work.  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,160,2012-04-10 17:24:31,63.15,,1,,"b'b"" @geeohgeegeeoh for is deprecated with  ", does bsd support  ? and perhaps it\'s just easier to use instead than support ancient tools? aside," i [wrote]url  earlier how i manage in #696""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,161,2012-04-10 17:24:31,813.1,,,1,"b""b' the example in the discussion uses tail. so", I used what I saw. if you wantto deprecate tail, pass on up the foodchain because the original script for.profile I modified used it. good luck persuading BSD people to adopt gnuisms On Tue, Oct 25, 2016 at 3:15 PM," Elan Ruusam\\xc3\\xa4e notifications@wrote:'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,162,2012-04-10 17:24:31,40.27,,1,,"b""b'   is not a GNUism"," it is [required by POSIX]url  (where is not) and supported by  at least [GNU]url  [FreeBSD]url  [NetBSD]url  [OpenBSD]url  [DragonFly]url  [Darwin]url  [Tru64]url  [HP-UX]url  [IRIX]url  and [Plan 9]url  See also [(coreutils)Standards conformance]url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,163,2012-04-10 17:24:31,954.4,,1,,"b'b"" So no updates", ticket is still open," what\'s the official status? Any solution besides hacks in comments above?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,164,2012-04-10 17:24:31,1416.07,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,165,2012-04-10 17:24:31,98.95,,1,,"b""b' @MaximF Well there is a solution url  :)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,166,2012-04-10 17:24:31,838.87,,,1,"b""b' Thank you for an update @rinne! Out of curiosity is there an ETA for merging that PR? '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,167,2012-04-10 17:24:31,1009.22,,1,,"b""b' Point of order: #696 has existed since [at least] Nov 28",2015," i.e about 14 months ago. There are several discussion points already in this thread. Search for 696 and read.  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,168,2012-04-10 17:24:31,56.97,,,1,"b'b"" @andersk this is all probably OBE. the gnuism comment was about gfind. I didn\'t realize the specificity of the -n1 thing. My solution only sometimes works", its bad code.  I\'d far rather a clean solution which was generally applicable and portable was done, and I don\'t think coding to gnu find is that. POSIX behaviour is going to be fine," if tail -n1 is the syntax which is needed""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,169,2012-04-10 17:24:31,1303.43,1,,,"b'b"" On the point of security: my security team requires us to use a yubikey fob", which generates something like a one-time ssh key that is then required for login.  We then ssh to a bastion host, and outward from there to the real hosts.  This means that without ssh forwarding, I literally can\'t log in to anywhere except the bastion hosts, *for security reasons*.  This is a hard requirement from our security team.  So arguing that agent forwarding is bad because security cuts no mustard with me.  So, yeah, no mosh for me," I guess.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,170,2012-04-10 17:24:31,48.75,,1,,"b""b' Following on from the previous post: tools"," not policy.  Let us decide if ssh-forwarding is for us or not.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,171,2012-04-10 17:24:31,27.25,,,1,"b'b"" A few folks have posed similar (though", I think, not identical) workarounds, but here\'s what I\'ve come up with: from one shell on the client:  ssh -A ${host}  then, from another, log in with mosh:  mosh ${host}  and in the mosh shell:  export SSH_AUTH_SOCK=/ ...which should autocomplete to the socket forwarded by the first command. This doesn\'t allow roaming, since if the ssh connection breaks, you lose the agent, but it\'s good enough for getting a usable shell from a coffee shop\'s lousy wifi, which is my main use case. Would be nice to actually have the feature upstream though.  Ideally the first command could just be:  ssh -AfqN ${host}  Which would obviate the need to keep an extra terminal open. But for some reason I haven\'t figured out," the auth socket doesn\'t show up when I do that.  Also: I am so glad github added the reactions feature -cuts down on +1 noise.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,172,2012-04-10 17:24:31,1397.83,,,1,b'b\' I got about halfway through the comments before giving up.  Would someone mind summarizing where this issue stands?  Regarding the potential security issue: ssh-agent isn\\\'t just a program; it\\\'s also a protocol.  There are other programs that implement the same protocol with better security.  I use a YubiKey with the touch flag enabled; this means that each time a remote host wants to use my key, my YubiKey flashes, and I have about 15 seconds to touch it to authorize whatever\\\'s taking place.  The argument against this model, of course, is that there\\\'s no way for me to audit what\\\'s actually being authorized.  However, the same is perfectly true without ssh-agent forwarding.  You never have any guarantee that a given machine is doing what you tell it to do.  It\\\'s up to the end user to decide which risks are most significant in their environment in a case such as this," where there\\\'s no ubiquitous best practice.  (This is the ""tools"," not policy"" argument.)  It\\\'s also worth noting that the userbase likely to utilize ssh-agent forwarding is probably more likely to find a workaround or store private keys on the intermediary than to alter their method because a single tool doesn\\\'t offer forwarding.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,173,2012-04-10 17:24:31,1.97,,1,,"b""b' The previous post", in short, says: tools," not policy.  Let the users handle the policy.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,174,2012-04-10 17:24:31,6.6,,1,,"b'b"" @Zenexer It stands in #696. Basically a working patch set has existed for years but not merged to mainline. Meanwhile I\'ve been keeping my agent enabled branch in sync with mainline master branch every now and then.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,175,2012-04-10 17:24:31,316.43,,1,,"b""b' I set up a bounty", because money talks, and put in the first $50 to get the ball rolling," I hope.  url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,176,2012-04-10 17:24:31,22.32,,,1,"b""b' @bukzor That is an amazing idea"," thank you! Made my contribution there as well! :)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,177,2012-04-10 17:24:31,290.63,,1,,"b""b' @bukzor @MaximF All find and well", but as stated, the actual code has already been written (by me about 5 years ago). There has been some mild critique over where and how it should be implemented," but there has been absolutely zero activity in reimplementing it in any other way it has already been done (and not merged to mainline). The current state of working patch is in #696.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,178,2012-04-10 17:24:31,63.77,,1,,"b""b' If it is already ready"," why not to just merge it?Better to have some functionality than no functionality :)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,179,2012-04-10 17:24:31,3.8,,1,,"b""b' It is the full agent functionality. But merging is something that is out of my hands.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,180,2012-04-10 17:24:31,7.58,,,1,"b'b"" Do you mean you don\'t have privileges to merge into a master branch? If so","let\'s just make a fork! ;) 2017-08-29 23:25 GMT-07:00 Timo J. Rinne :>""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,181,2012-04-10 17:24:31,4.98,,1,,"b'b"" There already is a fork that loosely follows the master branch of upstream mosh + agent patch. I won\'t commit myself to maintain it for the rest of my life though.  url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,182,2012-04-10 17:24:31,1043.37,,,1,"b'b"" @rinne Yes", this is about motivating upstream to take this seriously. There\'s actually two bounties now. A smaller one for this pull request in particular," and a larger for the original feature request.  [![Bountysource]url [![Bountysource]url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,183,2012-04-10 17:24:31,1124.02,,1,,"b'b"" Just discovered Mosh today. Was excited to try it out. Discovered that Agent Forwarding didn\'t work. Connected to my server"," and everything was great. Then I tried to git clone and realized there was no agent forwarding. Without that feature Mosh is completely useless to me. Saw that this issue is from 2012. That is very disappointing. Guess it\'s back to trusty old SSH for me.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,184,2012-04-10 17:24:31,549.25,,1,,"b""b' If we have a working patch"," what exactly is preventing the merge?  1. Enough time 2. Code quality 3. Design decisions 4. Other  What is blocking this so we can be clear about resolving it or working around it?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,185,2012-04-10 17:24:31,142.43,,,1,"b'b"" @HaleTom Lack of interest from the upstream developers\' side.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,186,2012-04-10 17:24:31,7.72,,1,,"b'b"" Please see mailing list discussion on this url Excerpt: There is some good news: we think we\'ve figured out a way to do secure ssh-agent forwarding (something that could be enabled all the time", for any server," without the stern warning that accompanies and with a prototype that doesn\'t require changing the core Mosh protocol. Please stay tuned...""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,187,2012-04-10 17:24:31,106.2,,1,,"b""b' @keithw  Would you mind sharing?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,188,2012-04-10 17:24:31,58.65,,1,,"b'b\' I read [the mailing list discussion on this]url  and would appreciate anyone subscribed to that list posting here when the following tool is made available:like that also does ""secure"" ssh-agent forwarding", by allowing the agent to authenticate and limit (1) the host making the request, (2) the remote host that host is trying to authenticate to, and (3) the command the host wants to execute on the remote host. (With normal ssh-agent forwarding, the agent can\\\'t learn any of these things and is basically signing a blank check.) This works alongside SSH and Mosh. We hope to have a public beta soon and will look forward to reports from anybody who wants to test it.  \'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,189,2012-04-10 17:24:31,6.15,,,1,"b'b"" Hmm"," is there any work-around for this issue until @keithw \'s good news gets implemented (fingers crossed).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,190,2012-04-10 17:24:31,45.85,,1,,b'b\' @HaleTom  In the dawn of time when there was a standardisation effort for ssh protocol, there was also some new proposals for agent protocol. However, the protocol has remained much the same and there is no real standard for that. The pretty obvious extension that would allow policy based decisions in agent," would be a ""forward notification"" packet that all _clients_ would add to the forwarded agent connection (towards the agent) and include the information of the endpoint where that particular client is connected. That would mean that agent receiving an agent connection would get 0..n forward notification packets before anything else and could reconstruct the forwarding path before deciding whether to allow signatures and which keys or certificates to show etc.  Basically the user could then limit the agent forwarding to the systems he trusts. And the first level of forward notifications", would only need support in the client the user is using first. Server support is never needed.  Anyways, this is not mosh specific.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,191,2012-04-10 17:24:31,1127.35,1,,,"b'b"" Hi folks",  Here is our prototype for secure agent forwarding that works with Mosh (or SSH): [Guardian Agent]url Compared with traditional forwarding, Guardian Agent provides more-constrained agent forwarding that we think could safely be enabled on any connection. Like Mosh, this tool has to be installed on your local machine and on any host you want to Mosh to. It does not require anything to be installed (or any changes at all) on remote servers (e.g. GitHub) that you want **that** host to be able to SSH to using forwarded credentials. This approach also does not require changes to the underlying Mosh protocol to carry ssh-agent request data within the interactive terminal, and we don\'t have to commit to (and support) a protocol for carrying reliable agent traffic between mosh-clients and mosh-servers. Right now, Guardian Agent works **alongside** any version of Mosh or SSH. Users run (the agent) on their local machine, in a separate window alongside the interactive session. prompts the user to approve forwarded requests from the intermediary host, either with an X11 popup or in that second terminal window. Based on feedback to this , we may incorporate the techniques behind Guardian Agent more deeply into Mosh.  There is a more detailed writeup [in the README]url  Please let us know what you think," both about the usability of the tool or about the underlying mechanism. Please file any issues with the tool as GitHub issues in the [Guardian Agent repository]url  We\'re looking forward to everybody\'s feedback.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,192,2012-04-10 17:24:31,647.55,,,1,"b'b"" +1 Same for me it doesn\'t work on version  . I tried the following:   I can see the variable is exported in the environment", but the agent forwarding doesn\'t seems to work.  SSH agent forwarding is a very nice feature," I would be happy to see that feature supported by mosh. Description of the agent protocol can be found IETF RFC draft from the group  [draft-ietf-secsh-agent-02]url OpenSSH []url  from djm@ [draft-miller-ssh-agent-02]url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,193,2012-04-10 17:24:31,453.82,,1,,"b'b"" @sbz Something like that is not going to work -Mosh only uses SSH to authenticate and remotely invoke the program. The SSH connection ends and is replaced with Mosh end-to-end. There\'s no SSH around to forward the agent requests.  If you want ssh-agent forwarding", use Guardian Agent! It works (and the design is more secure than normal ssh-agent forwarding," keeping in mind that Guardian Agent is beta software and needs the experience of people trying to break it and criticize the design).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,194,2012-04-10 17:24:31,666.72,1,,,"b'b"" I am very skeptic about a new agent implementation that requires a script wrapper around ssh is going to see any wide audience adoption. And an agent is already integrated to default sessions in most Linux distros and MacOS. To that note"," I\'ve once more merged the current mosh master branch to my agent forwarding enabled version of mosh at url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,195,2012-04-10 17:24:31,471.85,,,1,"b""b' @keithw Ok thank for your reply and clarification. I will try Guardian Agent!  @rinne I will checkout your branch"," looks like the good commit to watch is @dfa183d'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,196,2012-04-10 17:24:31,75.63,,,1,"b'b"" @keithw appreciate all the work you and your team put into mosh and Guardian Agent. I think it\'s great that there\'s a more secure option for agent forwarding. However", I agree with @rinne that wide adoption is rather unlikely, at least in the short term.  Now that there\'s a supposedly better solution for agent forwarding, I think mosh should also add support for the builtin agent forwarding," and let the users decide which one they want to use. I think it\'s detrimental to mosh to not merge #696. Clearly there is a lot of interest and support for that feature. Let the users decide which alternatives they prefer.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,197,2012-04-10 17:24:31,377.9,,1,,"b""b' I would like this feature", too, but a <30 second workaround for connecting to a remote server and then accessing github is to just generate a new ssh key and add it to github, e.g., hit return several times copy it," go here: url  paste'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,198,2012-04-10 17:24:31,89.08,,1,,"b'b"" From the README: IMO", this is a pretty strong signal that we should *not* use Guardian Agent for security-conscious environments, which are precisely the ones where we\'d prefer agent forwarding over simply storing a key on the remote host.  I appreciate the desire to avoid the issues associated with agent forwarding, but until Guardian Agent is considered stable and secure," I don\'t think it\'s a viable alternative.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,199,2012-04-10 17:24:31,234.57,,,1,"b'b"" :-) We had a pretty similar disclaimer for the first few years of Mosh", and the results speak for themselves. There\'s no point in boasting about security before we have a track record. But I think the idea is that if you all try Guardian Agent and the feedback is good," we\'ll integrate it more tightly into Mosh. That sort of solves the problem of adoption.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,200,2012-04-10 17:24:31,4.15,,,1,"b'b"" In general", I know it\'s frustrating to have a PR sitting around and not get merged, but it\'s not just a question of the implementation -we really don\'t want to complicate the protocol in a way that we then have to support forever going forward (especially by bolting it into the object that gets synchronized by SSP, which is unfortunately a bit of a kludge -not Timo\'s fault, it\'s just that SSP is not very good at this use case).  If you look at where the security holes come from in OpenSSH and OpenSSL," it\'s largely from added complexity that wasn\'t _really_ necessary. **Mosh has never had a significant security hole** (yet -knock on wood) and I don\'t think that\'s entirely luck -it also comes from saying no to things that add complexity to the protocol in a way that makes it harder to reason about.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,201,2012-04-10 17:24:31,777.7,1,,,"b'b"" @keithw", just please mark the protobuf message numbers used in agent forwarding patch as reserved in upstream master, so they are not accidentally recycled later. Apart from that," I\'m pretty much beyond caring.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,202,2012-04-10 17:24:31,979.4,,1,,"b""b' Sounds pretty reasonable -you want Mosh to keep tag 8 (your  ) reserved in TransportBuffers::Instruction?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,203,2012-04-10 17:24:31,76.47,,1,,"b'b\' @keithw ""Sounds pretty reasonable -you want Mosh to keep tag 8 (your oob) reserved in TransportBuffers::Instruction?""  Yes", please. As far as I understand, that should be enough to never break interoperability with agent enabled client vs non-enabled server and vice versa.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,204,2012-04-10 17:24:31,1026.92,,1,,"b""b' +1 add agent forwarding'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,205,2012-04-10 17:24:31,1376.3,1,,,"b'b"" This discussion is a bit ridiculous. It\'s true that enabling ssh-agent (without confirmation) is a security risk and could be considered bad practice. But tons of people are doing it", using it and without it, mosh is usable just for their IRC screen hosts (like me). To install it in an enterprise and use it to manage your servers, you usually _need_ ssh-agent support because sooner or later you\'ll hit a script that needs it (for git, automation, whatever).  mosh is either a supposed SSH replacement intended for use instead of SSH everywhere possible (in which case it will need to support all the silly stuff as well) or it is just a wrapper that makes roaming easier for few hosts (in which case you might argue improving security is a thing). I say let the users decide. I believe mosh security is on-par if not better than SSH with all it\'s legacy bloat," which should be one more reason to make it possible for people to actually use it as SSH replacement = ssh-agent is a prerequisite of that (and for the record I believe port forwarding as well) ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,206,2012-04-10 17:24:31,11.53,,,1,b'b\' Hi folks -I\\\'m going to lock the conversation here because it doesn\\\'t seem to be productive anymore. We are not making the protocol changes proposed in Timo Rinne\\\'s pull request, for the reasons we\\\'ve explained earlier here: we really don\\\'t want to complicate the protocol in a way that we then have to support forever going forward (especially by bolting it into the object that gets synchronized by SSP, which is unfortunately a bit of a kludge -not Timo\\\'s fault, it\\\'s just that SSP is not very good at this use case).  If you look at where the security holes come from in OpenSSH and OpenSSL, it\\\'s largely from added complexity that wasn\\\'t really necessary. Mosh has never had a significant security hole (yet -knock on wood) and I don\\\'t think that\\\'s entirely luck -it also comes from saying no to things that add complexity to the protocol in a way that makes it harder to reason about.  If you want ssh-agent forwarding with Mosh, please use Guardian Agent and provide feedback if you have it: url It works and I use it every day! If feedback is good, we may consider integrating Guardian Agent more closely into a future version of Mosh. It\\\'s true that Guardian Agent is newer and less-tested software, but, so was Mosh when it was younger. The only way it will be more-tested is if more people use it. And," we think it is a lot more secure than ""uncontrolled"" ssh-agent forwarding.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,closed,2018-09-03 05:58:41,822.08,26,131,51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,120,closed,-,-,-,26,131,51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,opened,2012-04-10 18:30:06,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,title,2012-04-10 18:30:06,00:00,,1,,"b""b' mosh prevents the use of scrollback'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,body,2012-04-10 18:30:06,00:00,1,,,"b'b"" If I use mosh to connect", and then run a command with a lot of output, e.g. ps, my scrollback buffer doesn\'t get any of the overflow. This is sad-making -I don\'t always know when a command will produce a lot of output, and, additionally," I like scrollback for seeing previous commands\' output.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,1,2012-04-10 18:30:06,7.9,,,1,b'b\' Thanks. The\\\'re a compromise here between skipping frames for speedy terminal support and wanting to have everything sent to the local terminal," and mosh picks a particular (not necessarily perfect) point on that spectrum. The workaround for now is to run ""screen"" or ""tmux"" on the remote end and use that for scrollback.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,closed,2012-04-10 18:38:00,7.9,1,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,2,2012-04-10 18:30:06,166.02,,1,,"b'b"" I realise this is a closed issue", but not seeing all the output of a command is a real blocker for me. If I run a command I need to see all the output," having to load up screen or tmux with it\'s non-native scroll support doesn\'t really work. Is there no way we could set an option for not discarding all the output?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,3,2012-04-10 18:30:06,3.98,,1,,b'b\' I understand why this is closed -mosh doesn\\\'t actually send the stream to the client," so dumping all but the last screen is correct behavior. I would love an option to have an extended ""screen"" which included X lines of scrollback", but that\\\'s more of a feature request, and is hard.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,4,2012-04-10 18:30:06,17.55,,,1,"b""b' We are working on this for mosh 1.3 and will try to do the most pleasant thing possible. You can follow this issue at #2.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,5,2012-04-10 18:30:06,332.8,1,,,"b'b"" Without seeing the output", I don\'t know what my command did.  This is completely unacceptable," especially without any warning.  I will not use mosh again.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,6,2012-04-10 18:30:06,1000.27,,1,,"b""b' Since #2 is now closed", and this issue was not affected," can this possibly be reopened?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,reopened,2013-04-23 22:58:35,260.58,2,4,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,7,2012-04-10 18:30:06,1077.37,,1,,"b""b' +1 for such functionality'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,8,2012-04-10 18:30:06,1095.35,1,,,"b'b"" It\'s been about a year now that I have my eye on mosh waiting for this feature to be implemented. I think mosh could become an essential tool -but not until this works. Let\'s face it: without scrollback it\'s pretty useless in the real world (except when you are trapped in a lift maybe).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,9,2012-04-10 18:30:06,864.02,1,,,"b'b"" Scrollback is essential in everyday use. I was about to make mosh my primary tool for remote work but as I discovered this flaw I\'m back to ssh. I might consider getting back to mosh when working in extremely poor networking conditions but giving up scrollback for the possibility of having single ssh session at work"," commuting and at home is not an option.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,10,2012-04-10 18:30:06,1363.6,,,1,"b'b"" I just noticed this as an issue"," but using gnu-screen isn\'t a big deal for me. Maybe I\'ll look into tmux or something too. Some resources for those of you not familiar. Getting multiple windows out of one SSH session is a pretty good feature anyway for those of you not using it. url url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,11,2012-04-10 18:30:06,20.08,,1,,"b""b' Another +1", the lack of scrollback is a usability issue for me. I realize this feature is probably a lot of work, but it would really improve my life, let me use mosh in more cases," and probably solve world hunger.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,12,2012-04-10 18:30:06,484.92,,,1,"b""b' +1I can make do with the workaround but this would be great.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,13,2012-04-10 18:30:06,158.83,1,,,"b'b\' +1 This ""feature"" is a major blocker. If I have to run screen myself", honestly, there\\\'s little value in mosh as screen already solves the dropped connection issue and I can resume where I left without all the negatives like high latency and weird cursor behavior.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,14,2012-04-10 18:30:06,149.82,,1,,"b""b' I guess that the scrollback does not need to be as fast as the actual terminal"," so might cache on the server and then slowly stream to the client that would catch up eventually.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,15,2012-04-10 18:30:06,711.72,1,,,"b""b' +1 I find the lack of scroll back to be pretty unacceptable as well. '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,16,2012-04-10 18:30:06,721.12,,,1,"b""b' no backscroll"," hulk SMASH!!!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,17,2012-04-10 18:30:06,139.35,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,18,2012-04-10 18:30:06,509.98,,1,,"b""b' +1 This issue is also preventing me from using mosh 100% of the time. Do any  programs exist with APIs to deal with native scrolling? Perhaps something to get the ball rolling in this case would be a proof of concept for an easy client"," instead of searching for the general solution for every shell'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,19,2012-04-10 18:30:06,40.92,,,1,"b'b"" Just to add one more voice to this stream of lament"," I will happily use mosh once this feature is added. It doesn\'t really work for me in this state.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,20,2012-04-10 18:30:06,1342.65,1,,,"b""b' Scrollback is a major feature and without it mosh will not be fully functional tool. I understand limitations but this should be configurable for user. Sorry"," I have to back to ssh for now.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,21,2012-04-10 18:30:06,89.97,,1,,"b""b' +1Adding to the chorus. '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,22,2012-04-10 18:30:06,82.68,,1,,"b""b' +1me too (especially that it should be configurable. eg maybe not necessary on a phone"," but essential on a linux box in  my eyes)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,23,2012-04-10 18:30:06,1304.37,,1,,"b'b"" +1Without scrollback feature", the mosh session doesn\'t really feel persistant, the workaround of tmux and screen is really very very inconvenient in some cases, like now I am using mobile phone to connect. You can simply scrollback by swipe if the feature is there," but using hot-keys like ctrl-a [ make the an mental interruption in the workflow. ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,24,2012-04-10 18:30:06,1209.5,,,1,"b""b' Any news on this? Native scrollback (ie swipe in Mac OS X Terminal) is essential for an efficient workflow. Please consider making this feature a priority! Thank you.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,25,2012-04-10 18:30:06,56.13,1,,,"b""b' Even if this is implemented", you\\xe2\\x80\\x99re most likely not going to get _native_ scrollback. Native scrollback would require sending all the scrollback data to the local terminal in sequential order, which would totally erase Mosh\\xe2\\x80\\x99s features of graceful packet loss handling and working Control-C. If you don\\xe2\\x80\\x99t want Mosh\\xe2\\x80\\x99s features, you might as well just use SSH. The plans we\\xe2\\x80\\x99ve discussed (see #2) involve adding new Mosh-specific key bindings to access a dynamically loaded _server-side_ scrollback buffer, similar to what you can already achieve by running inside of Mosh. As far as I\\xe2\\x80\\x99m aware," no code has been written (and repeating \\xe2\\x80\\x9c+1\\xe2\\x80\\x9d over and over isn\\xe2\\x80\\x99t going to magically cause code to become written).'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,26,2012-04-10 18:30:06,127.72,1,,,"b'b"" @andersk Thank you for the update. Sorry about native scrollback", I didn\'t think that through before posting. I just started using Mosh, and the only thing I care about is being able to survive network roaming. Anyway," thanks.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,27,2012-04-10 18:30:06,1162.3,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,28,2012-04-10 18:30:06,1285.4,1,,,"b'b"" My proposal is to run a screen on the client side", mosh inside that screen,then screen again on the server side. to suit. Then you get scrollback on the client side, at least for apps that don\'tuse the alternate screen. That might seem ugly," but I already nest multiple screens anyways :)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,29,2012-04-10 18:30:06,173.03,,1,,"b'b"" Or spoof the client screen size has 3x (configurable?) the actual height and just display a window of that so that the client can then scroll freely within that. Not sure if mosh actually works this way. I tried digging into the source but didn\'t get very far.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,30,2012-04-10 18:30:06,1108.88,,,1,"b'b\' @ViViDboarder: I like your idea of the spoofed client screen size.  The default value could be ""spoofed size""=""actual size"""," so that users who don\\\'t care about scrollback can enjoy mosh as it is today.  The users who do care about scrollback can set ""spoofed size""=3 x ""actual size""", and can use native scrollback. Both groups of users happy.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,31,2012-04-10 18:30:06,1331.72,,,1,"b'b"" I started using mosh recently and now this problem (combined with the problem of detached sessions) is bothering me a lot. If terminal multiplexers like  ",  , , yada, yada, are to be recommended as alternative on server side then why should one even bother using mosh? Just for rapid echo and volatile connections? No, thanks! Those terminal multiplexers have been doing the job quite well for years. That being said," I don\'t see any real advantage of using mosh at the time until the critical problems are fixed  things improved.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,32,2012-04-10 18:30:06,77.62,,,1,"b""b' @bassu", I started reading your comment recently but I realized that my hunger is bothering me a lot. If existing sandwiches like [peanut butter & jelly]url  [BLT]url  and [corned beef]url  are to be recommended as alternative on lunch plate side then why should one even bother reading your comment? Just to hear the software I helped develop insulted by someone on the internet? No," thanks! I can\\xe2\\x80\\x99t imagine what you hope to accomplish by telling the developers that their software is useless.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,33,2012-04-10 18:30:06,83.85,,1,,"b'b"" @andersk I did not say or mean to say that the software is useless. It certainly has the reasons for its creators to develop it and may be the consumers too. All I meant was", I don\'t find it befitting for myself in the situations I mentioned and some people would agree. But as the makers of software," you should be open to all sort of feedback including negative critics. You probably should not make anything if you are not wanting to see any sort of feedback or a review at all!""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,34,2012-04-10 18:30:06,1320.47,,1,,"b'b"" won\'t a spoofed client window size break other things"," like emacs and vi?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,35,2012-04-10 18:30:06,1355.67,,1,,"b'b"" It\'s only when you\'re not used to using  on the remote end thatlack of local scrollback becomes an issue.  Of course", one of the mainreasons for using  was the constant need to reconnect, whichwith mosh goes away, thus drawing in more users," so I can see that localscrollback now becomes more valuable for users who aren\'t accustomed tousing ...""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,36,2012-04-10 18:30:06,1236.25,,,1,"b'b"" @dwiel that\'s a good point... That said"," it could be an option. On my phone I\'d probably not be using applications like that and scrolling would be more useful since the screen is small. On my desktop I\'d turn off size spoofing and just use Tmux.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,37,2012-04-10 18:30:06,1255.78,,1,,"b""b' yeah for sure", if its an easy option that helps in some cases, and someoneis willing to implement it, why not On Thu, Feb 6, 2014 at 11:35 AM," Ian notifications@ wrote:'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,38,2012-04-10 18:30:06,1356.42,,,1,"b""b' If only there were ample options for diverting output and paging text in unix-like operating systems!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,39,2012-04-10 18:30:06,1377.87,1,,,"b""b' This is an anti-feature. You _should_ be using tmux or screen anyway. If you think that using mosh should obliviate your need for a screen multiplexer _then you do not understand the purpose of any of these tools_"," please just use [autossh]url  it will most likely do everything the way you expect.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,40,2012-04-10 18:30:06,1321.25,,,1,"b'b"" In case someone may have not known", a while ago Mosh team released an interesting document named \'Mosh 2014 Ideas list\', in which they described their design to solve the scrollback issue. I pretty much like the solution (something like a very mini part of tmux," just to scrollback) and I think that is the right direction. Now just wait some great contributors to implement it. This IS a feature by the way.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,41,2012-04-10 18:30:06,40.02,,1,,"b""b' Yes"," a minimal local  just for scrollback seems like the rightapproach.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,42,2012-04-10 18:30:06,120.18,1,,,"b'b"" It sounds as if different users come to Mosh for different reasons", trying to satisfy different itches. @andersk (and others since)I don\'t want **those** Mosh features, but that\'s not all that Mosh brings to the table. I frequently wander at work (a multi-building campus spanning a small city) and in the evening I close my laptop and lock it in a drawer (or take it home).  When I do work from home I have a reasonable (not FIOS) broadband connection through a VPN and latency isn\'t that bad).  I don\'t do serious work on my iOS devices and I don\'t try to ssh into remote systems on BART or the bus or the ski lift. It is **revolutionary**, **mind blowing**, and **totally enabling** to be able to flip open the laptop and pick up where I left off.  No lost context, things that were going are still going, etc.... [Autossh]url  doesn\'t seem to give me persistent connections, so it doesn\'t help me (reconnecting is easy, the lost context is the part that makes me sad).  Maybe there\'s an ssh configuration that would give me what I need, suggestions and pointers would be welcome.  the roaming seems to be particularly problematic. [Screen]url  and [tmux]url  are both trying to do a couple of things:  helping me maintain all of my work in progress given intermittent connectivity and providing a simplistic windowing system. That windowing system isn\'t interesting to me; I know that some people use [tmux]url  to [free themselves from the tyranny of the mouse]url  but if tmux weren\'t maintaining my session for me I\'d never give it another look.  I don\'t want to cram my work into a set of tiled ascii windows.  So far the best system I\'ve found uses tmux and iTerm\'s built in integration.  It\'s far from seamless though. None of those tools give me the persistent session management and roaming that Mosh offers and **I want it**.  I don\'t think that I have any particular right to have it, and I certainly don\'t think that the Mosh developers owe it to me, but **it would be really useful**. I\'d love to see a Mosh that got completely out of the terminal emulator business, one that used all of it\'s magic to maintain a synchronized image of the byte stream using unprivileged components.  Either side would be free to throw away anything that both agree has been synched so there wouldn\'t be that much garbage hanging around, predictive typeahead could still be useful when things were slow (if it\'s still feasible), and native scrollback would work.  And persistent connections. **yay**.  I could reconnect and what ever was written out to my screen would be there waiting for me, ready to scroll back and read as required. For my use case, calling the control-c thing a Mosh feature is almost disingenuous: if I were being sassy I\'d say that they\'ve chosen to model a terminal screen to show off their diff-based approach and it has the side-effect that if you mistakenly generate a bunch of output you can kill it with a control-c.  That doesn\'t solve a problem that I actually have (see below) and unfortunately when I do _intentionally_ generate output," I\'m [SOL]url  Not everybody has your^H^H^H^Hmy use case.  But not everyone has mine^H^H^H^Hyours either. g.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,43,2012-04-10 18:30:06,144.83,,,1,"b""b' @hartzell", it\\xe2\\x80\\x99s not that your desires are invalid (for the most part, although predictive typeahead cannot work without Mosh having full control over the terminal state). But surely you understand that we can\\xe2\\x80\\x99t just abandon all these features that our existing users rely on in order to satisfy your new use case. What you\\xe2\\x80\\x99re describing is so different from Mosh that it would probably end up being a separate software package, so it isn\\xe2\\x80\\x99t really relevant to this issue. And either way, the code isn\\xe2\\x80\\x99t going to write itself. Let\\xe2\\x80\\x99s try to keep this issue on topic, please. As we\\xe2\\x80\\x99ve said before, the developers are absolutely interested in a scrollback feature; we don\\xe2\\x80\\x99t need to have arguments about that. What we need is either enough spare time to sit down and implement it," or a well-designed pull request from an outside contributor.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,44,2012-04-10 18:30:06,185.53,,,1,"b'b"" I appreciate the effort that all y\'all are putting into Mosh and don\'t mean to distract. Just wanted to highlight that Mosh represents **several** really useful advances. I\'d be curious how many people think Mosh\'s killer-est feature is being able to work on Caltrain and how many think it\'s being able to pick up where they left off.  Unfortunately one seems to get in the way of a bomber implementation of the other. I\'m not asking for a poll though", Mosh has what it has," it\'s clearly a big win for its community and you have a plan to make it better.  That rocks.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,45,2012-04-10 18:30:06,205.52,,1,,"b'b"" I find the type ahead prediction lovely but disturbing too: really", youcan\'t predict what my $EDITOR will do, so why try?  I\'d settle for a statusline showing as-yet unacknowledged keystrokes.  Of course, there\'s stillthe redraw-by-diffs business," so mosh can\'t get entirely out of theterminal emulation business. ## Nico""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,46,2012-04-10 18:30:06,382.38,,,1,"b""b' We\\xe2\\x80\\x99re still way off topic here (did you know we have an IRC channel", [  on Freenode]url  It\\xe2\\x80\\x99s true!), but:I think there\\xe2\\x80\\x99s plenty of room for Mosh to become a great solution for all these use cases, especially in a future where we can get integration with local terminal clients (although that\\xe2\\x80\\x99s very hypothetical for now).Mosh is surprisingly good at predicting what will do, at least when you\\xe2\\x80\\x99re typing text rather than running commands, and it shuts prediction off when it notices it\\xe2\\x80\\x99s started being wrong. If it\\xe2\\x80\\x99s working poorly, feel free to report bugs.If you\\xe2\\x80\\x99re just not a fan of prediction, we do have ( ) to turn it off; see the man page for other options.Without being in the terminal emulation business, Mosh basically couldn\\xe2\\x80\\x99t draw _anything_ extra," because it needs to be able to undo it later.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,47,2012-04-10 18:30:06,471.22,1,,,"b'b"" Still OT", sorry, but I struggled with issues similar to the people in this thread that I\'ve been following hoping for a solution. So here is mine: it has permanent sessions, native scrollback," and all the mosh benefits. url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,48,2012-04-10 18:30:06,91.3,,1,,"b""b' not sure why this issue was closed. is this solved? '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,49,2012-04-10 18:30:06,1368.45,,1,,"b""b' Here is my +1 if this makes any difference....'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,50,2012-04-10 18:30:06,1390.85,,1,,"b'b"" Someone contributing code would probably make a difference :wink: But to be honest", I don\'t see the point of implementing this in mosh if you want native client-side scrolling you might (as it\'s been said) basically just use  or tmux to get  (nearly) the same behavior. If you want server-side scrolling, you can already have it today by using  on the server," so I don\'t think it makes sense to duplicate that feature in mosh.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,51,2012-04-10 18:30:06,1409.87,,,1,b'b\' Within xfce4-terminal a  mosh user@ no-init keeps scrolling as it is and I see everything, even the output I had before invoking mosh.  But yes," this works only if the output is generated line by line and not in a huge chunk; e.g. (quite useless command)  while read l; do echo ""$l""; sleep 0.01; done < <(ls -alsR /etc) For me this works fine and if commands produce big chunks of text in short time (and mosh cut them)", I can either pipe to $PAGER or send it to a file.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,52,2012-04-10 18:30:06,1305.17,1,,,"b""b' Mhh :/ Hope it will ever be implemented +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,53,2012-04-10 18:30:06,312.67,,1,,"b'b"" My understanding is that mosh starts dropping output when it sees that the client end can\'t keep up. That results in an incomplete native scroll buffer on the client end. Could it be as simple as adding a flag to disable this output dropping feature? no-drop?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,54,2012-04-10 18:30:06,737.73,,1,,"b""b' @scottj97 No. There\\xe2\\x80\\x99s no block of code somewhere that implements an \\xe2\\x80\\x9coutput dropping feature\\xe2\\x80\\x9d to be disabled. Output dropping is an emergent property of the [Mosh design]url  and protocol. Enabling reliable scrollback will require substantial changes to both.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,55,2012-04-10 18:30:06,321.8,,1,,"b""b' very much +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,56,2012-04-10 18:30:06,842.57,,,1,"b'b"" I\'d love to have this feature. I\'ll be ready to pay for that. Why not create a bounty for it ?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,57,2012-04-10 18:30:06,715.1,,,1,"b'b\' It sounds like most would be happy without ""complete native scrollback"" but rather", say, 3x or some configurable ratio of the current screen\\\'s height. But it sounds like mosh couldn\\\'t do this without communicating the false 3x height to apps like vi and emacs, thus ruining their full-screen UI. There\\\'s no way to tell the server that the screen is 24 rows while actually syncing 72 rows. Is that right?\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,58,2012-04-10 18:30:06,53.95,,1,,"b'b"" Correct. The emulated terminal\'s window size must be the same as that displayed for full screen apps to work well. The way scroll back is usually implemented is that an emulator maintains a separate buffer of rows for scroll back. When cursor motion pushes text off the window it\'s copied into the scroll back buffer.  So the size doesn\'t matter much for implementation. But on Mosh", we have to do that on the server side and then find some way to display it on client, either in band from the remote server (but  do this well already) or out of band, on the local client, with an extension to the protocol (big task," and it still wouldn\'t get native-like scroll back in your outer GUI terminal emulator).  It\'s not an  issue to solve.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,59,2012-04-10 18:30:06,1342.1,,,1,"b""b' Though not really a perfect solution", but using helps me scrollback.  Using the default bindings for  :  . Execute to enter into [copy / block selection]url  mode. . Use mouse scroll,"  or  /  to scroll.  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,60,2012-04-10 18:30:06,76.67,,1,,"b""b' If you are willing to sacrifice type prediction"," you can use Eternal Terminal.  ET keeps your connection alive and supports native scrollback: url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,61,2012-04-10 18:30:06,1329.47,,,1,"b""b' url  may be of interest'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,62,2012-04-10 18:30:06,1103.48,,1,,"b""b'  it will ever be implemented +100500'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,63,2012-04-10 18:30:06,229.38,,1,,"b""b' Guessing this is still not resolved...'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,64,2012-04-10 18:30:06,1192.37,,1,,"b""b' +1"," I think people would even like a bounty for this'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,65,2012-04-10 18:30:06,1238.38,,,1,"b""b' how about having a mosh option to automatically start screen or tmux... this would allow both the mosh features and the  scrollback!  I think most people really miss the scrollback", but always forget to start screen or tmux ... if mosh could do that automatically," the problem is solved'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,66,2012-04-10 18:30:06,41.28,,1,,"b'b"" @danielmotaleite mosh doesn\'t need to support that.  You can do it yourself.  I\'ve achieved the same for years with the following for in ~/.profile  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,67,2012-04-10 18:30:06,1346.15,,1,,"b""b' +large-number. This is a dealbreaker.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,68,2012-04-10 18:30:06,66.35,,1,,b'b\' I appreciate all the hard work on mosh," but the ""workaround"" is simply not good enough.  No one has mentioned it", but I find it hard to believe that I\\\'m the only one whose use-case is as follows:  Start a **single** tmux session on one host," per activity (""session"" and ""activity"" to me are synonymous)"," and then use mosh within various tmux panes to remote into other machines.  This is much cleaner and more organized than moshing into each machine and then starting a tmux session on each one. More importantly doing the latter breaks the abstraction of an ""activity"" for me; yet the former is problematic because then I either have to deal with the missing scrollback in each of the mosh panes", or I have to nest a tmux session in each pane. Nesting, of course causes many larger issues and is to be avoided...\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,69,2012-04-10 18:30:06,792.92,1,,,"b""b' I believe I have read most of the 67 previous comment I appreciate this issue is still open so that mosh can gracefully manage packet loss handling and have an always working Control-C. However I have not seen the following proposal: could I choose how many lines mosh actually returns to my terminal upon completion of the command? Or is that not possible without the terminal app allowing to change the terminal history?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,70,2012-04-10 18:30:06,957.85,,1,,"b'b"" I rebased patch from @4ast on v1.3.2 (see last two commits on url @andersk if I take time to make it an option that must be enabled on the client side", would this be something that could be accepted eventually?  At this point, I\'m just asking if it is worth I spend time on it (if yes," i take any advices ;))""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,71,2012-04-10 18:30:06,589.02,,1,,"b'b"" @rledisez even if you have to fork mosh"," you will still have users. I can\'t use eternalTCP because I need UDP support. ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,72,2012-04-10 18:30:06,276.85,,1,,"b""b' +1 scrollback'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,73,2012-04-10 18:30:06,1001.0,,,1,"b""b' please give us scrollback. pleaseeeeee.....'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,74,2012-04-10 18:30:06,1200.08,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,75,2012-04-10 18:30:06,109.25,,1,,"b'b"" I can\'t believe this has dragged on for 6 years", at this point, and still nowhere near the answer.... also, unrelated to this specific issue," but there\'s no way to even just disable all of the history-stuff? why not?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,76,2012-04-10 18:30:06,125.47,,1,,"b'b"" @rledisez does scrollback work in your branch? if there\'s anything missing just point me in the right direction and I\'ll try to get it working.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,77,2012-04-10 18:30:06,471.52,,1,,"b'b"" +1 Scrollback needed. Screen or tmux are effective", I imagine," but I don\'t think I\'d make the switch without this being native. I just don\'t like have to run extra programs every time I login. I have too many sessions for that.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,78,2012-04-10 18:30:06,1018.4,,1,,"b'b\'  How about one tmux session per machine? You can create new ""windows"" within tmux", or split the view.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,79,2012-04-10 18:30:06,37.08,,,1,"b'b"" I\'m trying out @rledisez\'s branch and", although type prediction isn\'t available," native scrollback works beautifully. ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,80,2012-04-10 18:30:06,756.03,,1,,"b""b' @rledisez As it looks like native scrollback is working in your branch. Can we expect it to come in master branch?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,81,2012-04-10 18:30:06,518.45,,1,,"b'b"" Why there aren\'t any feedback from the maintainers? This issue has been opened for almost 6.5 years", and someone has made a patch.  Whether merge it or not," plz give us some response ;) I\'m hoping this will be resolve before its 7th anniversary.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,82,2012-04-10 18:30:06,838.98,,1,,"b""b' +The weight of the world.  To use together with mosh can solve this problem by adding in file.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,83,2012-04-10 18:30:06,73.93,,1,,"b'b"" >I\'m hoping this will be resolve before its 7th anniversary.  Nope. And by the looks of it one should not hold their breath even for 10th.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,84,2012-04-10 18:30:06,577.8,1,,,"b""b' sad'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,122,open,-,-,-,16,46,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,133,closed,opened,2012-04-11 04:05:22,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,133,closed,title,2012-04-11 04:05:22,00:00,,1,,"b'b"" mosh doesn\'t support 16-color escapes""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,133,closed,body,2012-04-11 04:05:22,00:00,,1,,"b'b"" Mosh doesn\'t appear to be passing through all ANSI codes. ./termemuprintf \'\\\\e[91mO\\\\n\' Expected output: a red OActual output: a default colored O""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,133,closed,1,2012-04-11 04:05:22,5.02,,,1,"b'b"" HI Edward! xterm-256color", and thus mosh, don\'t advertise or support the 88-color escape sequences. If you want more than the 8 system colors with mosh, you\'ll have to use the 256-color escape sequences instead. (And make sure to run mosh in a TERM that advertises 256 colors," like xterm-256color or screen-256color-bce.) Remember that mosh is kind of like GNU screen or tmux -it interprets the input sequences and renders them itself and then outputs them to the user at an appropriate frame rate. So we do have to interpret the input in a sane way.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,133,closed,closed,2012-04-11 04:10:23,5.02,0,2,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,133,closed,2,2012-04-11 04:05:22,5.6,,1,,"b""b'  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,133,closed,reopened,2012-04-11 04:18:35,8.2,0,3,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,133,closed,3,2012-04-11 04:05:22,2.67,,,1,"b""b' Hmm", I stand corrected," as these are the 16-color escapes. We will support these in a future release. Thanks for reporting.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,133,closed,closed,2012-04-11 07:12:42,174.12,0,3,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,133,closed,-,-,-,0,3,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,opened,2012-04-11 07:49:28,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,title,2012-04-11 07:49:28,00:00,,1,,"b""b' Mosh changes the terminal window title'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,body,2012-04-11 07:49:28,00:00,,,1,"b'b\' Mosh currently prefixes the terminal\\\'s window title with ""[mosh]"". I find this unnecessary and", frankly," a bit annoying. I don\\\'t care what the underlying connection uses and I can\\\'t see any other reason of why you\\\'d want that there \\xe2\\x80\\x94 just like I wouldn\\\'t like to see ""[ssh]"" for SSH connections. [ mosh is awesome! thanks! ]\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,1,2012-04-11 07:49:28,46.77,,1,,b'b\' Actually," I was intending to comment that not only does mosh unnecessarily pollute both the xterm window title and icon name with ""[mosh]"" but it doesn\\\'t support the or sequences to change the title.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,2,2012-04-11 07:49:28,387.27,1,,,"b'b\' I find this annoying too. For some reason the terminal title does\\\'t change for me after program which changed it is closed or new program starts. Usually the program which causes this for me is Vim and I currently have WeeChat in tmux in terminal entitled ""Thanks for flying with Vim"".\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,3,2012-04-11 07:49:28,209.28,,1,,"b""b' We will fix the OSC 2 issue. How would you feel if we just made a MOSH_TITLE_PREFIX environment variable that allowed you to set it as the empty string? Would that satisfy the objections? (Informally", more people seem to prefer the explicit signalling," but the notion that mosh should be as transparent as possible is also well-taken.)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,4,2012-04-11 07:49:28,261.23,,1,,"b'b"" I\'d accept a MOSH_TITLE_PREFIX environment variable or similar""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,5,2012-04-11 07:49:28,3.08,,1,,"b'b"" To be honest"," I\'d prefer it if mosh stayed out of its way and didn\'t put anything in the title by default...""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,6,2012-04-11 07:49:28,422.22,,1,,"b""b' OSC 2 is implemented in d0a818d2e"," which also respects a MOSH_TITLE_NOPREFIX environment variable.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,closed,2012-04-14 05:59:19,1329.85,1,6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,7,2012-04-11 07:49:28,6.83,,1,,"b""b' Am curious how this will look on the Mac "," which I think does display the icon title all the time.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,8,2012-04-11 07:49:28,1188.27,,1,,b'b\' @keithw In practice," the way it looks in terminal applications that display the title all of the time is that you have a bunch of tabs that all have ""[mosh] "" and either nothing else on them", or nothing much else useful on them, because a bunch of room was wasted by the prefix. :( I would love to understand the informal explanations from people as to why they prefer knowing that a terminal is using [mosh], as opposed to screen, tmux, raw ssh, etc.: it seems like information that has better ways of being presented, or is information that would be implicit.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,9,2012-04-11 07:49:28,12.12,1,,,b'b\' I think the reason I did this initially was because I wasn\\\'t used to the idea that I would un-suspend my laptop and have shells there that were live connections to other machines, so I put the [mosh] in as a sort of reminder, or else I was liable to mistake it for a local shell. It\\\'s also a reminder that this this window is coming over the network," and the Ctrl-^ . sequence is in effect for killing the connection. I don\\\'t feel that strongly about it if the bulk of opinion is that it should be off by default. Does anybody like the ""[mosh]"" or should we make it off-by-default for version 1.2?\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,10,2012-04-11 07:49:28,160.92,,1,,"b""b' I would definitely prefer off by default. '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,11,2012-04-11 07:49:28,456.08,,1,,"b'b"" Agreed. In iTerm2"," using mosh just wipes out the current title when MOSH_TITLE_NOPREFIX is set.I\'d highly prefer it would not touch it at all.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,12,2012-04-11 07:49:28,732.35,,1,,"b""b' :+1: '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,13,2012-04-11 07:49:28,122.22,1,,,"b'b"" It\'s a shame this issue is closed"," since mosh still  the window title.  I am looking for some way to prevent it from doing anything to the title.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,14,2012-04-11 07:49:28,1144.73,,1,,"b'b""   works for me on Linux. Have you tried a recent version of mosh? I can\'t imagine how mosh would behave that way -it\'s sending a tiny string to set the title"," which should be the same in all terminals. There shouldn\'t be multiple codepaths for that... unless iTerm2 has a special way of setting the title.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,15,2012-04-11 07:49:28,150.93,,1,,"b'b\' I\\\'m using MOSH_TITLE_NOPREFIX=1 and mosh version 1.2.3. The window title matters to me because I\\\'m using a hacky trick to ""run or raise"" my window"," in i3 window manager. Here\\\'s a command I can use to log into a machine named ""pegasus"" via ssh: Then I use xwininfo to see the title of this window is ""pegasus"" because I passed that to urxvt: Here\\\'s a really similar command", using mosh instead of ssh... And here\\\'s the xwininfo for the resulting window...  \'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,16,2012-04-11 07:49:28,2.3,,1,,"b""b' What I wanted to say in my previous comment is that I want mosh to leave the window title alone.  I told urxvt how to set the title.  Mosh deletes the title after it connects.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,17,2012-04-11 07:49:28,9.7,,1,,"b""b' +1 to what @dncohen said'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,18,2012-04-11 07:49:28,64.02,1,,,"b'b"" Oh", snap," you\'re right. It blanks it out after you connect. That sucks. :(""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,19,2012-04-11 07:49:28,674.85,,1,,"b'b"" Yep", that\'s what happen on iTerm2 too. Removing the whole section in solves this. I think two behaviors could be useful:do not ever touch the window  name, so add in front of the condition  .change the title to or maybe just  ," and _restore it to the initial title when exiting_.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,20,2012-04-11 07:49:28,379.3,,1,,"b'b"" This issue is closed.  I\'m not sure keithw is seeing any of these recent comments.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,21,2012-04-11 07:49:28,151.18,,1,,"b""b' I see the comments. Something we could try to do would be to special-case the synchronization logic so we only set the title when it changes", not any time that the receiving terminal is in an unknown state. In general, though," we want to control everything about the terminal state so we can make sure the server and client terminals are in sync.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,22,2012-04-11 07:49:28,457.48,,1,,"b'b\' mosh also appears unique in not supporting the ""\\\\033];title\\\\007"" OSC syntax.Other terminals appear to interpret it the same as ""\\\\033]0;title\\\\007"" (which mosh does understand).\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,23,2012-04-11 07:49:28,6.95,,1,,"b""b' sqweek: Hmm", I would take a patch to make the OSC parameter default to 0 if you want to submit one. I would also take a patch that makes us remember whether the title has ever been set by the application," and only sets it downstream if it has ever been set to something. I think this would solve the issue brought up on this thread.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,24,2012-04-11 07:49:28,520.68,1,,,"b'b"" [Done]url  and [done]url  Sorry the first diff is annoying to review", I couldn\'t see how the new logic would fit nicely and before I realised I had rewritten the whole thing xD I hope I matched the code style properly," my editor of choice (acme) doesn\'t cope very well with mixed tabs and spaces. Do you want me to make a pull request or will you take it from here?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,25,2012-04-11 07:49:28,194.57,,,1,"b'b"" Thanks very much! Pull request would be great because then I won\'t forget about it.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,reopened,2013-01-18 17:15:02,675.72,5,20,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,26,2012-04-11 07:49:28,5.47,,1,,"b""b' (Please also add a SIgned-off-by: to these commits.)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,closed,2013-03-10 20:10:04,175.03,5,21,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,27,2012-04-11 07:49:28,1384.23,,1,,"b""b' When using mosh on macos"," the ip address an d the port in append to the window title. Is there a way to prevent this ?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,137,closed,-,-,-,5,22,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,opened,2012-04-11 17:10:21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,title,2012-04-11 17:10:21,00:00,,1,,"b""b'  support'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,body,2012-04-11 17:10:21,00:00,,1,,"b""b' 1. define HAVE_BSWAP_64 for byteorder.h and bswap_64 macros on redhat and centos (DONE)2. pipe2 O_CLOEXEC undefined on centos (DONE)3.  missing on boost-devel-1.33.1-15.el5.i386 (DONE)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,1,2012-04-11 17:10:21,44.68,,1,,"b""b' Just hit my head on this.  Waiting with baited breath.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,2,2012-04-11 17:10:21,94.27,,1,,"b""b' Tested okay"," even with old boost (1.33) in / and new boost (1.34) in /'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,closed,2012-04-11 19:29:19,138.97,0,4,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,reopened,2012-04-11 19:29:56,0.62,0,4,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,3,2012-04-11 17:10:21,306.65,,,1,"b""b' I was able to build an rpm on a stock amazon linux AMI from the fedora spec.  Thanks!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,4,2012-04-11 17:10:21,32.72,,1,,"b""b' Ah"," I separately hit the boost 1.34 thing and opened issue #154 on that before I saw this pull request. It looks like I just duplicated the work you did getting it to compile on a CentOS box.. your byteorder changes are better than the hacks I did though so no need for me to submit those.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,5,2012-04-11 17:10:21,850.37,1,,,"b""b' @rurban This pull request has gotten messy with all the other activity on your master branch.  You probably want to open a new one with a dedicated topic branch.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,6,2012-04-11 17:10:21,294.87,,1,,"b""b' see new pull request #2 (seperate branch"," and rebased)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,closed,2012-04-13 20:13:54,43.97,1,6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,7,2012-04-11 17:10:21,7.28,,1,,"b""b' See #171'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,150,closed,-,-,-,1,7,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,opened,2012-04-16 10:28:45,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,title,2012-04-16 10:28:45,00:00,,1,,"b'b"" Mosh doesn\'t show motd""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,body,2012-04-16 10:28:45,00:00,1,,,"b'b"" Sorry if this issue has been brought up before (I couldn\'t find it if it was) but mosh doesn\'t appear to show the message of the day (/) when starting. Is there some way to enable this"," either server-side or client-side?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,1,2012-04-16 10:28:45,204.12,,1,,"b'b\' One way is just to have the / on the system run ""cat /"". Please reopen if this doesn\\\'t meet your needs.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,closed,2012-04-16 13:52:52,204.12,1,2,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,2,2012-04-16 10:28:45,387.85,,,1,b'b\' This workaround would cause people using other login mechanisms to get a double motd. Given that even venerable servers such as OpenSSH consider this an important feature to have carried, I don\\\'t think mosh should ignore this. It might be low priority, but it should stay as an open issue. To win the hearts of system administrators," mosh needs to act as a reasonably ""complete"" solution", and not require tons of mosh-specific workarounds and hacks.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,3,2012-04-16 10:28:45,64.17,,1,,"b'b"" The reason this is tricky is that we are just executing a login shell on the remote machine. Whatever the login shell prints", we will display. If OpenSSH has a standard list of things it prints before it runs the login shell," I guess we can certainly mimic that -do you know where this list is? You can also solve this with wrapper scripts; e.g. by replacing mosh-server with a script that does something like this: And then mosh-session is a script that cat / and then runs the user\'s login shell:  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,4,2012-04-16 10:28:45,6.65,1,,,"b'b\' In session.c there is a function that calls (which seems to just print /) and  ; the latter function is what handles the ""Last login:"" message that OpenSSH prints: I am not certain that that is considered ""part of Unix"" or is a random feature of OpenSSH", however (example: if you use telnet or rlogin, do you get that same login message prompt? if not, I\\\'d say that isn\\\'t in the same category as motd, which you will get in those situations).\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,reopened,2012-04-16 21:34:03,461.18,2,3,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,5,2012-04-16 10:28:45,2.57,,1,,"b""b' Fair enough"," we can make mosh-server mimic this.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,closed,2012-04-16 22:38:31,64.47,2,4,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,6,2012-04-16 10:28:45,1388.28,,1,,"b""b' If you add this"," you should also respect whether ~/.hushlogin exists to disable printing of the motd.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,7,2012-04-16 10:28:45,1406.85,,1,,"b""b' For reference", the OpenSSH check for is in of session.c," which is checked directly before the calls to and at the end of  .'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,8,2012-04-16 10:28:45,966.83,,1,,"b'b"" For the record", this doesn\'t work in Ubuntu 16.04.1 LTS. MOTD is stored in /-motd.d," and IIRC there\'s a PAM module that runs the MOTD (a la  ).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,9,2012-04-16 10:28:45,382.68,,1,,"b'b"" I can confirm the MOTD doesn\'t work on Ubuntu 16.04.1 LTS. But if you create manually a file / the works.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,10,2012-04-16 10:28:45,387.92,,,1,"b'b"" @mcginty I found this page: url  which has a interesting workaround:sudo ln -s / /And all works great.Now I\'m trying to do MOTD work with Byobu. :)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,11,2012-04-16 10:28:45,1086.78,,1,,"b'b"" @mhalano \'s work around brings back up the problem of having it print twice when you use a different login method. ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,12,2012-04-16 10:28:45,347.68,,1,,"b'b"" I recently added code to Mosh to print both and  "," which will also print twice with @mhalano\'s slightly hackish workaround.  That\'s available in version 1.3.2 and later. ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,13,2012-04-16 10:28:45,323.7,,,1,"b""b' I tested now (better late than never", ugh?) on a fresh machine with Ubuntu 17.10," I connecte from the same machine and from other machine and and both work like a charm.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,190,closed,-,-,-,2,10,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,opened,2012-04-18 12:16:05,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,title,2012-04-18 12:16:05,00:00,,1,,"b""b' Replace libutempter with... Unix login. (setuid -> fail)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,body,2012-04-18 12:16:05,00:00,,1,,b'b\' So, the goal of this commit is to solve a bunch of the random little bugs that have been accumulated on various platforms and various corner cases by going into the good ol\\\' drawer o\\\' Unix and pulling out our old friend / to wield as a massive hammer, allowing us to smash all of them at once. Keeping score, this fixes the following issues (or, in the couple cases, obsoletes the fix that was added for them, allowing that code to be deleted). (It additionally fixes an issue I haven\\\'t even reported yet, which is that the current mechanism ends up in a level-two shell with double-.bashrc.) Fix #47: hostname is set in utmpx by loginFix #61: login handles utmpx on Mac OS XObsolete #190: motd is now handled by loginFix #193: login correctly sets cwd to homeObsolete #199: shell lookup is done by loginFix #201: login understands username mapsFix #216: .hushlogin is handled by login As hostnames can no longer be set dynamically, the hostname is now statically set to the PID of mosh-server without a hostname (which happens to fix the truncated PIDs reported on FreeBSD by zi: there isn\\\'t an issue filed for that either, but there probably should be, as it seems to be a legitimate concern... if the PID is important, which people seemed to believe it was on IRC, it should be done in a way that makes you actually able to see it ;P). That all said, though: I seriously doubt that this commit will ever be merged to upstream, as it requires mosh-server to be setuid root (given previous discussion that seems to indicate a strong preference against making mosh-server itself even have temporary privileges, no matter how many bugs it fixes or how cleaner it makes the code; I am not certain I agree with that stance, but I will happily admit that it is justifiable," and maybe even ""more correct"" given the security concerns of this particular component). Regardless", I have opened a pull request related to it, as I think it is an interesting discussion to have, given that the alternative seems to be to slowly reimplement login (and even then, probably fail to fully support OS X; even with this patch I\\\'m still having an issue with the security session system: I seem to be getting disconnected from my bootstrap context... I added a sleep(2) which mostly mitigates the problem," but that is obviously not a reasonable solution). (BTW: I\\\'m sorry that all related bugs ended up with a double ""related commits"" attached to it... I wonder if GitHub will ever realize those other commits got replaced and clean them up... I didn\\\'t realize they had such horribly painfully stale caching all over the place", or I would not have bothered to change the commit message to add the notes that I did; _sigh_.)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,1,2012-04-18 12:16:05,104.88,,,1,"b'b"" By all means", let\'s have the discussion! As you surmise, it\'s going to take a lot more than these glitches for me to get comfortable shipping privileged code. SSH has had a zillion security problems, most of them by trying to do things that mosh intentionally doesn\'t get its hands dirty with. We don\'t authenticate, we don\'t have privileged code, we don\'t negotiate cipher modes (over an insecure channel or otherwise!), all our datagrams represent idempotent operations (so we are oblivious to replays), etc. To the extent we can simplify our design to make the security story crystal-clear, well, it\'s very attractive. If you want to fix the utempter API to better support multiple entries in / for the same UID," I am all in favor and would be happy to see if we can get the Linux distributions on board with whatever improved API we come up with. (The FreeBSD folks using mosh may be able to participate as well.) mosh will be the first application to support utempter 3.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,2,2012-04-18 12:16:05,126.3,1,,,b'b\' So, to me," the counter argument is also pretty clear: the high-level goal should be to get all of the crazy weird code out of mosh (I would call this ""simplifying the design"")", so that what is left has the minimal possible surface area for attack. I realize that you think that making something setuid makes it infinitely more dangerous, but I will argue that if you get access to the user\\\'s personal account that\\\'s really all you need: all of the user\\\'s data is going to be stored in their account, and you will almost certainly be able to use that account to make outgoing connections, build a botnet, access the internal network, infect his account and steal his credentials to other systems, or whatever it is that you wanted to do as part of your attack. In comparison, by not using the tried and trusted / to handle all of these crazy corner cases (and I think we\\\'ve barely scratched the surface of those), mosh will either a) have to remain crippled by these bugs (which are sufficient to make mosh totally unusable for me; it might work for you," but to me a project that is billing itself as a ""replacement for SSH"" can\\\'t do half that job wrong and remain credible) or b) have to take on a lot of the operational complexity of OpenSSH", as it will pretty much have to re-build a cross-platform implementation of login: the latter of these two options drastically increases the attack surface, especially on the platforms that will be stretching the code the furthest to work with the least testing. Therefore, I do not believe it is at all clear that the correct decision, from a security standpoint, is for mosh to avoid : it certainly has a purity to it," and I\\\'ll happily admit that it is ""justifiable"" (you won\\\'t get fired for avoiding )"," but in my eyes it is the ""wrong call"" in this specific case: it honestly isn\\\'t like libutempter is that great of a project to be foisting trust on given that we would effectively be rewriting it ourselves anyway. Having a setgid utmp binary that is called ""utempter"" is not intrinsically more secure than having a setgid utmp binary called ""moshtempter""", and it really should not be considered defacto more secure than having part of mosh be setuid root: it would be better to concentrate on the tradeoff, not summarily dismiss it. Looking at libutempter: that library\\\'s implementation only supports Linux and FreeBSD (not even Mac OS X, which is often very similar to FreeBSD), is actually kind of scary to use (in that I believe that a balancing error while using it could lead to the utmp database simply being wrong: that is not simply not possible with /; I have yet to figure out how I can exploit this fact, but I think the stale entries can be resurrected), and has an API that makes it impossible to correctly implement the username semantics in #201. Really," if anyone spends the time to ""improve libutempter"" they are just going to be rewriting it from scratch and then going around trying to get people to let the new one use the name", as that will be all that is left. Meanwhile, the project has not been touched in five years (last released in 2007), was only touched twice in the preceding four years (version 1.1.1, the first version from altlinux that supplanted the RedHat library) was released no later than early 2003), and is currently only used by two packages in Debian (screen is actually not one of them: it has some code that could use it, but it isn\\\'t actually used due to API limitations)... I am having a difficult time believing that anyone (whether it be the developers that have probably forgotten they were affiliated with this project, the Debian package maintainers who will have to make the hard call about forking upstream, or the people in charge of xterm and libkpty who may have a say in how libutempter works) will be happy about being dragged into a conversation to discuss adding yet another API layer to this library. To top it all off: I actually believe libutempter to be a security /bug/ by its very design," as it allows untrusted code to spoof hostnames into utmp: when I run ""who"" on my system I want the hostnames being reported to be accurate and generated by code installed by root and trusted by the system administrator... having libutempter installed on your system allows any user to spawn a pseudoterminal", run whatever code they want in it, and claim to . that they are a remote login account accessing the system from, for example, /my/ IP address (which, if I saw it in who," I\\\'d just go ""oh"," I must have another ssh session running somewhere"""," as opposed to ""oh shit"," there\\\'s a second login to my server that I don\\\'t recognize""). Instead", I think it would be much better to concentrate on how to use / to get as much as code as possible out of mosh, and to instead figure out how to best isolate it. I think it should be entirely safe to add a setuid root binary that is pretty much exactly  ," where ""whoami"" is replaced by the standard ""get the username with getlogin()", call getpwnam() on that username," if the uid isn\\\'t getuid() replace the username with getpwuid() of our actual uid; return the resulting username"". The result is a setuid root program that is less than ten lines of code long and that handles all of these currently known corner cases as well as any future corner cases that may come up. (That is likely what I will be implementing next on this front", as I really have no personal interest in trying to figure out what to do about libutempter.)\'',,,
mosh,219,closed,3,2012-04-18 12:16:05,109.08,1,,,"b'b\' I\\\'m imagining how the conversation will go with our friends at  and the security freakout community: Us: ""Hey guys", mosh 1.2 is out. By the way, it now needs something to be setuid root! Please make pkg," thanks.""Them: ""!?!?!?!?!? Why did you destroy the \\\'no privileged code\\\' selling point?""Us: ""Oh", you know," we want to be able to make utmp entries on Mac OS X mosh-servers! Crucial feature!""Them: ""?!?!?!!?!""Us: ""Ok", not just that. It\\\'s also too much of a pain to check .hushlogin to suppress the motd. I mean, seriously," these requirements were just piling up like crazy and the cross became too heavy to bear.""Them: ""?!?!?!?!!""\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,4,2012-04-18 12:16:05,9.33,1,,,b'b\' Anyway, I certainly respect your position, although I don\\\'t share your appraisal of the current approach\\\'s difficulties. Checking .hushlogin and similar issues are not crucial features, aren\\\'t difficult, and frankly do not justify becoming setuid root to avoid their pain. (And I do like that our approach puts nice details in who, like the IP address of the user and whether the connection is active or not," but this is not crucial either.) But I don\\\'t disagree with your suggested approach: if you want to ""add a setuid root binary that is pretty much exactly exec login -f -h ""local:pid=$PPID"" ""$(whoami)""""", that\\\'s a fine plan and one I totally support. If you maintain it and get it part of MacPorts (/homebrew if that is possible), I\\\'m happy to make mosh depend on it and use it when available. (For the record, gnome-terminal and xfce4-terminal use gnome-pty-helper, which is basically the same approach if less widely available.)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,5,2012-04-18 12:16:05,212.53,,1,,"b'b\' @keithw ... being able to add utmp entries on Mac OS X actually is a crucial feature of a ""replacement for SSH"": without it tons of things simply do not work", which is why there are already multiple bug reports of unrelated things that are broken by that feature not working by people who are not me (I don\\\'t even like OS X: I was forced to use it due to nearly all of my followers using it, not because I would have done so by choice). In order to make this work on Mac OS X _something_ has to be setuid root," and while it could be ""the ability to falsify the hostname field in the utmp database"" (something I maintain is a security issue) as opposed to ""login as yourself with the host of a process identifier"" (which seems entirely benign)", that seems sufficiently wrong that I actually intend to go file a bug report against the libutempter package asking for its removal from Debian and Ubuntu: projects that are using it should probably be modified to instead use this login wrapper that I am proposing," and the reason cited should be ""system security"".\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,6,2012-04-18 12:16:05,17.77,1,,,"b'b"" (edit: I spent some more time investigating this comment", and it turned out I misread the output of ls somewhere and was wrong. I\'ve removed it from the discussion as I think it was horribly confusing by being wrong," but I don\'t want to delete it as I want to leave the marker that there was something here for a bit and it was wrong.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,7,2012-04-18 12:16:05,73.32,,1,,"b'b\' As we have determined in #218 that the race condition I ran into and ""fixed"" as part of this pull request had nothing to do with using login", I\\\'ve moved that to a separate feature branch and will file it as a new issue.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,8,2012-04-18 12:16:05,182.93,,,1,"b""b' Ok", it sounds like we have a path forward -you will make a new wrapper (saurik-awesome-pty-wrapper?) and as soon as it is available (especially on OS X), I imagine we will support it. And if you want us to make the MacPort depend on it, we can probably do that too. Closing this for now, but please reopen or file a new issue when there are next steps. Thanks," Keith.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,closed,2012-04-19 02:12:14,836.15,4,4,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,9,2012-04-18 12:16:05,33.85,,1,,"b""b' I actually wrote it this morning (with one change I had to make as on OS X I needed both real and effective root", not just effective), and I tested it on the various platforms I had access to (Ubuntu, FreeBSD," OS X 10.6). url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,10,2012-04-18 12:16:05,337.4,1,,,b'b\' Though I find quite some things questionable about the programming style of your patchset, there are some small remarks I\\\'d like to make. First of all, on FreeBSD this patch doesn\\\'t require any elevated privileges on FreeBSD, as login is already setuid. Also," please add """" to the command line as well. It\\\'s not like there\\\'s an exploit here", but bugs related to login-invocations are almost as old as UNIX itself. Also, what\\\'s so bad about libutempter?\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,11,2012-04-18 12:16:05,4.28,,1,,"b'b"" By the way"," FreeBSD\'s libutempter can very easily be ported to Mac OS X. It may even work without any source code alterations. On FreeBSD it\'s actually called libulog internally. Source code: url url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,12,2012-04-18 12:16:05,637.57,1,,,"b'b\' @EdSchouten A) I would love to know what you find ""questionable"" in the programming style (seriously: I always want to learn). I purposely went quite far out of my way to mimic the programming style of mosh (including usage of the weird my_argv array for memory ""management""", the mismatched intermingling of std::strings and character pointers, duplicating hardcoded size constants rather than using sizeof, and the usage of implicit comparison on pointers using !)," so I feel I at least have to mention ""I would never have coded something that looks like that in my own code"". I guess the one thing I failed to do is I checked for == 0 on access", when mosh developers might have instead used !. Really, though, the only code that I even had much control over were lines 308-328, or 20 lines of code ;P. B) I detail the problems with libutempter above, but in summary the issues are that it does not allow you to suggest a username (which makes it fail in situations where multiple usernames map to the same uid; other tools and libraries go out of their way to make certain that this situation works correctly) and by its very nature allows unprivileged users to arbitrarily alter the hostname field of their utmp entries (which undermines the credibility of utmp: only trusted processes should be able to log hostnames to that field)," which the FreeBSD developers of the library seem to at least understand (they have a caveat in the source code ""It does allow users to log arbitrary hostnames."")", but do not seem to correctly appreciate.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,13,2012-04-18 12:16:05,23.45,,1,,"b'b\' @EdSchouten While login is ""already setuid""", you cannot use it with -f (to force the login without credentials) unless you have root access (most platforms) or are already that same user (this is not allowed on Linux but is allowed on OS X; I do not know about FreeBSD as I am firewalled from my FreeBSD test box at my current location). On all platforms, however, usage of -h (which allows overriding the hostname arbitrarily) is only allowed by root, a security measure that is sadly undermined by having libutempter installed on your system. I vaguely concur on your request to add -before the username passed to login (although AFAIK hyphens are never allowed before usernames anyway, and so the getpwnam uid verification should fail), but it is always a good idea to be anally safe (which I have attempted to do in my Gist).\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,14,2012-04-18 12:16:05,8.32,1,,,b'b\'  (Irritatingly," as this pull request is ""Closed""", it is not possible to add commits to it the way one normally would while discussing a pull request on GitHub. Again: GitHub pull requests track branches, not commits, and indicate an intent with an associated issue, not a specific request looking for an immediate conclusion. If you do not like this behavior I highly recommend using alternative systems to track code.)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,15,2012-04-18 12:16:05,33.83,,1,,"b""b' Well", I guess the -aliasing is already inherent to give problems in many parts of UNIX-land. For example, even though utmp(x) and wtmp(x) correctly deal with -aliasing," lastlog does not. This is because in most implementations this file is simply an array of '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,16,2012-04-18 12:16:05,19.48,,,1,"b'b"" I used strdup in order to get around the type conflict between char \\\\* and const char *. There also was an strdup in the original code that I had removed (although I may have myself added that strdup in a previous patch: I don\'t remember ;P). I actually find it disconcerting that the memory management of this code is so unclear", and had I designed it I would have probably kept an std::vector until the last moment (and in fact have done this in various of my projects).I used the size-1024 buffer because I had seen other size-1024 buffers in mosh\'s code when smaller buffers would have sufficed, but I see they do normally use size-64 buffers for the hostname. You will note that in my Gist (which is coded in a saurik-standard style) I used a size-64 buffer. I will not bother adding a commit for this to the branch as the 1024 buffer is fine, but will point out that that code will be replaced by the external relogin wrapper anyway.I _emphatically_ agree that sizeof(host) should be used: it seriously bothered me to no end as I typed that, as having that duplication is just asking for a mistake at a later time. However, if you check, you will notice that mosh _never_ uses sizeof for this purpose. :( There are a few calls to snprintf that were removed by my patch you can examine.On FreeBSD the current code causes the same problem with regards to usernames: this is not an OS X specific issue, and in fact the username problem I\'m running into is happening on my Linux servers (I do not have any personal need to log in to an OS X system, and was only looking into those issues to help out others, as I spend my life swimming in random OS X-specific issues due to my work on Cydia). I will also again point out that libutempter avoids an elevated privilege, but itself exposes a privilege incorrectly: unprivileged users should not be able to modify the hostname field of utmp; in fact, the only reason / requires setuid privileges on OS X for our purposes is because it makes damned sure that you are root if you want to modify the hostname field: otherwise, you can run without root access and it will work correctly. The fact that libutempter allows this should be considered a security bug," and I intend to file it as such against  in the near future.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,17,2012-04-18 12:16:05,3.8,,,1,"b'b"" @saurik Heya", I love your enthusiasm for mosh, but getting worked up about the semantics of github is not worth it! My understanding was that a pull request was literally a request for me to merge the attached commits to my master branch, and I try to deal with the inbox frequently so I\'m not annoying people who want me to merge their commits. If you want to use them to put up straw men and use the pull request as a discussion forum, that\'s not how I had been interpreting them," but it\'s certainly not worth arguing about -consider it reopened.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,reopened,2012-04-19 20:34:15,1102.02,7,8,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,18,2012-04-18 12:16:05,19.55,,,1,"b'b"" But still", if it\'s just the username-aliasing," that can in fact even be fixed! I can simply modify FreeBSD\'s ulog-helper to call getlogin() and validate it against the current uid.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,19,2012-04-18 12:16:05,18.75,,1,,"b""b' url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,20,2012-04-18 12:16:05,15.82,,1,,b'b\' @EdSchouten I thought of that patch, but it will not work: getlogin() is itself based on the utmp mechanism, and as so returns NULL in this context. Though, I have only verified that on Linux, and not on FreeBSD (and cannot right now as my FreeBSD testing box is firewalled from my access at this location). That said," it had not yet occurred to me to attempt to  the various solutions: if you use getenv(""LOGNAME"") as an additional check in that patch (as I do in the relogin.c wrapper I posted as a gist) then it may be sufficient", and the same patch may also work on the Linux versions of libutempter.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,21,2012-04-18 12:16:05,3.03,,1,,b'b\' No, it isn\\\'t. On FreeBSD," getlogin() and setlogin() directly modify ""struct session::s_login"" inside the kernel. At least on FreeBSD", it now works reliably. :-)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,22,2012-04-18 12:16:05,16.67,1,,,b'b\' @EdSchouten OK, I have talked to the system administrator of the network running the FreeBSD test box I have access to and got the firewall fixed, so I can now verify behaviors: in fact, getlogin() _does_ seem to work on FreeBSD with my previous test case that failed on Linux. (edit: I did not see your message before I posted this reply.) As I now see that you are the author of this tool, does it seriously not bother you that it allows users to arbitrarily edit the hostname field of utmp? If you do not believe that that is an issue, why does / go to lengths to disallow this? It seems awkward that in one place this is considered a security issue of sufficient magnitude to require telnetd to run as root," and in another place it is considered ""engh: doesn\\\'t matter"". AFAIK this is the only reason telnetd is actually required to operate as root: otherwise", it could drop privileges all the way down to nobody as soon as it took over port 23.  \'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,23,2012-04-18 12:16:05,11.33,,1,,"b'b\' @EdSchouten The specific code that handles this login flag (which the code itself documents as ""for telnetd"," etc."" in a comment on line 52) is in  at around line 204:  \''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,24,2012-04-18 12:16:05,20.3,1,,,"b'b"" Yeah", it is a bit inconsistent. But there may be a historical reason why it\'s the way it is. The fact is that in FreeBSD 8-, login(1) would simply overwrite the existing utmp record associated with the terminal, that could in fact contain data that is assumed to be trusted. This is of course very bad. With utmpx this is not the case anymore," as each invocation of ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,25,2012-04-18 12:16:05,45.88,,1,,b'b\' @EdSchouten Once you are willing to install ulog-helper (or utempter) on your system, however, there is no longer any reason to believe that the hostname field in utmp means anything at all; it does not matter whether the entries are being overwritten or accumulated," as any given line might be someone claiming an incorrect hostname: the value of ""data that is assumed to be trusted"" is entirely thrown out the window", and any of it may as well be overwritten. You can\\\'t even claim that at least the original trusted entry will be visible, as you can simply run your own service daemon inside of the new falsified pseudo-terminal and drop your original connection (in fact," mosh does exactly this). The question really comes down to ""what data is considered trusted""", and the evidence seems to indicate that the hostname field has historically been trusted information, not just on FreeBSD but on every system that has ever supported utmp.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,26,2012-04-18 12:16:05,3.8,,1,,b'b\' I\\\'m closing this because the discussion has run down, we all agree the code won\\\'t be merged, and it\\\'s not even clear what this thread is about anymore. Please open tickets for any bugs that would have been fixed by this patch," if they don\\\'t already have tickets. You can still comment on the closed issue.  I understand that you can\\\'t attach new commits but I don\\\'t think that\\\'s a big deal.  You can still link to a branch in your repo as an ordinary web link.  That\\\'s more flexible and allows us to discuss multiple alternative approaches. In the future I would like to reserve pull requests for code which is plausibly ready to be merged. That way the distinction between ""issue"" and ""pull request"" is useful to the people who actually do the pulling.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,closed,2012-04-24 23:09:26,155.18,9,14,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,219,closed,-,-,-,9,14,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,220,closed,opened,2012-04-18 22:46:38,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,220,closed,title,2012-04-18 22:46:38,00:00,,1,,"b'b"" mosh-client is binding to the server\'s IP address""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,220,closed,body,2012-04-18 22:46:38,00:00,1,,,"b'b"" In some (all?) cases mosh-client takes the IP address of the server and attempts to bind it locally", causing the following messages to be printed during Connection() before it gives up and drops back to binding to INADDR_ANY. I ran into this last night, and while testing out one of my delay-test patches @jcftang ran into the same message on #218. I don\'t fully understand the issue, but I know it happens, and the calls to sleep, fork, verbose," etc. that I\'ve been adding during random sessions in the attempt to debug other issues (which has allowed the various parts to stay alive long enough that we can see these messages surface) should not cause bind() to be getting the wrong IP address.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,220,closed,closed,2012-04-18 22:52:41,6.05,1,1,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,220,closed,reopened,2012-04-18 23:03:48,11.12,1,1,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,220,closed,1,2012-04-18 22:46:38,17.18,1,,,b'b\' (Or is it the server? I just went back to one of those machines I was testing that delay patch on and I see that it is the output of the delay patch I was working on. Ugh: just ignore my commentary on this problem. In fact," I\\\'m so bad right now I clicked ""Close"" instead of ""Comment on this issue""", and thought my comment went through... _sigh_ ;P.)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,220,closed,2,2012-04-18 22:46:38,159.32,,,1,b'b\' Hi, let me see if I can clarify what\\\'s going on here. The code is in Network::Connection::try_bind() in . The logic is that we want the server to bind to the same IP address that the client is using to connect to it (after any server-side NAT, i.e., the server\\\'s view of the IP address the client is sending to). Otherwise you run into problems if the server has two interfaces, and the client is connecting to one. The server very well might respond from the other," and then you won\\\'t be able to pass through a NAT. So we want it to look as much like a ""UDP connection"" as possible. So first the server tries to bind to the interface the client is asking for", either one given explicitly with -i or with -s, which means suck it out of the SSH_CONNECTION environment variable. If that doesn\\\'t work, then the server just binds to INADDR_ANY and hopes for the best. In these cases, if the server has multiple interfaces there\\\'s a good chance the connection won\\\'t be able to pass through a NAT. On some platforms, it seems that ordinary users can\\\'t bind to an explicit interface, and so we just end up with INADDR_ANY. Some Macs seem to be in this class. As long as the machine has only one interface (or the client is not behind a NAT), it will still work fine, but that\\\'s where the error message comes from. So, to be clear, it\\\'s the server that\\\'s trying to bind (properly), and this is a good thing in most situations. Please reopen if you want more explanation or if I missed the point! Thanks.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,220,closed,closed,2012-04-19 01:43:08,159.33,2,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,220,closed,3,2012-04-18 22:46:38,7.9,,,1,"b'b\' (For future reference: when you close an issue it actually can\\\'t be reopened; the button is grayed out and says ""you don\\\'t have permission to reopen this issue"" in a tooltip.) That explanation is great", and makes perfect sense: however," the response should be ""then that isn\\\'t actually an error and should not be logged to the console as such"".\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,220,closed,-,-,-,2,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,opened,2012-04-18 23:20:51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,title,2012-04-18 23:20:51,00:00,,1,,"b""b' OS X has a race condition establishing your security session'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,body,2012-04-18 23:20:51,00:00,1,,,b'b\' On OS X, due to the way security sessions and bootstrap Mach contexts (I\\\'m honestly not 100% certain which is the problem here, and my understanding of these systems is not perfect: it mostly comes from working on the new Substrate injector from a few months ago, and some work I did on absinthe) are inherited, if sshd shuts down before the login shell starts up (which both can happen and normally does happen as the parent mosh-server does an _exit _immediately_ after a fork, causing that process to exit before the children get very far)," then the resulting shell is pretty much entirely broken: you can\\\'t even figure out your own username (whoami returns numbers and bash simply prints ""I have no name!"")", much less talk to complex Mach services such as launchd. The patch referenced by this pull request is obviously stupid and non-deterministic (it is just a call to sleep(2) before the _exit() after the fork() in the parent mosh-server process), but at least it demonstrates the problem and is a starting point for people looking at this problem to figure out a better way to handle it (or for those experiencing it, such as @jcftang from #218) to find temporary relief. Obviously, however, the final fix needs to be deterministic. The problem, though, is I\\\'m not certain how long we really need to wait; do we just need to wait for the second fork, for the second psuedo-terminal to be created," for the login shell to actually ""do something""... I don\\\'t know (although my current bet is that if we coordinate such that after the second fork", which also happens to create the pseudo-terminal anyway as it is really a call to forkpty, we\\\'ll be golden). Doing that will require some irritating synchronization primitive between the various processes (and in the worse case something like waiting for the terminal to actually bear fruit, which would require the terminal network loop to get involved). Anyone doing that should also try to verify (maybe by adding a long sleep in the child after the synchronization) that the event being waited for is actually truly sufficient (and not just probabilistically better). (There are other solutionsones that involve changing the way OpenSSH and mosh get bootstrapped togetherthat may also provide better fixes for other bugs, but those are more drastic and against some of the goals of the project developers; they are probably even pragmatically wrong anyway, as there actually are some key advantages to this OpenSSH->mosh-server craziness, although those may be short-term.)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,1,2012-04-18 23:20:51,179.8,,,1,"b'b\' How can I avoid applying a commit titled ""Fail to fix OS X security session race condition""...... :-) I certainly don\\\'t understand the OS X issues involved here", but I can tell you we don\\\'t have these problems on a 10.7 server -do you think they have made things easier for us, or am I just getting lucky? We do have a special wrapper on MIT\\\'s Athena system to preserve the security session (well, to preserve the Kerberos credentials and AFS tokens), so this would not be the first time we had to do something special to preserve an OS security context, speaking very generally. On the other hand, if the problem only affects 10.6 and before (which is not at all clear obviously), I don\\\'t think we are obligated to jump through hoops for them. But I have to defer to the Mac experts here -I\\\'m not one.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,closed,2012-04-19 02:20:39,179.8,1,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,2,2012-04-18 23:20:51,15.32,1,,,b'b\' This has absolutely nothing to do with AFS, Kerberos... I\\\'m not even certain why you are bringing these up. I also am not certain this bug does not affect OS X 10.7 (from my admittedly sketchy understanding of how this stuff works, I see no reason why it would have changed in 10.7: I certainly did not see anything in Substrate\\\'s bootstrap environment change while porting to iOS 5): it is the kind of thing where someone not seriously using the session might not even notice. For example, on your 10.7 setup," can you run ""launchctl list"" and verify that you get a large amount of output and process identifiers? Regardless", closing an issue like this before doing the deference to the Mac exports you alluded to is simply an incorrect priority.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,3,2012-04-18 23:20:51,14.32,,1,,b'b\' Hi saurik, Yes," if I run ""launchctl list""", I get 30 lines of output: #  PID   Status  Label80882   0x7fa653400af080883   0x10c207ae080872   0x10c2086f0-server80873   0x10c2083f080865   0x10c207de0  0     0     0     0     0   (etc.) #  I just closed the pull request -I assume nobody (including you) thinks I should actually apply as submitted. If you want to discuss further on an issue or submit a patch that preserves the security session and Mach context, please feel free. (If you don\\\'t agree that a security session is analogous to an AFS PAG and token or Kerberos credentials cache, all of which are normally destroyed by SSH on logout and that have to take special pains to preserve, that\\\'s your right.)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,4,2012-04-18 23:20:51,9.65,1,,,b'b\' I figured that a pull request is an issue: they appear under issues. If they are semantically separate then I\\\'m apparently using GitHub horrible incorrectly. As pull requests track branches, not commits," as far as I know people normally use them as discussions around concrete code related to features. This is why they appear as issues with ""code attached"": the branch can then be updated under the pull request and people can continue reviewing the idea. Hence why I purposely used a pull request on a really rough ""this is obviously wrong"" patch concept", in order to allow it to be organized in the issue tracker.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,5,2012-04-18 23:20:51,166.0,,1,,"b'b"" Keith", this issue is real. I\'ve observed it myself. You shouldn\'t close the pull request just because the current code isn\'t mergeable we can discuss it here on this issue," and eventually we\'ll have something to merge.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,6,2012-04-18 23:20:51,2.6,,1,,"b'b"" I don\'t doubt the issue is real -I\'m just not going to apply the pull request that was submitted (I don\'t think anybody expected otherwise?). If you still want to discuss here or change the commits"," be my guest.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,reopened,2012-04-19 05:48:34,207.92,3,4,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,7,2012-04-18 23:20:51,256.67,,1,,b'b\' Well, it saysat the top," and that\\\'s plainly not the case. I would rather reserve pull requests for code which is plausibly ready to be merged.  That way the distinction between ""issue"" and ""pull request"" is useful to the people who actually do the pulling.  Of course", you can create a branch in your repo and link to it from Markdown code in an issue comment.  That\\\'s what I\\\'ve done for [my branch]url  and several others in the past.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,8,2012-04-18 23:20:51,1271.3,1,,,b'b\' Closing this, as discussion has run down," and I don\\\'t want it sitting in the pull request queue forever.  I\\\'ve opened #249 to keep track of this issue. It\\\'s unfortunate that I apparently can\\\'t turn a pull request into a ""regular"" issue. I\\\'ve already sent GitHub an email complaining about this.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,closed,2012-04-29 07:16:31,87.95,4,5,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,221,closed,-,-,-,4,5,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,opened,2012-04-24 20:17:04,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,title,2012-04-24 20:17:04,00:00,,1,,"b""b' undefined reference to PROG on Gentoo (was: sigfd_init: Invalid argument)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,body,2012-04-24 20:17:04,00:00,,1,,"b""b' Getting an error when trying to start mosh-server on my Gentoo linux box.  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,1,2012-04-24 20:17:04,126.22,,1,,"b""b' Can you run and show us any calls to or  ? Are you running an old Linux kernel (2.6.26 or earlier)?  Those lack support for the flags argument to  .'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,2,2012-04-24 20:17:04,1.9,,1,,"b'b"" Ah", the kernel version is the problem. (I\'m on a xen virtual host," so sadly kernel upgrades are outside of my control) Will close this issue.  Thanks.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,closed,2012-04-24 22:25:11,128.12,0,4,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,3,2012-04-24 20:17:04,4.68,,1,,"b'b"" Yes"," this happens when your glibc is new enough to have signalfd() but your kernel doesn\'t. The fix is probably to run: Then edit and comment out Then run make as normal.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,4,2012-04-24 20:17:04,1242.07,,1,,"b""b' I tried commenting out those options above and had other issues.  Any way to include an option to build this for 2.6.18?  I have that installed on a bunch of machines.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,5,2012-04-24 20:17:04,45.23,,,1,"b'b"" Which?This problem occurs because we detect the presence of features in libc at compile time", and assume the kernel has the corresponding features at runtime.  If you build and run on the same machine, it should work fine (unless that machine has a weird configuration). I\'ve built Mosh in a CentOS 5.8 VM with a 2.6.18 kernel.  It should also work in an appropriate chroot, because we\'re testing header files and not the running kernel itself. If you are building and running on the same machine, and still get this error," we can help you track it down.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,6,2012-04-24 20:17:04,133.97,,,1,"b'b\' Thanks a lot for the help here\\\'s some output...  It\\\'s a Gentoo ""machine"" hosted on EC2", and I installed it form the net1.2 ebuild.  \'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,7,2012-04-24 20:17:04,6.58,,1,,"b'b"" Okay"," I think the problem is that Gentoo\'s userspace assumes a newer kernel than you have. What happened when you tried keithw\'s workaround?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,8,2012-04-24 20:17:04,24.15,,1,,"b""b' The resulting ./configure line (through the ebuild) is: Then the compile fails with the error:  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,9,2012-04-24 20:17:04,51.2,,1,,"b'b"" This seems to be an incompatibility between Mosh and some versions of the library (newer than we\'d tested previously).  @bfolkens"," can you try [this patch]url  on top of  ?  You can get a tarball [here]url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,reopened,2012-05-01 23:33:30,68.32,0,9,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,10,2012-04-24 20:17:04,44.52,,,1,"b""b' Thanks worked great!  FWIW I was using the dev1.2.7 ebuild of skalibs. I can finally connect using mosh now ;) (also created a sample ebuild with the fixes at: url  in the 1.2-r1 ebuild)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,11,2012-04-24 20:17:04,2.13,,,1,"b'b"" Cool"," thanks for testing!  We\'ll merge that patch and it should be in Mosh 1.3. Happy moshing :)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,12,2012-04-24 20:17:04,878.42,,1,,"b""b' wrt Gentoo", please take a look at my patches at url  afaik this has nothing to do with skalib versions," just with static build (as shipped third does) and dynamic linked (as external does).'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,13,2012-04-24 20:17:04,65.47,,1,,"b""b' ftr"," i removed the the skalibs dep from the ebuild and the fatal skalib error from   [AC_MSG_ERROR([Unable to find skalibs.])])  [AC_MSG_WARN([Unable to find skalibs.])])'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,14,2012-04-24 20:17:04,207.02,,,1,"b'b"" Oh", well," we only tested it with static build because that\'s all Debian\'s version of skalibs supports. :)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,closed,2012-05-05 06:11:12,397.7,0,11,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,15,2012-04-24 20:17:04,1425.0,,,1,"b'b"" Since it wasn\'t entirely clear from the above"," a note: I was in the same position as @rodbegbie (old Xen kernel with newer userland) and @keithw\'s fix worked just fine.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,239,closed,-,-,-,0,11,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,opened,2012-06-22 11:29:02,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,title,2012-06-22 11:29:02,00:00,,1,,"b""b' Keystroke oddness in htop & screen'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,body,2012-06-22 11:29:02,00:00,,,1,"b'b"" I often run htop inside screen (server on ubuntu lucid)", but when I do so via mosh, most of the key commands (which do not require modifiers," just plain keys) do not work. Pressing any key (alphanum or cursor) will result in the currently selected process getting its \'nice\' value incremented!Running it outside mosh (through the same screen session) works fine.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,1,2012-06-22 11:29:02,1250.17,,1,,"b""b' What terminal emulator are you using"," and what version of Mosh on the client and server?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,2,2012-06-22 11:29:02,1384.45,,1,,"b'b"" I\'m running latest iTerm2 on OS X 10.7", mosh 1.2.2 client and server (on Ubuntu Lucid)," both built from git.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,3,2012-06-22 11:29:02,1.72,,1,,"b""b' Do you have this problem in "," or when you run htop directly inside mosh (no screen)?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,4,2012-06-22 11:29:02,12.3,,,1,"b'b"" Aha! No!It still happens in iTerm when I run htop without screen"," so it\'s not a screen issue.Running htop over ssh (no mosh) in iTerm works too.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,5,2012-06-22 11:29:02,1174.8,1,,,"b'b"" ### **TL;DR**: Can\'t reproduce", but obviously that\'s not sufficient. ### Behavior observed in all combinations below: Right and Left pan the htop data display around, Up and Down move which process is highlighted. ## Clientmobile-shell: stable 1.2.4iTerm 1.0.0.20130319OS X 10.7.5MBP  Keyboard: US English  Language: U.S. English ## Server ubuntu 12.04.2 LTS new throw-away box screen 4.0.3-14ubuntu8mosh 1.2.4-0~931~precise1htop 1.0.1-1 ### ssh screen ### ssh + screen ### mosh screen ### mosh + screen PS: I was using some free*\\\\* wifi spot in palo alto that times out every 30 minutes," mosh just saved my remote session.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,6,2012-06-22 11:29:02,250.17,,,1,"b'b"" I can\'t reproduce this either", so I\'m closing it as old and unreproduceable.  The htop key to increase the nice value is  ," which does suggest some possible problem with our function key conversion.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,closed,2017-08-23 07:22:38,1193.6,1,4,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,7,2012-06-22 11:29:02,18.78,,1,,"b'b"" FWIW", I still see this on all the servers I administer. I\'m now running mosh 1.3.2, iTerm2 3.0.2," tmux 2.5.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,8,2012-06-22 11:29:02,13.05,,,1,"b'b"" I just noticed that my original description isn\'t correct. Not all keys cause nice to increase  work correctly", as do escape, return, the alphanumeric keys and some function keys (F6," F10). The main thing I notice that increases the nice value is pressing F5 to toggle tree mode.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,9,2012-06-22 11:29:02,1160.03,,,1,"b'b"" I can\'t reproduce this new symptom either", with iTerm 3.1.beta.7, tmux 2.3 or 2.5, and mosh-devel," on two different servers.  F5 toggles tree mode nicely for me.  Could you try and narrow down the conditions that cause this? ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,reopened,2017-08-28 03:14:31,1191.88,1,5,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,290,open,-,-,-,1,5,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,opened,2012-07-22 20:22:03,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,title,2012-07-22 20:22:03,00:00,,1,,"b""b' Algorithm negotiation really is necessary'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,body,2012-07-22 20:22:03,00:00,1,,,"b'b\' On issue #279 @keithw commented: ""[...].  I\\\'m not really eager to make Mosh crypto-agile -if you look at incumbent systems", like OpenSSH," cipher negotiation is a huge source of bugs and security holes. [...]"" Crypto-agility is necessary.  Someday cryptanalysis of Mosh\\\'s crypto algorithms may show them to be substantially weaker than  and though it may not be immediately fatal to Mosh\\\'s security", such cryptanalysis may open the door to future cryptanalysis that does fully break Mosh. The options available the day one of the algorithms used by Mosh begins to weaken significantly are:flag day switch to new algorithm orswitch to a new port number and use new algorithms there The problem with flag days is that they are a terrible user experience.  The problem with using a new port number is that port numbers are a scarce resource and worse: there will be a fallback to old number approach that is very likely to be susceptible to a downgrade attack! The cryptanalysis of the now-weak algorithm might not be so devastating that only a flag day could address it.  That is, it may be OK to continue to use the now-weak algorithm during the time it takes to migrate to a replacement algorithm. The downgrade attack issue is where all the complexity is.  You\\\'re clearly hoping to be able to avoid this complexity.  I\\\'m asserting from experience that you should not. OpenSSH may be an example of complexity in algorithm negotiation, but it\\\'s also an example where algorithm negotiation has saved the protocol\\\'s bacon (think of the chained IV CBC cipher suites it used to use). TLS is an example of a protocol where downgrade protection was not done well originally, an example of fallback reconnects. My advice is to implement algorithm agility, that you get negotiation and downgrade protection right rather than avoid it out of fear of complexity.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,1,2012-07-22 20:22:03,31.98,1,,,"b'b"" I should add that SSHv2\'s version negotiation and initial algorithm negotiation are done sufficiently well that a v3 will likely never be necessary.  The one problem with SSHv2\'s negotiation is that it cannot be retried if it fails", which is a problem for GSSAPIKeyExchange, but hardly fatal. We have had to make use of SSHv2\'s algorithm agility, so we know it works.  And we know that its downgrade protection works and will work for as long as all of the algorithms offered by the client and server can provide integrity protection for the negotiation vis-a-vis any real-time attacks on those algorithms.  A cryptanalytic break would have to be so complete that an attacker could mount a downgrade attack in real-time," but cryptanalytic breaks of standard algorithms for the past few decades have mostly been incremental rather than suddenly devastating.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,2,2012-07-22 20:22:03,234.93,1,,,"b'b"" Thanks for your input. We have the _capability_ to support different ciphers if we want to; e.g. the client can specify its support with command-line options (out of band) when launching the mosh-server. This is how we would handle the eventuality you discuss. But I\'m not eager to actually add a bunch of ciphers and agility until we have to. There\'s no reason to do it right now as far as I can tell -but let me know if you can think of a reason otherwise. I don\'t understand your message about switching to a new port number -we don\'t have an assigned port number at all!""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,closed,2012-07-23 00:48:58,266.92,3,1,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,reopened,2012-07-23 00:53:20,4.37,3,1,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,3,2012-07-22 20:22:03,52.9,,,1,"b'b"" The reason is testing.  You want to know that the alg agility does work :)  You don\'t need a real alternate ", just a dummy one for testing will do -just make sure that you don\'t actually install built objects with the dummy. As for port numbers, I was referring to the port where the main server listens," like port 22.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,4,2012-07-22 20:22:03,93.37,,,1,"b'b"" We\'re pretty sure the server can read a command-line argument and respond to it. :-) (We are probably already going to need this mechanism for features like scrollback and port forwarding.) Re: port number", this is part of why we don\'t have a well-known port number or want one. The client only needs to learn the port number after he\'s executed the mosh-server, which can then print out whatever port number it wants. Maybe in the future that will be the port number to a moshd multiplexer instead of the individual mosh-server," but it still doesn\'t need to be known to the client a priori.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,5,2012-07-22 20:22:03,984.52,,1,,"b'b"" As I noted in url  unless you\'ve obtained some kind of additional grant of rights under the OCB patent"," you might really want this to work around the iOS licensing issues.  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,6,2012-07-22 20:22:03,1085.17,,1,,"b'b"" We don\'t have iOS licensing issues. We got the necessary rights a few months ago.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,7,2012-07-22 20:22:03,1235.27,1,,,"b'b"" Possibly a strange question (I\'m not an security expert) mosh handshake is through the encrypted and authenticated channel so if the negotiation would be through SSH what are the dangers of negotiation?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,8,2012-07-22 20:22:03,1250.68,,1,,"b'b"" Clearly mosh\'s security depends on SSH\'s.  Algorithm agility for mosh addsno new security problems if the negotiation is done with the protection ofssh.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,306,open,-,-,-,4,4,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,opened,2013-01-03 10:55:42,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,title,2013-01-03 10:55:42,00:00,,1,,"b""b' allow client-side port or port range to be specified'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,body,2013-01-03 10:55:42,00:00,,,1,"b'b"" It would be useful if mosh allowed the client port", or port range, to be specified.  The envisaged scenario is something like:1. set up firewall to pass through UDP port 600012. mosh -p 60001 -P 60001 . or with port ranges:1. set up firewall to pass through UDP ports 6[01]0002. mosh -p 60000:61000 -P 60000:61000 Mosh currently uses a system-assigned port number for mosh-client.  It is therefore not possible to tunnel mosh through stateless firewalls, unless they are set up to allow essentially all UDP through. (This scenario is common for DNS.  For instance, a BIND name server can be configured to always use source port 53 when acting as a client, allowing a port 53-only UDP pass-through on the firewall.) The code for server-side port ranges is already in place, via try_bind(), although this is not currently exposed to the user.  What seems to be required is a modification to the client\'s Connect() to call try_bind() with a port or port range," if specified.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,1,2013-01-03 10:55:42,1196.52,,1,,"b""b' +1'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,2,2013-01-03 10:55:42,341.18,,1,,"b'b\' I\\\'ve tried to modify source codeurl  But when I try to start mosh-client I get the ""MOSH_KEY environment variable not found"" error. And I can\\\'t change mosh because I don\\\'t know Perl(The script doesn\\\'t pass the port range to mosh-client).How can I test my changes?\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,3,2013-01-03 10:55:42,809.75,,,1,"b""b' +1 Mosh looked cool but without a way to get through a firewall it makes it pretty much unusable in a corporate environment'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,4,2013-01-03 10:55:42,1089.9,,1,,"b""b' Duplicate of #296 (now closed).'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,closed,2013-07-08 20:13:03,557.35,0,4,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,5,2013-01-03 10:55:42,1081.35,,1,,"b'b"" Actually", this is not a duplicate of #296; that\'s about specifying a server side port range," this is about specifying a client side port or port range.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,reopened,2016-05-31 14:14:25,1081.37,0,5,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,6,2013-01-03 10:55:42,229.37,,1,,"b'b"" #530 is one solution (though it doesn\'t expose a command line parameter like this issue suggests)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,365,open,-,-,-,0,6,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,opened,2013-01-31 09:10:58,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,title,2013-01-31 09:10:58,00:00,,1,,"b""b' syslog support'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,body,2013-01-31 09:10:58,00:00,1,,,"b'b"" Hello", I\'m using mosh regularly as remote shell, but having it available for a long time I would need syslog support for audit purposes. I looked at #217 , but this requires to manipulate the mosh-server call, but I want to have it configured on the server to report IP changes, or open sessions that have lots of output waiting. As mosh doesn\'t register PTYs in my environment (linux 3.1.10 and 2.6.37.6), when giving access to users via mosh, I have a hard time keeping an eye on usage stats. Only security limits apply then. So my feature request is to behave more like a traditional shell in sense of presence and logging on the server side. Our server environment is (opensuse) linux, IPv4/IPv6 dual stack, clients are linux and mostly OS X in RFC1918 (old) or NAT64 (new) setups. We plan to have all support personal prefer mosh over ssh," as it would solve issues with roaming from UMTS (not our net) to WLAN (our net). (this was an obvious hint on the discussion of #81 ).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,1,2013-01-31 09:10:58,8.37,,1,,"b""b' Hello", Are you compiling mosh yourself? It will register IP address changes (and times that sessions go inactive and reactive) in  if libutempter and its development headers are installed. (Probably libutempter-dev or libutempter-devel.) There will be a warning at ./configure time if libutempter is not available," saying that utmp entries will not be made. But otherwise that may work for you.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,2,2013-01-31 09:10:58,215.4,,,1,"b'b"" Thanks for the info. Up till now I didn\'t compile myself", I was using the package provided via  search. But I do now, and if this is the issue," I\'ll request the change with the packager. Thanks for the answer.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,closed,2013-02-20 13:23:49,252.85,1,2,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,reopened,2013-02-20 13:56:21,32.53,1,2,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,3,2013-01-31 09:10:58,66.2,,1,,"b""b' utempter + utempter-devel are installed (and I can see ssh logins going into the wtmp by using ...utmpdump / But configure fails (see below) Any ideas why? any version"," test or setting is required?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,4,2013-01-31 09:10:58,486.35,,1,,"b""b' You may have an old version of utempter there (with only the old API). The current version seems to be closer to 1.1.5.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,5,2013-01-31 09:10:58,816.23,,1,,"b'b""  is what it is.  It\'s nearly impossible to get anything remotely current on RH without lots of EPEL", DAG, etc. which are unlikely to change in the big shops that freeze their list of RPMs where audit cost lots of time and $.  But that\'s what\'s deployed to ~ millions of nodes.  Change to them = risk of downtime," unintended consequences of other things breaking.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,6,2013-01-31 09:10:58,451.98,,1,,"b""b' RHEL 5 comes with libutempter-1.1.4-4.el5", and RHEL 6 comes with libutempter-1.1.5-4.1.el6," both of which are recent enough. We\\xe2\\x80\\x99re aware that some organizations still use RHEL 4 even though its end-of-life date passed over a year ago.  For that you\\xe2\\x80\\x99ll need to find or compile a newer libutempter yourself.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,387,open,-,-,-,1,6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,406,open,opened,2013-03-27 16:53:00,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,406,open,title,2013-03-27 16:53:00,00:00,,1,,"b""b' predictive echo fails to refresh on vim normal-mode O (capital o)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,406,open,body,2013-03-27 16:53:00,00:00,,1,,"b""b' When I am editing a file in Vim (in normal-mode)", then press (capital-o) to insert a line above the current line," the terminal does not refresh to show the new line until I begin entering text. mosh version I am using:  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,406,open,1,2013-03-27 16:53:00,19.85,,,1,"b'b"" Hello", I can\'t reproduce this. What outer terminal emulator are you using (e.g. gnome-terminal, rxvt, xterm)? How reliably does the issue happen, and can you give more detailed steps to reproduce? Thanks,"Keith""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,406,open,2,2013-03-27 16:53:00,33.3,,1,,"b'b"" I am using urxvt256c", moshing (is this a verb yet?) into a tmux session with vim inside there. Of course, as soon as I submit an issue," I can\'t reproduce it.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,406,open,closed,2013-03-28 12:32:00,1179.0,0,3,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,406,open,3,2013-03-27 16:53:00,739.67,,1,,"b'b"" I run into this often and can reproduce this reliably with mosh+vim. It occurs when pressing before and exactly as the issue describes"," the does nothing and the terminal appears frozen and desync\'d until you type any further text. Using a direction key instead followed by works as expected.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,406,open,reopened,2018-12-24 08:58:07,1226.12,0,4,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,406,open,4,2013-03-27 16:53:00,192.78,,,1,"b""b' What you\\xe2\\x80\\x99re seeing is the application-mode-to-normal-mode translation in []url  In this case has us in application mode so no translation should be necessary"," but the state machine isn\\xe2\\x80\\x99t smart enough to know that so it pauses anyway.  There are some other apparent bugs there too: ESC ESC O A and ESC O ESC O A will slip past without being translated.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,406,open,-,-,-,0,4,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,opened,2013-12-23 20:15:41,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,title,2013-12-23 20:15:41,00:00,,1,,"b""b' Mosh should disconnect when remote is rebooted'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,body,2013-12-23 20:15:41,00:00,,1,,"b""b' When I use ssh and reboot remote a message displaying that remote is rebooted is displayed and ssh session is terminated. mosh needs to be terminated manually. It would be nice to send the disconnection signal to client when server is being terminated.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,1,2013-12-23 20:15:41,24.47,,1,,"b'b"" Generally speaking", Mosh already does this (just tested with a Debian server). if it\'s not working for you," please make sure that your server is sending the kill signal to all processes (including your mosh-servers) before cutting the network. (Also let us know the OS of your server.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,closed,2013-12-23 20:40:09,24.47,0,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,2,2013-12-23 20:15:41,15.33,,1,,"b""b' It did not worked for me on Gentoo (both server and client) with mosh 1.2.4 while it worked with ssh.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,3,2013-12-23 20:15:41,3.03,,1,,"b'b"" You\'ll have to take this up with Gentoo -it needs to send a kill signal (like SIGTERM) to all processes before cutting networking. That\'s how mosh-server knows it needs to quit.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,4,2013-12-23 20:15:41,1347.8,1,,,"b'b"" Sorry for late reply. I have been thought about it a bit and I guess problem should occur at least on all systemd+netctl systems and probably on systemd+NetworkManager (which are probably all Linux distributions but  currently and Debian\'s folks talking about moving to Upstart or systemd). As far as I can tell the correct signal is SIGHUP: Which is sent by systemd but is ignored by the mosh. ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,5,2013-12-23 20:15:41,26.77,,1,,"b'b"" LSB ( 23360) requires that shutdown (and shutdown -r) send SIGTERM", not SIGHUP. We can patch mosh-server to work around this," but please take this up with systemd. And please submit a pull request -we\'d be eager to merge it if systemd is moving in this direction.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,reopened,2014-01-07 19:53:17,1393.13,1,6,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,6,2013-12-23 20:15:41,19.93,1,,,"b'b"" (Sorry I realized I spoke too soon. sshd reacts to SIGHUP while mosh does not but it\'s not the issue). After a thought the ssh displays a message about shutting down while mosh does not. It looks like mosh is terminating uncleanly and too soon (I guess?). Yay for debugging shutdown issues. I\'ll investigate further.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,7,2013-12-23 20:15:41,243.37,,1,,"b'b"" I just tested this on a fresh install of Debian 9 (aka Debian Stretch)", which defaults to using systemd these days, as well as my gentoo machine.  In both cases, the mosh-client exited cleanly, with no need to manually terminate anything.  So now that this appears fixed," I\'m going to close this issue.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,closed,2017-08-26 00:16:23,263.1,2,7,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,8,2013-12-23 20:15:41,191.5,,1,,"b""b' I have made a couple of changes over time that should cause to more robustly terminate the client on a server shutdown in some cases.  If you are still having problems here", and your SSH sessions do terminate promptly and cleanly," please comment here.  (There are still occasionally systems that bring down their network connectivity before user sessions are closed.  That is a different problem which should be addressed at the  level.)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,480,closed,-,-,-,2,8,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,opened,2014-01-29 10:02:37,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,title,2014-01-29 10:02:37,00:00,,1,,"b""b' : Fix hang when remote closes the connection'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,body,2014-01-29 10:02:37,00:00,,1,,"b""b' Signed-off-by: Anders Kaseorg andersk@'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,1,2014-01-29 10:02:37,526.33,,1,,"b""b' @cgull: As a consequence of the confusing way in which GitHub pull requests work", you should leave comments on the central [pull request page]url  not on the author\\xe2\\x80\\x99s commit page. (Line comments go on the [\\xe2\\x80\\x9cFiles changed\\xe2\\x80\\x9d tab]url  That way the comments are not lost when the pull request is force-pushed," and comment notifications go to everyone interested in the pull request instead of just the opener.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,2,2014-01-29 10:02:37,451.95,,,1,"b'b"" Thanks for the tip.Never mind my comment; I tried it and it doesn\'t work"," and your code does.  Neither of them work at the command line.I think the fake-proxy data-passing code could stand a rewrite-but this is a fine band-aid.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,3,2014-01-29 10:02:37,89.03,,1,,"b""b' Pulled.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,closed,2015-06-04 03:49:56,1067.32,0,4,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,4,2014-01-29 10:02:37,0.58,,1,,"b'b"" Open", closed," it\'s a revolving door.  I _did_ pull this fix.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,reopened,2015-06-04 03:50:31,0.58,0,5,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,closed,2015-06-04 03:51:27,0.93,0,5,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,490,closed,-,-,-,0,5,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,opened,2014-02-26 01:07:51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,title,2014-02-26 01:07:51,00:00,,1,,"b""b' locale_:78: error: \\xe2\\x80\\x98CODESET\\xe2\\x80\\x99 was not declared in this scope'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,body,2014-02-26 01:07:51,00:00,,1,,"b'b"" When building", I get this error, seeming to do with locale_utils. I don\'t have sudo access to this machine, so these can\'t be updated:Linux $HOSTNAME 2.6.32-358.18.1.el6.x86_64gcc (GCC) 4.4.7 20120313 (Red Hat 4.4.7-3)libprotoc 2.5.0ncurses5-config version: 5.7.20090207locate zlib: /-devel-1.2.3OpenSSL 1.0.1e-fips 11 Feb 2013 This was on the master branch," give me a minute to try mosh-1.2.4.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,1,2014-02-26 01:07:51,3.7,,1,,"b'b"" The tag mosh-1.2.4 builds correctly. So it\'s a bug in master", I\'ll leave the issue," but close it.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,closed,2014-02-26 01:11:33,3.7,0,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,2,2014-02-26 01:07:51,70.63,,,1,"b'b"" Interesting -I\'d love to prevent a regression before we release 1.2.5. Are you able to help chase this down? The file essentially hasn\'t been touched since Mosh 1.2. What is the line in  ?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,reopened,2014-02-26 02:22:11,70.63,0,3,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,3,2014-02-26 01:07:51,183.9,,,1,"b'b""   returns nothing", same for     Commands run were:  Necessary environment variables: FYI: the server I\'m compiling on is funky: it strips execute rights from files created by a command. I ran and added back the proper rights (although they\'re stripped initially," the use of is unrestricted) until returned no diff from master.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,4,2014-02-26 01:07:51,11.37,,1,,"b""b' Heh... let me fix my environment variables real quick :)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,5,2014-02-26 01:07:51,5.47,,1,,"b""b'   So now it includes for sure.  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,6,2014-02-26 01:07:51,6.7,,1,,"b'b"" The file certainly exists", and what\'s more has defined. I ran again, and then and  ," still the same error. For some reason isn\'t being replaced by the pre-processor with the value defined in  .  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,7,2014-02-26 01:07:51,3.03,,1,,"b""b' Removing the conditional around the and running and again gives me:  Which is certainly a different error as was compiled. So the not being defined is one thing for sure. Now on to debug this.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,8,2014-02-26 01:07:51,1.77,,1,,"b""b' That is definitely broken. Can you paste the first few lines of  "," which contain the Autoconf version?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,9,2014-02-26 01:07:51,2.4,1,,,"b'b"" autoconf (GNU Autoconf) 2.63 Sorry",  , and are my own censors," as I don\'t own the server.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,10,2014-02-26 01:07:51,6.25,,1,,"b'b"" BTW it is not imperative (to me) to get the master branch built on this server. I got the tag to build", and after fiddling, discovered I\'m firewalled completely from listening on any ports. It\'s a student dev server, and I was just hoping to use instead of because, what\'s more, the admins don\'t allow password-less ssh key authentication. I have my own VPS and a of course local VMs. College servers aren\'t the best," it\'s shared by like... a couple hundred students. And I mean you saw how how old GCC was.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,11,2014-02-26 01:07:51,8.8,1,,,"b""b' It would appear that Autoconf 2.64 and earlier choke on our construction. This seems to be fixed by [v2.65~21]url  For now a workaround would be to install Autoconf 2.65 or newer. (You should be able to install it in your home directory without root access.)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,12,2014-02-26 01:07:51,3.8,,1,,"b'b"" How on earth did you figure that so fast? I\'ll give it a shot just so we can know for sure.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,13,2014-02-26 01:07:51,50.22,,,1,"b'b"" I would test with the latest Autoconf", except returns 288 failed tests," which I\'d rather not wrestle with. Thanks for your help @andersk ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,14,2014-02-26 01:07:51,1.65,,1,,"b""b' Alright. Does #503 fix your problem?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,15,2014-02-26 01:07:51,0.47,,1,,"b""b' Give me just a minute"," just added your repo as a remote.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,16,2014-02-26 01:07:51,5.62,,,1,"b""b' Update: it indeed does! At least", it fixes the problem this issue related to. (I have some issues now with protobuf," going to investigate).'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,17,2014-02-26 01:07:51,234.82,,1,,"b""b' Just a datapoint", I get this error when compiling from git, but not when starting from tarball. First," compile protobuf: Now try with github checkout (at 50152bfcba872dd2ef5318877823005ad0c4593f) OK restart with tarball:  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,18,2014-02-26 01:07:51,754.02,,1,,"b""b' To all who scroll to the bottom to get the solution:Here it is #503 '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,19,2014-02-26 01:07:51,64.02,,1,,"b'b"" Pulled #503 months ago"," it\'s in mosh-1.2.5.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,closed,2015-12-11 00:46:28,1344.28,2,15,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,502,closed,-,-,-,2,15,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,opened,2014-05-25 21:18:32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,title,2014-05-25 21:18:32,00:00,,1,,"b""b' mosh-server does not keep eCryptfs home directory mounted (needs PAM session?)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,body,2014-05-25 21:18:32,00:00,1,,,"b""b' Ubuntu 12.04 with the latest updates", Vim  version 7.3.429Mosh server (Ubuntu, amd64), Version: 1.2.4-0~931~precise1 Mosh client (osx): 1.2.4 (installed via brew)When I ssh to the Ubuntu box, I can run vim and quit vim with no problem.But, when I mosh to the Ubuntu box and run vim," I get this message when I try to quit vim: Any idea what is going on here?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,1,2014-05-25 21:18:32,156.45,,1,,"b'b"" Is your home directory on a networked filesystem (AFS", NFS, etc.) that requires authentication?  Also," did you check that .viminfo didn\'t accidentally become owned by root (try ls -l .viminfo)?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,2,2014-05-25 21:18:32,774.62,1,,,"b'b"" No. It\'s on a local hard disk. The home folder is encrypted with eCryptfs.The file is not owned by root: If the problem was file permission"," I suppose the same error should have happened when I used ssh.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,3,2014-05-25 21:18:32,140.13,,1,,"b""b' I found the issue:When I ssh to the Ubuntu box", the encrypted home folder gets mounted automatically. But when I mosh to the Ubuntu box," the encrypted home folder is not mounted automatically. If I mount it with the problem goes away.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,closed,2014-05-26 15:09:44,1071.2,2,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,4,2014-05-25 21:18:32,384.63,,,1,"b""b' Ah", eCryptfs. What actually happens is that pam_ecryptfs maintains a session counter ( ) that is incremented on PAM login and decremented on PAM logout. The temporary SSH session that uses to launch the remote causes a PAM login followed immediately by a PAM logout, so the counter reaches zero and the encrypted folder is unmounted immediately. I don\\xe2\\x80\\x99t think that running a PAM session as a non-root user is a supported operation, so itself cannot cause a PAM login. But this is a problem we\\xe2\\x80\\x99d like to solve, even if we don\\xe2\\x80\\x99t currently have a good solution," so I\\xe2\\x80\\x99ll reopen this in case someone has ideas.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,reopened,2014-05-26 21:34:22,384.63,2,3,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,5,2014-05-25 21:18:32,6.88,,1,,"b""b' (As an example of the kind of amazing horrible things that go _spectacularly wrong_ if you try to run a PAM session as non-root"," I just filed [LP #1323421]url  \\xe2\\x80\\x9cpam_ecryptfs returns twice from fork in error conditions\\xe2\\x80\\x9d.)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,6,2014-05-25 21:18:32,810.48,,1,,"b""b' Prevent auto unmount by deleting ~/-umount'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,7,2014-05-25 21:18:32,900.35,1,,,"b""b' While running mosh 1.2.4a: local$ mosh remoteremote(encrypted)$ cat /-$USER-Private0remote(encrypted)$ ecryptfs-mount-privateFAILremote$ cat /-$USER-Private1remote(encrypted)$ ^Dlocal$ ssh remote cat /-$USER-Private2   (WTF 1)local$ mosh remoteremote(unencrypted)$     (WTF2)remote$ cat /-$USER-Private1   (WTF 3)remote(encrypted)$ ^Dlocal$ ssh remote cat /-$USER-Private2   (WTF 4) ##  This is with a totally empty but "," both in the encrypted and the unencrypted home-folder on remote. Why does the counter add one when disconnecting and subtract one when connecting? '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,8,2014-05-25 21:18:32,225.73,,1,,"b""b' That\\xe2\\x80\\x99s not what\\xe2\\x80\\x99s going on. increments the count by 1 when opening the session", and decrements the count by 1 when closing the session. When you ran  , the ran between this increment and decrement pair. uses a short-lived session to create the session, which increments and then immediately decrements the count," leaving it net unchanged.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,9,2014-05-25 21:18:32,305.42,,,1,"b'b"" We\'d still like to find a better fix for this", but tonight @eminence mentioned a half-decent workaround on #mosh:  upon connecting to the remote host.  will often work as well. This won\'t work all the time," but when it does you still get most of the benefits of mosh.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,529,open,-,-,-,3,6,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,546,closed,opened,2014-09-15 16:49:09,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,546,closed,title,2014-09-15 16:49:09,00:00,,1,,"b'b"" Home / end keys don\'t work in vim under Chrome App""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,546,closed,body,2014-09-15 16:49:09,00:00,,,1,"b'b"" On a macbook pro (which uses fn+left and fn+right for home and end", respectively) running Windows, the chrome app version of Mosh does not correctly implement home / end functionality in vim.  Nano and the terminal work fine.  However, if I open a file in vim and fn+right (end), the cursor simply blinks without moving to the end of the line.  fn+left (home) does not work either. This only seems to affect vim from the applications I\'ve tried. Note that I am aware of #178, but this seems different as changing TERM= does not fix the issue. For reference, echo $TERM prints xterm-256color, the same as if I connect via PuTTY.  However," these keys work fine in PuTTY.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,546,closed,closed,2014-09-15 18:46:45,117.6,0,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,546,closed,reopened,2014-09-15 18:46:46,0.02,0,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,546,closed,1,2014-09-15 16:49:09,125.63,,1,,"b'b"" Looks like the root cause here is an issue with the terminal emulator in url  vs. xterm. Mosh puts the outer terminal emulator in application-key mode", which means that Home and End should generate OSC H and OSC F respectively. (ESC O H and ESC O F) The mosh-chrome terminal emulator is just sending CSI H and CSI F (ESC [ H and ESC [ F) which vim isn\'t expecting. (I should note that debugging this made me realize that Mosh _also_ isn\'t perfect," in that it doesn\'t properly translate Home and End for applications that use ANSI cursor key mode. But I don\'t think that\'s the problem here.) Probably best to open an issue with mosh-chrome and let them figure out if they need to report an issue upstream to hterm.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,546,closed,closed,2014-09-15 18:54:47,8.02,0,2,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,546,closed,2,2014-09-15 16:49:09,7.65,,,1,"b""b' Alright"," opening an issue with them.  Did not realize it was a different project.  Thanks!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,546,closed,-,-,-,0,2,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,opened,2015-05-20 14:56:33,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,title,2015-05-20 14:56:33,00:00,,1,,"b'b\' Suspend and ""export""  mosh sessions\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,body,2015-05-20 14:56:33,00:00,,,1,b'b\' Let\\\'s say I have an active mosh session on one machine," and want to ""move"" it to another one. If mosh would allow to export its internal cryptographic state (and network addresse) into a single base64 blob and to re-use that when starting up again it would be easily possible to eg. move an active"," authenticated session to the smartphone (eg. via  of that ""secret""). In other words: this would be a ""cold-state"" suspend-to-disk equivalent to the available Ctrl-^ Ctrl-Z suspend functionality. My take on the security implications is if you have access to the mosh process", you can it anyway and discover all needed details so I don\\\'t think this presents any additional risks.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,1,2015-05-20 14:56:33,1320.15,,1,,"b""b' This more or less duplicates #394; the best solution currently is screen or tmux.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,closed,2015-05-30 12:56:42,1320.15,0,2,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,2,2015-05-20 14:56:33,111.37,1,,,"b'b"" Sorry", no, that\'s not a duplicate.This issue is about _exporting_ the state, so that another device can take over the active connection. Yes, #394 is similar," but not the same.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,3,2015-05-20 14:56:33,25.92,,1,,"b'b"" Well", I see this as a slight superset of that, the extra bit being  clients from multiple machines attempting to access the same session, and the discussion in #394 touches on that. Keep in mind that for Mosh," the state is more or less the same on both client and server and could be exported by either side.  But perhaps I\'m misreading?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,4,2015-05-20 14:56:33,866.58,,1,,b'b\' Well, AFAICT the server can\\\'t know (and currently won\\\'t get told and won\\\'t remember) the outside-visible address that the client accessed (which might be different because of DNAT). But yes, of course it could create a new crypto state. I think as soon as the _server_ side does the the next requested feature is to have multiple clients connect to one server," because it\\\'s just another small step... IMO telling the client to ""suspend to disk"" via some keyboard combination and then starting it again makes it more clear that server:client is a 1:1 correspondence. The user (""client"") could be assured that she\\\'s the only one", and there\\\'s not someone else piggybacked on the same mosh server instance.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,5,2015-05-20 14:56:33,1066.88,,,1,"b'b\' Aside from the question of ""what is Mosh\\\'s security model"," and what new features are acceptable?""... Well", I had envisioned the server continuing to use the same crypto state.  You have a good point about not having full knowledge of client state at the server end, though. Some thoughts I\\\'ve had about this issue:If you adopt a security model where you trust all your clients all the time (and I think you must in any case), then the clients can cooperate and each send their own unique identifier with each packet.  The server tracks which identifier it\\\'s currently using, and when a new identifier appears," it can choose which to use-continue with the old one or switch to the new one.  A better name of the action involved might be """"", like screen and tmux-the difference here is that you can have only one client active at any time, and that you get a very-confidential blob of session state to convey from the detached client to the newly attaching one.  You\\\'d have the detach action attached to some new escape sequence, say  , and the user would have to consciously invoke it.  If the blob\\\'s small enough, the detaching client could print it to console on the way out, and it would never be data at rest on the mosh-client machine.  The user could  it to their new mosh client, wherever it is.  (Of course, putting this info on your environment\\\'s clipboard .  mosh-agent, anyone?) I\\\'m not keen on the idea of having a single session\\\'s server allow multiple clients.  I think it\\\'s a _lot_ more than just another small step to do that, and  do a way better job than mosh could hope to achieve with its current popularity.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,reopened,2015-06-01 23:27:27,630.75,1,4,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,closed,2015-06-01 23:27:31,0.07,1,4,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,reopened,2015-06-01 23:27:38,0.12,1,4,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,6,2015-05-20 14:56:33,206.33,1,,,"b""b' This feature request scares me from a cryptographic perspective. The mosh-client internal state includes a cryptographic nonce that must never be reused", and I worry that if you allow the state to be serialized, it would be hard to stop users from unknowingly compromising their own security. We could solve this by adding a way to negotiate a new session key for each resume, but that means protocol changes and extra security-critical complexity. Also, from a terminal perspective, the existing C-^ C-z support is incomplete (e.g. #505)," and such problems would be compounded if mosh-client was allowed to resume on a different terminal.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,7,2015-05-20 14:56:33,32.85,,1,,"b'b"" @phmarek"," what is your use case here?  What does having a movable client session state get you that you can\'t have with independent mosh sessions and  on the server?  I\'m not seeing the value in this proposal.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,8,2015-05-20 14:56:33,113.32,,,1,b'b\' @cgull, it\\\'s exactly your second point above. Single client at any time," but allowing to ""move"" to another device.While I don\\\'t have a problem using the clipboard for that", I agree with @andersk that negotiation of a new key might be a good idea. In this case, the issue becomes  a shared key (from which all other values can be derived); I guess that 32 bytes == 256 bit == 52 base64 characters (plus server IP and port) should be small enough for . If it gets smaller, even typing would be possible (if \\\'\\\'0OiI1\\\'\\\' are not all used, perhaps ;) My final use case is having a statically compiled mosh-client on my smartphone, that gets its crypto-state from some other device. Eg. \\\'\\\'mosh \\\'\\\' on the notebook, then export the session, and re-start it on the smartphone in a terminal.This way I can avoid to have quite a few things on the phone: a) the SSH Key b) a perl binary c) all the various libraries.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,9,2015-05-20 14:56:33,1278.02,1,,,b'b\' I\\\'m still a little confused about how this would work in practice.  Assuming you had the most flexible implementation of the feature, what does the work flow look like.  Let\\\'s start by assuming that you are sitting in front of your desktop in your home," and have run ""mosh user@"".  At some point you get up from your desktop and want to continue the session on your mobile phone. So you issue a command to mosh-server", which causes it to write some state to disk, and the you close mosh-client.  How do you get that state on  over to your mobile phone?  Maybe you ssh from phone to , and copy it over via scp? Or a system clipboard on your phone?  \'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,10,2015-05-20 14:56:33,15.5,1,,,b'b\' Now that @andersk has explained his worries, I\\\'m scared too, because I can easily construct a foot-shooting scenario that doesn\\\'t even need any help from your friendly local nation-state surveillance agency:user detaches original mosh client, gets session state, copies ituser tries to attach with new mosh client, pastes state, startup fails for whatever reason (probably network connectivity)," but in a way that has traffic observable by an adversary.user goes "" didn\\\'t work""", repeats on his other phone.  **Oops**. The Perl argument doesn\\\'t hold much water, since it\\\'s already been rewritten at least twice in C/C++, and in this scenario you might just as well use mosh-client directly anyway. And it seems to me that there\\\'s a workable already-secure and already-available solution to this problem:  Use .  On your existing mosh session, start a new mosh-server.  Convey the  you get from this server to the new device, the same way you\\\'d have copied the entire session state.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,11,2015-05-20 14:56:33,266.48,,,1,"b'b"" Well", my workflow was described by @cgull in the meantime. I didn\'t know that \'\'mosh-server\'\' and \'\'mosh-client\'\' are that easy to combine... Well, the command line help \'\'Usage: mosh-client IP PORT\'\' could mention the \'\'MOSH_KEY\'\' environment variable, too, but otherwise that looks more or less like what I want, thanks a lot! Now all I need is a static build of mosh-client," and some patch to make it  as per android standards (to keep memory usage low).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,closed,2015-06-03 07:19:57,472.32,4,5,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,608,closed,-,-,-,4,5,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,opened,2015-06-09 04:11:35,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,title,2015-06-09 04:11:35,00:00,,1,,"b""b' 1.2.4.95rc1 pre-release'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,body,2015-06-09 04:11:35,00:00,,,1,"b'b"" So here\'s build + packaging for 1.2.4.95rc1.  @keithw", would you review this? package build and install worksFedora build and install worksMac OS X package is still brokenI\'m talking to the FreeBSD ports maintainer, he seems happy to pick up the new version once we get to it As for pushing the new packaging to  and to , who does that?  @keithw, me," Yoda?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,1,2015-06-09 04:11:35,64.72,,,1,b'b\' Great," I will take a look at this tomorrow! Then we should email the mosh-devel and mosh-users mailing lists and ask for testing. I will also deploy the server at MIT so we can see if we hear any reports. For packaging:I upload the packages to Debian unstable. I will want to upload the prerelease and make sure it builds before doing the real release.@achernya is the Fedora maintainer. We will want him to attempt a test build of the prerelease.The Ubuntu ppa:-dist repo automatically tracks our ""stable"" ref in this repo.The Ubuntu ppa:-dev repo tracks master (and has been tracking it).\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,2,2015-06-09 04:11:35,554.77,,,1,"b'b"" @achernya", sure," I\'ll take it out.  You\'re welcome to take my edits and put your name on them.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,3,2015-06-09 04:11:35,1.03,,1,,"b""b' Wait", I disagree. If we\\xe2\\x80\\x99re going to include a  ," then it should correspond to the new version in the commit that we tag with the new version. It need not correspond with what\\xe2\\x80\\x99s in Fedora at the time the commit is made. Fedora isn\\xe2\\x80\\x99t pulling the spec file out of our VCS or anything. The primary use case for having in our VCS (if we have one at all) is for non-Fedora users or people who otherwise want to build their own RPMs. And that doesn\\xe2\\x80\\x99t work if we always release Mosh with the previous version\\xe2\\x80\\x99s spec file.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,4,2015-06-09 04:11:35,34.68,,1,,"b""b' @andersk is right", I think.  Plus, we want an up-to-date file in the prerelease so that anyone who  to test by deploying the prerelease can do so.  And there should only be a monotonic sequence of changes in that file.  So I think the answer here is for us to include changes in this and the 1.2.4 version number bumps.  Then, if Fedora requires it, @achernya can add a 1.2.4-2 version to the spec file, push that to Fedora as its initial 1.2.4 release," and commit it here.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,5,2015-06-09 04:11:35,2.22,,,1,"b'b"" Fedora has no such requirement. I committed  out of convenience for other users of mosh", but the intention was always to keep a mirror copy of Fedora. I would strongly prefer they not go out of sync; and as such, they have slightly," since I\'ve not yet gotten around to submitting a PR with the latest changes. I\'m happy to provide an updated version.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,6,2015-06-09 04:11:35,16.55,,,1,"b'b"" I\'m happy to take PRs from you before  1.2.4.95 and 1.2.5"," if that\'s what\'s needed.  Does that work for you?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,7,2015-06-09 04:11:35,0.1,,,1,"b""b' Who benefits from us keeping an out-of-date mirror of the Fedora spec? (It would be necessarily out-of-date"," because the Fedora release happens strictly after our upstream release.) Anyone looking for the Fedora spec can find it in the [usual Fedora place]url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,8,2015-06-09 04:11:35,2.43,,1,,"b'b"" Also"," I am not that familiar with the  ecosystem.  Are there RPM distros that don\'t descend from Fedora?  That would indicate that our should be authoritative.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,9,2015-06-09 04:11:35,0.38,,1,,"b'b\' @andersk It won\\\'t be. I will send @cgull a PR later today bringing us into sync. Plenty of other RPM based distros have used the ""native"" mosh spec in this repository as their starting point.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,10,2015-06-09 04:11:35,9.23,,1,,"b'b"" imho in git should be renamed to and contain autoconf macro and thus should appear in release tarball only. aside", pld linux (not descendant from ) has own .spec," and don\'t really care what is in mosh own repo: url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,11,2015-06-09 04:11:35,59.55,,1,,"b""b' Let me try to list all the ways I can think of in which our  could work (assuming we want to keep one at all)", so we can compare their advantages and disadvantages. Feel free to suggest others.1. We release mosh-1.2.5 without a  update; the Fedora maintainer asynchronously submits  updates via PR to master. This means we never create our own unofficial versions of , but it also implies that what we tag as mosh-1.2.5 includes the spec file for 1.2.4, and so on, which seems poor.2. We do our own unofficial version bumps in  at upstream release time; the Fedora maintainer asynchronously submits additional updates when desired via PR to master (perhaps replacing our unofficial RPM changelog entry with the official version bump).3. We make  automatically generated. Users need to run the configure script to get a spec file, but otherwise, the result is essentially equivalent to (2).4. Coordinating with the Fedora maintainer, we synchronously block Mosh releases on the corresponding Fedora releases so that the new spec file can be included.5. We remove  from master and put it on its own Git branch; when the new Fedora spec file is ready, the corresponding upstream release is merged into that branch, so that its contents are consistent with the spec file. Users need to checkout a separate branch to find the spec file. I think (2) or (4) is clearly best for users. (2) is easier to maintain, but (4) may help us catch Fedora-specific problems earlier if everyone involved is willing to commit to that coordination; I don\\xe2\\x80\\x99t have a strong preference between these two. It\\xe2\\x80\\x99s not clear what would be best for RPM distributors who want to treat our  file as authoritative (perhaps (5)?), but as far as I know," no such distributors exist.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,12,2015-06-09 04:11:35,307.97,,,1,"b'b"" Re  : I think we\'ve basically been doing (4) all this time", and this is what @achernya is proposing to do here as well (send us a PR to update  ), so as far as I\'m concerned I\'m happy with that plan. I don\'t think the pre-release needs to block on this though. Should I be concerned about these make errors at the end of the compile? I assume not," but is there any way to clean this up?  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,13,2015-06-09 04:11:35,7.45,,1,,"b""b' I think we have a blocking bug involving resize handling -I am going to close this PR for now and open a new bug for it. :-('""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,closed,2015-06-09 21:52:40,1061.08,0,8,7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,14,2015-06-09 04:11:35,1.17,1,,,"b'b"" I normally send a sync PR for  after the release", since the official tarball doesn\'t (unless this changed recently, and IMO shouldn\'t) contain it. The fact that the git tag includes a  directory is a bit unfortunate, but the right way to fix that would be to move both debian/ and fedora/ to their own branches, thereby sidestepping the problem. If you want a  ahead of the release," I can provide it before we commit to Fedora.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,15,2015-06-09 04:11:35,2.33,,1,,"b""b' Issue at url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,reopened,2015-06-09 21:56:10,3.5,1,9,7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,16,2015-06-09 04:11:35,2.22,,,1,"b'b"" @achernya: Sounds good. I don\'t think it has to be perfect"," but please do send a PR with your best guess of the 1.2.5  whenever you have it. (The more important thing is just making sure the pre-release builds and runs properly on Fedora once we have one.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,17,2015-06-09 04:11:35,250.3,,1,,"b'b"" @keithw:  I revisited the Makefile issue.  I knew it was a teeny bit wrong", but it\'s actually more wrong than that-the version-file generation ignores too many errors.  I now have a fix for that, but not for the recipe being run twice (but that\'s harmless," since it doesn\'t rewrite the target if it\'s not changed).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,closed,2015-06-10 06:17:48,501.63,1,10,8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,18,2015-06-09 04:11:35,1118.92,,,1,"b'b"" @achernya:  I looked at the  issue a while back"," and now I more fully understand how RH package specs do benefit from living separately from their source packages.  So I\'ll welcome a PR from you with a new spec for 1.2.5 once we get to that point.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,625,closed,-,-,-,1,10,9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,opened,2015-06-10 06:51:56,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,title,2015-06-10 06:51:56,00:00,,1,,"b""b' Fix bash_completion (location and contents)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,body,2015-06-10 06:51:56,00:00,,1,,"b""b' Our bash_completion file allegedly has the wrong contents:url  And gets installed in the wrong location:url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,1,2015-06-10 06:51:56,20.77,,1,,"b""b' Partial dup of #518 '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,closed,2015-06-21 20:30:23,818.45,0,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,2,2015-06-10 06:51:56,1307.0,,1,,"b""b' This is going to break bash completion on older systems like Ubuntu 12.04 precise. The new location is only supported by bash-completion \\xe2\\x89\\xa5 2. We need to do something like then install to  "," and have the Debian package build-depend on bash-completion.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,reopened,2015-06-22 04:59:42,509.32,0,4,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,3,2015-06-10 06:51:56,297.5,,1,,"b""b' @andersk Please introduce something like enable-completions-compat for old systems. Your proposal adds automagic based on the packages installed on the build system"," which is something that should be avoided.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,4,2015-06-10 06:51:56,196.17,,1,,"b'b"" Wups", I got mixed up on finishing this fix.  url  suggests using dh_bash-completion at install time.  Now I just need to find out how far back **that** is available.  I assume we\'d install directly to the old location otherwise. There\'s also the question of backward compatibility for the features the new completion support uses. Also," non-Debian systems.  I saw mention that other distros already (always?) used  .""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,5,2015-06-10 06:51:56,225.8,,,1,"b""b'   exists on all Debian and Ubuntu releases that are still supported.It depends on the bash-completion version", not the distro. is a new feature of bash-completion 2. It\\xe2\\x80\\x99s not just a different directory name; it has different semantics as well, in that bash-completion loads files from there dynamically on demand, rather than all at once on shell startup. To be sure that something funny isn\\xe2\\x80\\x99t going on, I checked that bash-completion 1.3 on RHEL 6 (EPEL) does not support  ," and bash-completion 2.1 on RHEL 7 does.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,6,2015-06-10 06:51:56,134.92,1,,,b'b\' Sorry," I wasn\\\'t clear.  For ""backward compatibility"""," I really meant ""the helper functions used by the new completion snippet"". I\\\'ll work on it tonight", but if anybody experienced in these issues wants to contribute, please do-I have little knowledge about bash completion.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,7,2015-06-10 06:51:56,649.38,,1,,"b'b"" I\'ve reverted my original commit-it was more broken than I originally thought.  I think I have a better fix", but it needs more testing.  I\'ll put it up as a PR first," probably tomorrow.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,8,2015-06-10 06:51:56,1401.85,,,1,b'b\' @andersk, @mrueg, @achernya, please review url It\\\'s a much more complete resolution of this issue. It\\\'s tested on Ubuntu 15.04, 14.10, 12.04, and Raspbian (but the conffile issue was only tested on 14.10). turns out to be useless, it still has hard-coded.  The helper functions are available way back, so they are OK. @mrueg," I think the answer to your request is ""build dependencies"" (which this diff has).  If that doesn\\\'t work for you", there\\\'s always  . I\\\'m thoroughly amazed at how much time this has eaten.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,closed,2015-06-25 23:56:55,1137.22,1,7,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,628,closed,-,-,-,1,7,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,opened,2015-06-15 12:52:59,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,title,2015-06-15 12:52:59,00:00,,1,,"b""b' Fix signal handler'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,body,2015-06-15 12:52:59,00:00,,1,,"b'b\' [The variable ""got_signal""]url  should [use the data type ""sig_atomic_t""]url I guess that a different program design will be needed for your function ""[handle_signal]url "".\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,1,2015-06-15 12:52:59,841.33,,1,,b'b\' To quote the GNU libc manual: While would be more correct, there\\\'s been no known reports of problems with this code," so I\\\'m going to close this issue under the ""if it ain\\\'t broke"," don\\\'t fix it"" rule :)\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,closed,2018-01-18 02:54:19,841.33,0,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,2,2015-06-15 12:52:59,258.58,,1,,"b'b\' * Do you care if the access to an array element of a class attribute is still [atomic]url  ""atomic types"")? * Can it be needed to mark the corresponding data type as [volatile]url  ""volatile type qualifier"")?\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,3,2015-06-15 12:52:59,62.55,,1,,"b""b' This seems like a legitimate issue that might as well be fixed"," even if it\\xe2\\x80\\x99s incredibly unlikely there are any real systems it can affect.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,reopened,2018-01-18 08:15:27,321.13,0,5,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,4,2015-06-15 12:52:59,1431.82,,1,,"b'b\' Please take another look at [corresponding software design aspects]url  ""Article \\xe2\\x80\\x9cAccessing shared atomic objects from within a signal handler in C\\xe2\\x80\\x9d by Robert C. Seacord (2014-04-24)"").\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,5,2015-06-15 12:52:59,11.05,,1,,"b""b' @elfring There\\xe2\\x80\\x99s no need for condescension. If you think we have a specific disagreement"," state it.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,closed,2018-01-21 23:17:45,902.3,0,7,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,634,closed,-,-,-,0,7,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,opened,2015-07-23 20:50:32,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,title,2015-07-23 20:50:32,00:00,,1,,"b""b' Address system() call portability'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,body,2015-07-23 20:50:32,00:00,,1,,"b'b"" The command is not available on all machines. It\'s totally unnecessary to run on line 316 of mosh_. I vote to remove it.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,1,2015-07-23 20:50:32,6.13,,1,,b'b\' Arguments for keeping it: (1) Mosh only tries to run it if the user\\\'s configuration is already broken and we need to print a diagnostic message. The diagnostic message needs to be verbose and explanatory because this is a confusing area, Mosh is more pedantic than most programs," and nobody wants to believe that their configuration is actually broken. (2) Having ""locale"" is a  Unix Spec requirement (since 2001). Every POSIX system has it. (3) A missing locale is a nonfatal error. (And mosh is already quitting already when we get to that point!) (4) If a system really doesn\\\'t have it", the distributor could remove it on that architecture. Arguments for getting rid of it: (1) Which platforms are we talking about that don\\\'t have it?\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,2,2015-07-23 20:50:32,1.05,1,,,"b""b' On 24/07/15 06:50 AM"," Christian Stewart wrote:ugh .. execing system() is a generally bad idea. Use ofexecve() is much better. ## James C. McPherson OracleSystems / Solaris / Coreurl '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,3,2015-07-23 20:50:32,2.42,,1,,"b'b"" the code bloat around execve() proper handling (fork() etc) is not worth of it. if you use system() with constant parameters (not coming from any user input)"," it\'s not  that big security issue.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,4,2015-07-23 20:50:32,3.82,,,1,"b'b"" The system that doesn\'t have it is an ODROID XU3 running a Buildroot system which uses Busybox as the core.  I don\'t think executing a system() call just to output some debug information is justified. The user already knows they have a locale problem", does running really output valuable enough information to not just tell the user to go do it themselves? I\'m writing a buildroot cross-compilation package for Mosh at the moment which is why I\'m dealing with these edge cases. I think in something SSH-like and security-oriented like Mosh," portability should probably be emphasized. Calling the command seems really against that.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,5,2015-07-23 20:50:32,7.05,1,,,b'b\' Yes, in practice, we have had a lot of user confusion around mismatched locales (and Mosh\\\'s strict enforcement of a working configuration before starting up)," which made us make this error message more and more verbose way back in Mosh 1.2 (released April 2012). We often have to ask users to paste the full error message so we can diagnose the problem. The ""locale"" section has been helpful to see what is going on", e.g. which vars are being set explicitly and which are inferred! If you\\\'re porting Mosh to a non-POSIX system that doesn\\\'t have the command," here are some of your options: (1) Comment out the line. Nothing horrible will happen. (We\\\'d appreciate if you made it print something out like ""locale information omitted for Buildroot port"" so just in case a user pops up with this error message and somebody is trying to debug it"," we won\\\'t be confused why the locale information is missing.) (2) Leave the line in. Nothing horrible will happen; it is literally the last thing that mosh-server does before ""exit( 1 )"". And failure is nonfatal anyway! (3) Implement a locale command", either as a real command in the filesystem or by writing some code in your Mosh port to print similar output.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,6,2015-07-23 20:50:32,7.43,,1,,"b'b"" @keithw Alright"," fair enough. I\'ll have a patch sequence in Buildroot that removes the lines and adds another debug output line: Let me know if you need anything else for debugging purposes. Closing this.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,closed,2015-07-23 21:18:27,27.92,2,5,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,7,2015-07-23 20:50:32,1384.02,,1,,b'b\' Would you guys be open to checking if the command exists before attempting to execute it, and if it doesn\\\'t exist," printing out a debug line saying ""locale command does not exist on this system""? This is a request to me from the buildroot maintainers. They would prefer to not have a local patch for the package.\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,reopened,2015-07-27 20:22:27,1384.0,2,6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,8,2015-07-23 20:50:32,57.35,,1,,"b""b' That is precisely how Mosh behaves today"," except that the debug line is spelled instead of  .'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,9,2015-07-23 20:50:32,15.48,,1,,"b'b"" @andersk Ah", I see. But that error is coming from the system level," you don\'t actually check it exists before executing it.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,10,2015-07-23 20:50:32,1.22,,1,,"b""b' Is there something wrong about making the system check for us?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,11,2015-07-23 20:50:32,2.6,,,1,"b'b"" No"," it\'s okay. I was requesting on behalf of the buildroot maintainers. I think we\'ll remove the patch from our end and just let it fail like that as you say. Thanks.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,closed,2015-07-27 21:39:06,76.65,2,9,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,650,closed,-,-,-,2,9,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,opened,2015-09-21 08:40:21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,title,2015-09-21 08:40:21,00:00,,1,,"b""b' bash completion on OS X and homebrew not working '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,body,2015-09-21 08:40:21,00:00,1,,,"b'b"" bash tab completion in OS X not working", error message is it looks like bash-completion 1.3 which homebrew installed," doesn\'t include  ref: url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,closed,2015-09-21 09:45:46,65.42,1,1,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,reopened,2015-09-21 09:45:49,0.05,1,1,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,1,2015-09-21 08:40:21,393.42,,,1,"b""b' Works like a charm! Thanks!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,2,2015-09-21 08:40:21,1432.93,,1,,"b'b"" So"," what\'s the best way to fix this?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,3,2015-09-21 08:40:21,4.05,,1,,"b""b' Update your / with following content:  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,4,2015-09-21 08:40:21,902.37,,,1,"b'b"" bash-completion 1.3 is ancient", but I think it\'s used because OS X uses bash 3.2 (and now it\'s also as well).  Newer versions of bash-completion only support bash 4.1 and later, and are of course found on recent Linux distributions.If we can write a completion that works with both versions," that\'d be great.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,closed,2016-03-31 04:52:59,1147.17,1,3,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,5,2015-09-21 08:40:21,360.33,,,1,"b""b' @cgull thanks very much!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,6,2015-09-21 08:40:21,425.05,1,,,"b'b\' Am I the only one having this issue with mosh 1.2.5.95rc1 ?I did a ""fresh"" reinstall using :brew uninstall moshbrew install HEAD moshmosh versionmosh 1.2.5.95rc1 [build mosh-1.2.5.95rc1-1-g274b5a4-dirty]Copyright 2012 Keith Winstein mosh-devel@License GPLv3+: GNU GPL version 3 or later url This is free software: you are free to change and redistribute it.There is NO WARRANTY", to the extent permitted by law. OSX El Capitan 10.11.5 bash versionGNU bash, version 3.2.57(1)-release (x86_64-apple-darwin15)Copyright (C) 2007 Free Software Foundation, Inc.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,7,2015-09-21 08:40:21,1347.88,,1,,"b'b"" @petitchevalroux I didn\'t upgrade mosh to dev version"," but copied url  to ... ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,8,2015-09-21 08:40:21,421.72,,1,,"b'b"" @georgexsh just did your tips (and reinstalling 1.2.5 from brew) ... and it\'s ok. TY  ;-)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,9,2015-09-21 08:40:21,628.73,,1,,"b""b' @petitchevalroux"," what problem were you having with completion?  It works for me after with both OS X bash 3.2.57 and brew bash 4.3.42.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,10,2015-09-21 08:40:21,131.22,,1,,"b'b"" @cgull I fixed it using @georgexsh tricks. The problem occured with stock macosx bash"," it\'s why you didn\'t have the problem imho ;)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,675,closed,-,-,-,2,7,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,opened,2015-12-20 21:50:07,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,title,2015-12-20 21:50:07,00:00,1,,,"b""b' Poor in-flight performance'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,body,2015-12-20 21:50:07,00:00,,,1,b'b\' I just started using mosh and was expecting it to be a great fit for in-flight terminal use. However," I\\\'m airborne now and the performance is poor. Here\\\'s what I\\\'ve noticed:Predictive typing seems disabled almost all of the time.I repeatedly see the banner message regarding ""Last contact..."" (frequently) or (more rarely) ""Last reply..."" While that is happening the entire terminal seems locked down. Together these two problems pretty much render mosh unusable\\xe2\\x80\\x94  is actually more interactive :-(. Without knowing much about how works", I suspect that the problem has to do with some kind of strange UDP packet filtering or selective dropping that JetBlue is doing on their FlyWi service. If someone can give me some guidance about the diagnostic output that would be helpful I\\\'d be happy to debug this again in a few weeks on my flight home.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,1,2015-12-20 21:50:07,124.35,1,,,"b'b"" I\'m on a United Airlines flight right now using _their_ wi-fi", andit\'s working about as well as I\'d expect for 700ms latency. If you\'re still on your flight, two debug things will be useful: tcpdump capture of the mosh session.  Look for packets every 3seconds from client and server when the terminal session.  When youare typing, you should see the client sending a UDP packet for eachcharacter typed, basically, and a reply from the server in aboutRTT+20ms. and  will get you logs of packet transmission and reception. Do you know which inflight Internet provider your airplane uses?(Quite possibly Gogoair, which is _not_ what\'s on my aircraft.) If you\'re getting better function with ssh than with mosh, that soundslike you\'ve got a connection with 3s+ latency but relatively lowloss.  In that situation mosh will start complaining and ssh will workbut very slowly. As for the prediction, that works better in some apps than others.  Ifyour app updates something elsewhere on the screen with everycharacter (ie cursor position on a status bar)," prediction can\'t copewith that.  It only really works with apps that send text to theterminal more or less as an echo of what you typed.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,2,2015-12-20 21:50:07,14.92,,1,,"b'b"" Two more things: If the tcpdump capture shows the client changing its source portfrequently"," then something is probably killing off UDP sessions.There\'s not much mosh can do to solve that.  Use a VPN to get aroundthat. I\'m not sure exactly what happens to prediction when the overlaymessages are displayed (the banners that you see).  It\'s possible thatprediction stops when the overlays are drawn.  I\'ll look at that abit.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,3,2015-12-20 21:50:07,216.58,,,1,"b""b' (Hi Geoff!) You might also try the option"," which abandons any attempt to avoid false positives and just echoes every keystroke.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,4,2015-12-20 21:50:07,774.05,,,1,"b'b"" Thanks @cgull and @keithw. I\'m back on the same carrier (JetBlue) and just performed the debugging steps you suggested on their in-flight network (the free plan on FlyFi", although perhaps the paid plan is better). The output is [here]url  but doesn\'t seem to allow a verbose option. I also have a screencast if that helps but I\'ll upload it later. I think that @cgull\'s suspicions about changing ports frequently is spot on, based on my largely  -knowledge-free perusal of the logs. A VPN is probably the way to go, although I wonder if the port jumping could be made a bit less disruptive... @keithw: the option doesn\'t help much, since what is really ruining performance is the repeated banners and reattempts by to connect. Thanks for your help," and hope this helps in some way. Otherwise is a very impressive tool. Kudos.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,5,2015-12-20 21:50:07,133.62,,1,,"b""b' Yeah", that log is pretty dire.  mosh-client is port-hopping every10-20s, because communications on any given UDP session is blocked after3-6 seconds or so. One idea:  try running mosh-server on a port commonly used by-1194,1701, 500 come to mind. regards," jh'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,6,2015-12-20 21:50:07,11.03,,1,,b'b\' Hmm.  Much like the RTT estimation already running in mosh," we could have some kind of time estimation related to ""connection"" failure", so that Mosh would adapt automatically to frequent failures like this.  I feel like that would be gaming a firewall in this case, though.  Mosh _does_ expect its network to operate normally at least once in a while.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,7,2015-12-20 21:50:07,638.67,,1,,"b""b' Closing; this appears to be the work of a firewall"," not any particular fault in Mosh itself.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,closed,2016-01-13 05:43:20,473.22,2,4,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,8,2015-12-20 21:50:07,815.6,1,,,"b'b\' @gchallen I\\\'m a bit confused. The banner message (""Last contact"" meaning both directions are broken"," or ""Last reply"" meaning the uplink is broken) is just an overlay; it does not lock down the terminal. You should be able to keep typing with no problem and see the keystrokes show up if predictions are on (or forced on with  )", whether there\\\'s a banner being shown or not. That\\\'s the intended behavior, at least. I just tested by making a connection with and then turning off my Wi-Fi. I was able to keep typing indefinitely and see the echoes, even as the banner started counting up to infinity. It looks like mosh-client is switching source ports because the existing port has been shut off by the  after a few seconds. Even after switching its outgoing datagrams to a new source port," mosh-client will continue to accept replies on the old port just in case. Switching ports doesn\\\'t cause a performance impact that I know of. will accept valid datagrams coming from any port; it\\\'s not like there\\\'s a handshaking penalty. I think the unfortunate summary here is that the NAT or firewall on the plane doesn\\\'t like long-lived UDP connections and stops forwarding them (leading mosh to eventually time out and switch ports to make the NAT think there\\\'s a new ""connection"," but this dance is pretty painful when it occurs over and over again). Honestly the fix probably involves making mosh-client switch outgoing port numbers more often. (Or, using TCP... :frowning:)\''
mosh	701	closed	9	nicowilliams	2015-12-20 21:50:07	108.68		+1		b'b"" Maybe mosh should make its source port hopping timer shorter once it\'s tripped twice in short succession and it has seen source port hopping work at all.  Then lengthen the timer again later.  Adaptive timouts, basically.""'
mosh	701	closed	10	cgull	2015-12-20 21:50:07	8.23		+1		b'b"" @gchallen, do you still have the screencast?  Seeing that will help us understand what\'s going on with predictive typeahead.""'
mosh	701	closed	reopened	 - 	2016-01-13 21:15:51	932.52	3	6	3
mosh	701	closed	11	gchallen	2015-12-20 21:50:07	1122.23	+1			b'b"" Sorry... just saw this now. Yes, through the magic of Dropbox\'s undelete function I do have the screencast: url ""'
mosh	701	closed	closed	 - 	2016-03-29 19:45:08	1349.28	4	6	3
mosh	701	closed	12	cgull	2015-12-20 21:50:07	546.35	+1			b""b' I looked at that screencast at the time, maybe we confirmed on IRC but I forgot to follow up here:  I think the behavior seen there is pretty consistent with loss of connectivity as I think is happening here.'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,701,closed,-,-,-,5,6,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,opened,2016-03-10 15:25:36,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,title,2016-03-10 15:25:36,00:00,,1,,"b""b' SIGSEGV in mosh-server on debian sid'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,body,2016-03-10 15:25:36,00:00,,1,,b'b\' Hi, I guess I need a little help to provide useful information on this, but I have a problem with the mosh-server process not starting up properly on debian sid. I noticed the problem first yesterday (9.3.) morning when trying to login into my server. Starting the process manually on the affected system yields: $ mosh-server MOSH CONNECT 60001  mosh-server (mosh 1.2.5) [build mosh 1.2.5]Copyright 2012 Keith Winstein mosh-devel@License GPLv3+: GNU GPL version 3 or later url This is free software: you are free to change and redistribute it.There is NO WARRANTY, to the extent permitted by law. [mosh-server detached, pid = 3321]$ which looks ok. But there is no mosh-server process running and a message in the kernel log:[ 4097.845386] mosh-server[3321]: segfault at 0 ip     (null) sp 00007fff59cd0fa8 error 14 in mosh-server[55715b883000+59000] last lines of strace -f mosh-server:....ioctl(5, TIOCSPTLCK, [0])     = 0ioctl(5, TCGETS, {B38400 opost isig icanon echo ...}) = 0ioctl(5, TIOCGPTN," [1])       = 0stat(""/""", {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 1)," ...}) = 0open(""/""", O_RDWR|O_NOCTTY)   = 6ioctl(6, TIOCSWINSZ, {ws_row=58, ws_col=272, ws_xpixel=0, ws_ypixel=0}) = 0clone(strace: Process 3333 attachedchild_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7fc0096e2a10) = 3333[pid  3333] set_robust_list(0x7fc0096e2a20, 24) = 0[pid  3332] close(6)        = 0[pid  3332] rt_sigaction(SIGCHLD, {SIG_DFL, [], SA_RESTORER|SA_RESTART, 0x7fc008d8bd30}, {SIG_DFL, [], 0}, 8) = 0[pid  3332] SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_MAPERR, si_addr=0} -[pid  3333] close(5)        = 0[pid  3333] setsid()        = 3333[pid  3333] ioctl(6, TIOCSCTTY, 0)  = 0[pid  3333] dup2(6, 0)      = 0[pid  3333] dup2(6, 1)      = 1[pid  3333] dup2(6, 2)      = 2[pid  3333] close(6)        = 0[pid  3333] rt_sigaction(SIGHUP, {SIG_DFL, ~[RTMIN RT_1], SA_RESTORER, 0x7fc008d8bd30}, NULL, 8) = 0[pid  3333] rt_sigaction(SIGPIPE, {SIG_DFL, ~[RTMIN RT_1], SA_RESTORER, 0x7fc008d8bd30}, NULL, 8) = 0[pid  3333] close(3)        = 0[pid  3333] SIGHUP {si_signo=SIGHUP, si_code=SI_KERNEL} -[pid  3332] +++ killed by SIGSEGV ++++++ killed by SIGHUP +++ Debian Package Version: 1.2.5-1.1I tried building Version 1.2.5 and the current git master (e7303e0b666c6f19b7e3417710217ee4ec95460e) both yielding at least the same SIGSEGV.ii  libncurses5:am 6.0+20160213 amd64ii  libprotobuf-c1 1.2.1-1  amd64ii  libprotobuf9v5 2.6.1-1.3  amd64ii  libssl1.0.0:am 1.0.2d-1   amd64ii  libssl1.0.2:am 1.0.2g-1   amd64ii  libutempter0:a 1.1.6-3  amd64ii  protobuf-compi 2.6.1-1.3  amd64ii  zlib1g:amd64 1:1.2.8.dfsg amd64 Further library versions can be provided on request since I am not sure which libraries are involved. I am not very good with gdb, but if someone tells me what to do, I can try to provide more information.\''
mosh,727,closed,1,2016-03-10 15:25:36,1100.35,,,1,"b'b\' I get similar results with on my Debian sid host (package version 1.2.5-1.1).  Here is the entire subprocess\\\' output from ""strace -f mosh-server"": [pid  3026] close(6 [pid  3027] set_robust_list(0x7faf831e4a20", 24 [pid  3026]  )   = 0[pid  3027]  ) = 0[pid  3026] rt_sigaction(SIGCHLD, {SIG_DFL, [], SA_RESTORER|SA_RESTART, 0x7faf8287ad30}, {SIG_DFL, [], 0}, 8) = 0[pid  3026] SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_MAPERR, si_addr=0} -[pid  3027] close(5)        = 0[pid  3027] setsid()        = 3027[pid  3027] ioctl(6, TIOCSCTTY, 0)  = 0[pid  3027] dup2(6, 0)      = 0[pid  3027] dup2(6, 1)      = 1[pid  3027] dup2(6, 2)      = 2[pid  3027] close(6)        = 0[pid  3026] +++ killed by SIGSEGV +++\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,2,2016-03-10 15:25:36,520.98,,1,,"b""b' Can you try to get a backtrace with gdb? See the [instructions on the Debian wiki]url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,3,2016-03-10 15:25:36,95.37,1,,,b'b\' Not sure where to go from here if anyone has an idea. # gdb mosh-server GNU gdb (Debian 7.10-1+b1) 7.10Copyright (C) 2015 Free Software Foundation, Inc.License GPLv3+: GNU GPL version 3 or later url This is free software: you are free to change and redistribute it.There is NO WARRANTY," to the extent permitted by law.  Type ""show copying""and ""show warranty"" for details.This GDB was configured as ""x86_64-linux-gnu"".Type ""show configuration"" for configuration details.For bug reporting instructions", please see:url Find the GDB manual and other documentation resources online at:url For help," type ""help"".Type ""apropos word"" to search for commands related to ""word""...Reading symbols from mosh-.(gdb) set pagination 0(gdb) runStarting program: /-server [Thread debugging using libthread_db enabled]Using host libthread_db library ""/-linux-"". MOSH CONNECT 60001 DahOJJfGNv9ZR2Rz5pQrMw mosh-server (mosh 1.2.5) [build mosh 1.2.5]Copyright 2012 Keith Winstein mosh-devel@License GPLv3+: GNU GPL version 3 or later url This is free software: you are free to change and redistribute it.There is NO WARRANTY", to the extent permitted by law. [mosh-server detached, pid = 19701][Inferior 1 (process 19697) exited normally](gdb) btNo stack.(gdb)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,4,2016-03-10 15:25:36,10.03,,1,,"b""b' The crash seems to be happening in the background process forked by  "," so do before  .'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,5,2016-03-10 15:25:36,4.53,,1,,"b""b' Wait"," won\\xe2\\x80\\x99t work because the background process forks other irrelevant background processes. Do this instead: (Unless the process crashes immediately and doesn\\xe2\\x80\\x99t stay around long enough for this to work?)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,6,2016-03-10 15:25:36,270.33,1,,,b'b\' Unfortunately mosh-server is not staying around long enough it would seem. [mosh-server detached, pid = 23302]$ gdb -p 23302GNU gdb (Debian 7.10-1+b1) 7.10Copyright (C) 2015 Free Software Foundation, Inc.License GPLv3+: GNU GPL version 3 or later url This is free software: you are free to change and redistribute it.There is NO WARRANTY," to the extent permitted by law.  Type ""show copying""and ""show warranty"" for details.This GDB was configured as ""x86_64-linux-gnu"".Type ""show configuration"" for configuration details.For bug reporting instructions", please see:url Find the GDB manual and other documentation resources online at:url For help," type ""help"".Type ""apropos word"" to search for commands related to ""word"".Attaching to process 23302ptrace: No such process.(gdb) continueThe program is not being run.(gdb) \''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,7,2016-03-10 15:25:36,17.08,,1,,"b'b"" I used the [instructions on the Debian wiki]url  to recompile mosh with debuggign symbols.  It appears that the process is crashing too quickly for a separate gdb: $ gdb -p $(mosh-server |& sed -ne \' = ([0-9]_).*/\\\\1/p\')GNU gdb (Debian 7.10-1+b1) 7.10[ snip ]Attaching to process 19538ptrace: No such process.(gdb) quit I will keep trying to get a proper backtrace.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,8,2016-03-10 15:25:36,15.43,,1,,"b""b' Based on [debugging forks]url  I was able to get a backtrace.  Below is the outline"," for reproduction.  Look at [mosh-]url  for the full output.  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,9,2016-03-10 15:25:36,90.57,,1,,"b""b' Boy"," this makes it seem like utempter might be broken on Debian sid. We should try to nail down a non-mosh-specific test case and see if we can reproduce it.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,10,2016-03-10 15:25:36,6.55,,1,,"b""b' I rebuilt libutempter with debug symbols and get one more line in the backtrace:  '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,11,2016-03-10 15:25:36,18.18,,1,,"b'b\' If I edit libutempter and place a ""return"" at line 93 of iface.c (to return early from execute_helper)", then mosh works for me.  The source I edited matched [the upstream git repo]url  (this code hasn\\\'t changed in many years).\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,12,2016-03-10 15:25:36,52.58,1,,,"b'b"" I\'ve managed to reproduce this in an EC2 instance running sid.  The point of failure is an uninitialized trampoline for fork() in libutempter0-the GOT entry is 0", and the crash is from our process trying to jump there.  Tracing it with GDB\'s doesn\'t show anything touching the entry in the GOT entry for fork().  Compiling mosh with results in a working executable for  .  Alas, I\'ve also managed to destroy that instance trying to it. So this doesn\'t appear to be a problem with mosh or utempter, but I now can\'t debug this further either, at least not tonight. I\'m also trying to reproduce it in an instance running Arch," but setting that up is  slowly for some reason. How to trace this (this is from memory and may not be quite right):  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,13,2016-03-10 15:25:36,1005.87,,1,,"b'b"" This should help on what\'s going on: url  I\'m experiencing this too. Tried with older versions of mosh and got the same result"," so it\'s definitely not because something changed on mosh but in some of it\'s dependencies.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,14,2016-03-10 15:25:36,118.65,,,1,"b'b"" Thanks.  Replicating the STC in that PR gets the same behavior I\'m seeing in gdb"," so it\'s a very useful clue.  Working on it.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,15,2016-03-10 15:25:36,1047.77,,1,,b'b\' Please, see my analysis on the glibc mailing list [1]. On my debian, to prevent mosh server to crash," you my ensure that it must not linked with ""-lpthread"". Instead ""-pthread"" is OK. I don\\\'t know how obtain this"," because it seems that the ""-lpthread"" is put into the play by the protobuffer library (I assume via the pkg/ automake tools). On my post on the glibc mailing list I posted a test to highlight the problem", and this test is independent by mosh and /or libutempter. BR [1] url \'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,16,2016-03-10 15:25:36,512.77,1,,,"b'b"" There\'s plenty of little bugs evenly spattered here", and many ways to fix this:Root cause, I think, is that produces  ; is unnecessary and deprecated with gcc.only applies to the link command for  ; I believe it maybe should also be applying  , but evidence for this is a bit thin.or or  has a recent change in behavior that causes it to be more sensitive to finding injected in an odd place in the library search list.  If you hold your mouth just so and look in a certain way, you can almost see this as some kind of issue causing binaries linked with full RELRO to search for symbols differently.  But I think ultimately we\'re feeding the wrong command to gcc.  I haven\'t investigated why this breaks; I think making our build more correct is the better solution. Fixing any one of these little issues would solve Mosh\'s problem.  I think the problem is only maybe 10% our fault, but we\'re left holding a bunch of pieces.  The fix in my PR is perhaps slightly less correct than handling CFLAGS better for link commands, but it\'s also focused on the specific problem and less likely to cause problems on random other platforms.  Bikeshed color opinions (and more substantive comments) will be gratefully listened to. I\'ll also open an issue on protobuf," which I think is primarily to blame here.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,closed,2016-03-24 04:27:19,781.72,4,12,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,17,2016-03-10 15:25:36,216.02,,1,,"b""b' This is fixed for mosh master"," but not yet for Debian.  Working on that.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,reopened,2016-03-24 04:28:40,1.35,4,13,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,18,2016-03-10 15:25:36,42.45,,,1,"b""b' This is believed fixed (worked-around) for Debian now; mosh-1.2.5-2 is available for unstable and experimental.  Thanks"," @keithw!'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,closed,2016-03-31 05:11:07,42.45,4,13,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,727,closed,-,-,-,4,13,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,opened,2016-03-14 07:54:25,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,title,2016-03-14 07:54:25,00:00,,1,,"b""b' Unable to connect since recently'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,body,2016-03-14 07:54:25,00:00,1,,,b'b\' I\\\'ve installed mosh on two Arch Linux machines, both with fully up-to-date software. As of the last few weeks (?), I\\\'ve been unable to use mosh to remotely access either one from the other, even though plain SSH works just fine. Even if both the laptop and desktop are sitting next to each other on the same desk, and connected via an ethernet switch," any time I run mosh I get the blue bar with ""No response received from server"" message", before mosh-client exits. It used to work\\xe2\\x80\\x94the relevant ports in iptables are open on both machines (UDP 60000:61000 and TCP 22)\\xe2\\x80\\x94and disabling iptables has no effect. I\\\'m not sure what else to check to see if I\\\'ve misconfigured something somewhere, or whether it\\\'s a  bug. If anyone can suggest things for me to test, I\\\'d be happy to try it out, as this is confusing me and quite annoying\\xe2\\x80\\x94the main reason I was using mosh was because it would reestablish the connection after the laptop had been suspended, which I do every day to take it to class.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,1,2016-03-14 07:54:25,772.07,1,,,"b'b"" People are reporting what seems like a similar issue in issue #727.  Since Arch is a rolling release and will pick up changes quickly", I\'m wondering if they\'re the same issue.  You could try the debug steps there to see if they result in useful info.  Another thing you can try is looking at mosh-server execution with  :Start an ssh connection to the server so you can observe what\'s going on with moshStart a mosh session.Switch to the ssh session and type .Wait 60 seconds (this is how long mosh-server takes to time out and exit if it doesn\'t hear from a client), and type again. On each invocation of you should see something like one of these lines as the first line of output (what you see will differ slightly, these examples are on FreeBSD): ...or if the problem is similar to that in #727, you might not get anything logged by mosh at all.  If you can  the output you get from each," that\'ll help us figure out what the problem is.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,2,2016-03-14 07:54:25,223.95,1,,,"b""b' Oops", that pull request is for #727," not #730.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,3,2016-03-14 07:54:25,1418.07,,1,,"b'b"" I can\'t reproduce this problem on a fresh Arch install on an EC2 instance", either with the Arch package or a build of mosh from source. You might also try tcpdump on both machines," to see whether or not packets are being received from the other.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,4,2016-03-14 07:54:25,300.72,,1,,"b""b' No response from OP.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,closed,2016-03-31 05:09:13,1274.8,3,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,5,2016-03-14 07:54:25,147.03,1,,,b'b\' I\\\'m so sorry, I forgot all about this bug because university studies and life caught up with me. I followed up on your debugging suggestions, and it seems that isn\\\'t correctly starting on the server for some reason. Opening an SSH session, running then copying the key to a new terminal and running results in a successful connection. Here\\\'s the output from  :  The bottom entry is the SSH session, the three mosh ones are attempts to start mosh from the client, then the top one is a successful mosh session _after_ manually starting on the server and copying the key to the client. During the failed attempts to start mosh from the client, I thought I\\\'d try watching to see if a mosh process even starts with  ," and the only process it listed was the grep process to search  . **EDIT** I found out the problem. In I had ""KillUserProcesses=yes"" for some reason; the default is no. This was causing systemd to kill the mosh-server process after SSH exited. Not a bug", a feature.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,6,2016-03-14 07:54:25,641.45,,,1,"b'b"" Thanks for letting us know!  This appears to be similar to #399", then-though the exact bit of machinery and configuration appear to be different. Now that we\'ve had a few different instances of this issue," it\'s probably worth researching what criteria is  processes by (process group? session? controlling tty? control group?) and seeing if we can have escape the issue.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,reopened,2016-05-12 18:17:42,788.48,4,3,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,7,2016-03-14 07:54:25,1153.48,,1,,"b""b' The officially supported way to have mosh-server escape is to run it with systemd-run. Instead of simply invoking mosh-server new"," Mosh should run per the examples in [systemd-run(1)]url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,8,2016-03-14 07:54:25,1368.83,,1,,"b""b' How do and deal with this? Do people have to type all that every time they want to start a new  session?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,9,2016-03-14 07:54:25,1375.07,,1,,"b'b"" (I don\'t think we\'re going to be able to change the default command-line"," since there\'s no way for the mosh client to know if the server has or not. But we might be able to change mosh-server to detect this situation and run itself under  . We should probably just do whatever  do on these systems.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,10,2016-03-14 07:54:25,237.38,,1,,"b""b' @bbarenblat I can\\xe2\\x80\\x99t get that to work. First I tried it on RHEL 7"," which has instances [disabled]url  Then I tried it on Ubuntu 16.10 and found that processes inside get killed on the user\\xe2\\x80\\x99s last logout even when they otherwise wouldn\\xe2\\x80\\x99t.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,11,2016-03-14 07:54:25,265.88,1,,,"b""b' @bbarenblat Apparently you\\xe2\\x80\\x99re supposed to run to ask systemd to keep your sessions around. But I can\\xe2\\x80\\x99t get that to work either. The behavior I got when testing this is most charitably described as janky. I saw random 30-second delays on ssh login. I saw systemd get stuck in states where it would refuse to launch  . I saw systemd suddenly decide to _kill all my processes_ while I was logged in over ssh and not touching anything. If you can figure out a way to get this to work", I\\xe2\\x80\\x99m interested," but as far as I can tell this functionality isn\\xe2\\x80\\x99t ready for production.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,730,open,-,-,-,5,7,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,751,open,opened,2016-05-09 04:37:52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,751,open,title,2016-05-09 04:37:52,00:00,1,,,"b""b' Capture pre-session messages and display in terminal'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,751,open,body,2016-05-09 04:37:52,00:00,,,1,"b'b"" SSH doesn\'t do that. Why does mosh? I use  to see server info. Mosh clears it before I get a good look. Can I disable this?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,751,open,1,2016-05-09 04:37:52,104.95,,1,,"b""b' Mosh needs to be in control of the entire terminal state to enable its optimizations", so it must start up with the terminal in a known state by clearing the screen. (One could imagine alternate designs," but they would not be Mosh.)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,751,open,closed,2016-05-09 06:22:49,104.95,1,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,751,open,2,2016-05-09 04:37:52,575.48,1,,,"b'b"" This issue is related to #741 though not exactly the same.  is printed by SSH before login", and Mosh runs after login.  Also implementation varies between OSes-it\'s on OpenBSD, for example.  So it\'s not immediately obvious that we should display this text from  . Mosh could collect  for the work it does before invoking  , and somehow inject that text into the terminal state shared between and  .  could send the text in a special message to  , or could generate the initial terminal state and send it to  . This is a non-trivial bit of work, and possibly rather ugly to implement," but being able to capture messages and errors sent before initializes the display would have some value.  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,751,open,reopened,2016-05-09 15:58:18,575.48,2,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,751,open,3,2016-05-09 04:37:52,394.12,,1,,"b""b' #754 relates to this also"," SSH security  before the terminal session should not be .'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,751,open,-,-,-,2,2,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,opened,2016-08-12 15:47:47,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,title,2016-08-12 15:47:47,00:00,,1,,"b""b' extra newlines on startup and exit'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,body,2016-08-12 15:47:47,00:00,1,,,b'b\' 2016-07-31 11:47:19   mva   by the way, mosh inserting some empty lines: in the shell, it is opening, the first line is empty," and all the output (including shell prompt) starting from second line. And after detaching there is also few empty lines between local command prompt with ""mosh"" command and ""mosh is exiting"" line2016-07-31 11:48:29   mva   it adds some aesthetic discomfort :)2016-08-01 01:11:17   cgull mva:  I didn\\\'t notice your mention of odd  behavior before", sorry.  Mosh uses alternate-screen mode by default, and it should start with a blank screen with a shell prompt on the first line.  It switches back to the normal screen mode on exit, and that should restore the screen as it was before Mosh, with a prompt and cursor on the next line.  Trying it now, I see what I expect on startup, but there2016-08-01 01:11:17   cgull are two extra blank lines on exit.  Can you get screenshots of what you\\\'re seeing and post them somewhere or open a Github issue?2016-08-01 01:35:59   mva   cgull: how about screencast?2016-08-01 01:36:31   cgull that\\\'d do nicely too.2016-08-01 01:37:22   cgull though I\\\'m behind some very slow connectivity right now, might take a little while to download.  And I really should be going to sleep :)2016-08-01 01:38:39   mva   there is 1.7M2016-08-01 01:38:51   mva   not that much bigger than few screenshots ;)2016-08-01 01:40:07   mva   url 2016-08-01 01:51:57   mva   didn\\\'t you already went to sleep? :)2016-08-01 02:00:15   cgull And  yet, I\\\'m still awake.  I see your extra line at startup.  I don\\\'t see that locally.  I see your extra two lines at exit.  I do see that locally.  I\\\'ll look at it more tomorrow.  I\\\'m really going to sleep now.  :)2016-08-01 02:03:44   mva   good night :)\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,1,2016-08-12 15:47:47,734.03,,1,,"b'b"" I\'ve now come up with two solutions to this problem", one kludgy and low-impact (  branch, edit some blank lines out on output), and another that I think is a more correct solution but has some potential for problems (  branch, don\'t use a pty for ssh, so we don\'t have echo on the ssh server and don\'t need to output a newline to deal with that). I now feel more strongly that Mosh shouldn\'t be using a pty for ssh because of this issue.  But since shells will behave differently based on whether they have a tty or not, this will certainly change (and possibly break) Mosh\'s behavior for some people. ~~Also as I write this, I remember that there\'s a problem on OS X with that I need to look at," mosh-server crashes or exits or something if it gets typeahead.  So that\'s not final.~~  EDIT:  On a clean build I can\'t reproduce this any more.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,2,2016-08-12 15:47:47,10.47,1,,,"b""b' Unfortunately mosh-server required a pty (to get the initial width and height of the terminal) until 1.2.5. I would rather not break compatibility here if we can avoid it.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,closed,2016-09-23 02:30:17,642.5,2,2,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,3,2016-08-12 15:47:47,651.28,,1,,"b""b' I think this should be re-opened. The problem still exists in mosh-1.3.0.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,reopened,2017-03-29 00:23:53,1313.6,2,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,4,2016-08-12 15:47:47,581.35,,1,,"b""b' Both of the newlines outside the alternate-screen session come from the in 39ea3d9512f0fcb2457b8a20635b8c6ea9bcfe67", since appends its own newline. I think one of these is intentional and the other is not. They only show up without  .  The newline inside the alternate-screen session comes from 1de6575e599ef9f7c7a48a16d31d2422490eefd9," perhaps due to the kernel\\xe2\\x80\\x99s tty echo.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,5,2016-08-12 15:47:47,783.42,,1,,"b'b"" Yeah",  I confess I wanted that bug to be fixed a little more than it actually was, and now I see I also missed the inside-Mosh-session problem," too.  I have a fix for the outer problem in progress.  I\'m not sure @andersk\'s explanation for the inner problem is correct-that newline should never reach mosh-client-but I\'ll have a look at it.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,6,2016-08-12 15:47:47,800.87,,1,,"b""b' I did test that replacing the with results in the being both displayed on the inner terminal and read into  . The only explanation that comes to mind is tty echo.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,7,2016-08-12 15:47:47,813.2,,1,,"b'b"" You\'re right.  This is trickier to solve cleanly; the simplest thing would be to back out 1de6575.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,8,2016-08-12 15:47:47,822.93,,1,,"b""b' We could move this parent-child communication from the pty to a separate pipe? Or maybe we could just delay the until that point.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,9,2016-08-12 15:47:47,832.35,,,1,"b'b"" A separate pipe is what I\'m working on",  complexity for small benefit.  Moving the means we do it after networking is started," and after the clean cut-point for privilege revocation we have now.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,788,open,-,-,-,2,8,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,opened,2016-11-01 20:01:45,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,title,2016-11-01 20:01:45,00:00,,1,,"b""b' Copy replaces \\\\n with spaces'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,body,2016-11-01 20:01:45,00:00,,1,,"b'b"" When  via mouse on macOS", in some cases seems to get replaced by spaces. This seem to happen across different versions of macOS and different terminal apps, starting with  . Downgrading to or switching to seems to solve the issue (for now," couldn\'t find a  case for this).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,1,2016-11-01 20:01:45,38.42,1,,,"b'b""  know about this", but yes, it\'s difficult to reproduce and doesn\'t occur often for me, and I haven\'t been able to pin it down.  I recently discovered some issues with how we handle updates involving scrolling (among other things)," fixing those might also fix this. ^L sometimes but not always clears the bad screen state.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,2,2016-11-01 20:01:45,27.03,,1,,"b'b"" I\'ve experienced this issue fairly regularly since 1.2.6 as well", and I use tmux on the remote end of my mosh sessions," if that helps anything to reproduce the bug.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,3,2016-11-01 20:01:45,15.55,,1,,"b'b"" Which outer terminal emulators are you using?  This might be related to minor differences in how different terminal emulators mark the end of line for text selection. I _think_ I\'ve seen it with both XTerm and iTerm2 3.x but am not sure. Also"," what version of tmux?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,4,2016-11-01 20:01:45,7.7,,1,,"b""b' tmux 1.8 on Linux on the server side"," as the terminal emulator on the client side.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,5,2016-11-01 20:01:45,150.87,,1,,"b'b"" I\'ve seen this as well. Mac OS X 10.11.6 using Mosh 1.2.6 on Linux server and Mac sides.Tmux 2.2 on Linux server side. Happens almost all the time when copying and pasting multiple lines of text (usually into vim).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,6,2016-11-01 20:01:45,255.13,,,1,"b""b' Mine are: client:macOS 10.12.1Terminal 2.7.1mosh 1.2.6OpenSSH_7.2p2", LibreSSL 2.4.1 server:Linux 3.18.28mosh 1.2.4OpenSSH_6.6.1p1," OpenSSL 1.0.2h-fips Thanks for looking into this.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,7,2016-11-01 20:01:45,34.67,,1,,"b'b"" I\'ve seen this with irssi running in  under OSX. TERM is xterm-256colorUTF8mosh 1.2.6 client  1.2.5 server Selecting multiple lines of text in irssi resulted in me pasting a single line with lots of spaces where a line return should have been. ^L had no impact. After relaunching my terminal and my mosh session", I was also surprised to see that text that had been printed to the screen session before mosh was restarted was still selecting incorrectly.  Text that was printed to the screen session after I relaunched  client worked as expected.  So, whatever this is, seems like it has to do with the interaction between mosh and the rendering of the text at initial display time," versus  time.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,8,2016-11-01 20:01:45,130.78,,1,,"b'b"" See #830 for what I believe is the fix for this.  I think you\'ll need to fix both client and server to resolve this problem (where the fix is this code", or Mosh 1.2.5," but not not Mosh 1.2.6).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,closed,2016-11-19 04:53:51,532.1,1,8,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,9,2016-11-01 20:01:45,1063.6,,1,,"b'b"" Experiencing this right now when I try to copy text out of weechat(1.7)\'s bare display inside tmux(2.3) using mosh(1.2.6) inside urxvt(9.22). Frequently. Like every time I copy a block of text 2-3 lines always have it.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,10,2016-11-01 20:01:45,1157.8,,1,,"b'b"" I continue to see this problem with a mosh 1.3.0 client against a mosh 1.3.0-rc2 server inside . I don\'t have a clear test case for it"," and I\'ve kind of learned to live with it (liberal application of  ).""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,11,2016-11-01 20:01:45,378.82,,1,,"b'b"" I think I\'ve gotten a little mixed up here.  I think there may be two bugs at play: *  results in multiple lines padded to the width of the terminal and not separated by newlines", so that they paste as a single line into the destination.  That bug is fixed in #830. *  results in multiple lines padded to the width of the terminal, but separated by newlines," so that they paste as multiple lines into the destination with unexpected whitespace at the end of each line.  I still haven\'t reproduced that.  Which are people seeing here?  (Or are people seeing something else?)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,reopened,2017-03-27 02:22:07,1288.27,1,11,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,12,2016-11-01 20:01:45,2.18,,1,,"b""b' The latter. (Is this duplicative of #856?)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,13,2016-11-01 20:01:45,17.17,,1,,"b'b"" Maybe.  The first pastebin there seems to be a mix of bugs 1 and 2.  I still can\'t reproduce this. ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,14,2016-11-01 20:01:45,4.05,1,,,"b'b"" So", the primary place I see this is in mutt inside screen. I don\'t see it copying from, e.g.," the shell prompt in the same screen.  I\'m not sure what an appropriate test tool for curses-using apps inside screen  realize mutt is a complicated application. (That\'s part of why I haven\'t tried to report this previously...) Err $TERM inside screen is and outside screen is  .""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,15,2016-11-01 20:01:45,8.4,,1,,"b""b' @johnhawkinson One thing you could try to do is run inside inside inside  . If you can reproduce the problem that way", then you should also be able to reproduce it by  ing (some truncation of) the resulting file inside with the same terminal size. Once we have a reproducing file, it should be much easier to systematically figure out where the problem is. I realize this may be easier said than done," though.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,16,2016-11-01 20:01:45,8.88,,1,,"b""b' That seems straightforward enough. url 80x48 terminal"," reproduces with  .'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,17,2016-11-01 20:01:45,19.33,,,1,"b""b' @johnhawkinson Perfect", I can confirm that your file gives different copy-and-paste results from an 80\\xc3\\x9748 gnome-terminal," outside and inside  . (I note however that there are trailing spaces either way.) '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,18,2016-11-01 20:01:45,11.38,,1,,"b'b"" I have managed to reproduce the second bug (spaces with newlines) viewing mail in in in from master in OS X 10.12.3 Terminal.  There", I get *all* lines being padded to 80 columns.  This doesn\'t happen with iTerm2 3.1.beta.2," or with tmux. ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,19,2016-11-01 20:01:45,63.65,,1,,"b'b"" So", @johnhawkinson\'s test case is producing spaces-no-newlines for me (with iTerm2 3.1.beta.2, not OS X Terminal) and @andersk, not the second bug.  @johnhawkinson, can you produce a diff or two paste outputs, like @andersk?  My best guess so far, though this seems at least partly incorrect for @andersk: * You do something before running Mutt that produces some lines that wrap. * You start Mutt.  It does not clear the whole screen with  , instead it redraws the entire frame buffer with spaces. * You view a message in Mutt.  It draws each line of the headers in the message by drawing 80 columns of text  spaces, repositioning the cursor with after each line.  (For the *body* of the message, it mostly draws with  , though.) * Mosh takes this output as not having any signals about what to do with wrap at the end of line.  So any pre-existing wrap bits from pre-Mutt display remain while you\'re using Mutt, and influence copy pasta.  I regard output that writes  , or output that clears to end of line, as signaling that the wrap status for that line should be reset.  Output that writes text past column 80 without any positioning controls should set wrap status.  There\'s some subtlety that I missed in my rewrite of the display code.  This bug is different from the prior line-wrapping bug.  Mutt is an ancient piece of code which might predate the idea of wrapping text output nicely for and later terminal emulators," which may play some part in this.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,20,2016-11-01 20:01:45,8.9,,1,,"b""b' @cgull You seem to be right. If I run  "," there is no difference in the copy-paste output from inside and outside.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,21,2016-11-01 20:01:45,4.25,1,,,"b'b"" I do not see a difference cat-ing my testcase in any of a) remote screen inside mosh b) remote ssh c) local. All inside  (10.10.5) In all cases", I get newlines and spaces. @cgull, you\'re saying you get spaces but not newlines? I cannot account for that, it seems odd.  I cat the test case,  into an Aqua Emacs," and save to a file. Then I that saved file (in a terminal wider than 80 cols to account for the  ) and I get:  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,22,2016-11-01 20:01:45,13.28,,1,,"b""b' Hmm", I think there\\xe2\\x80\\x99s still some evidence of a Mosh bug here," though it may be in the opposite direction. I do get different copy-and-paste output from   vs.   in that I see spaces-and-no-newlines without while I see spaces-and-newlines with  .'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,23,2016-11-01 20:01:45,29.53,,1,,"b'b"" @johnhawkinson", that\'s what I get with -all lines padded with spaces to the terminal width.  (I said before that @andersk and I were getting similar things, but I was using iTerm2 there, and typo-ed.)  Also, when did this problem appear for you?  @andersk, there\'s definitely a  here," it\'s just more subtle than the last one.  more tomorrow.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,24,2016-11-01 20:01:45,479.48,1,,,"b'b"" Oops", I screwed up earlier. Anders asked for: That\'s not what I did. The above file was from inside inside inside  , so it captured what  t sent to  , not what sent to  . Sorry.  Here is what was originally requested, capturing what sends to  : url The final screen\'s result is still space-padded for the headers and not for the body, although it\'s just plain text+padding+CR+LF with a few SGR renditions scattered throughout, rather than cursor-positioning. Oh, this problem has been with me for years, I think the entire time I\'ve used mosh. It\'s annoying but worth the trade-off.  However I did some more tests, and I am more : Running straight-up  -of this, but it certainly points the finger at  t, not  . On the other hand, I\'m certain I didn\'t used to have this problem. Of course, back then it would have been a different build of mutt, possibly with instead of or something, I don\'t know. Probably other changes.  Ugh.  I believe I have seen some non-mutt cases (although at the moment I\'m a lot less sure of the things I thought I knew)," but they are (surprise) not as trivially reproducible. So there\'s that.  At least I can hang on to using as a tool and  maybe that will let me capture something useful going forward.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,25,2016-11-01 20:01:45,187.98,1,,,"b'b"" @johnhawkinson", it might not be (only) a change in Mutt causing you grief, has also changed significantly over the last couple of years.  Also, iTerm2 does seem to handle this better.  (I\'m not 100% in love with iTerm2, it\'s a big sloppy drooling app," but it is at least different.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,26,2016-11-01 20:01:45,0.75,,1,,"b""b' @Ghosthree3"," could you try mosh-1.3.0 and see if it resolves your problem?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,27,2016-11-01 20:01:45,116.98,,,1,"b""b'  Indeed. So"," trying plain old (as part of 2.7.11):  + + works fine without space-padding. +  + + pads spaces.  And then behaves the same way:  + + works fine without space-padding. +  + + pads spaces.  pointing the finger at (and  ).  blaaaaaaaaaaaah.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,28,2016-11-01 20:01:45,630.22,,,1,b'b\' The more I think about this," the more I wonder if a Great Big Hammer of ""unconditionally strip trailing whitespace"" would be a helpful option. Such a thing vaguely (vaguely) reminds me of  \\\'s copy option:   I imagine mosh maintainers would find it too hackish?\''",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,29,2016-11-01 20:01:45,442.9,,,1,"b'b"" @cgull I wasn\'t able to reproduce it under the conditions I was getting it in before. If that changes I\'ll let you know but it _seems_ fixed. Nice work!""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,30,2016-11-01 20:01:45,973.97,,,1,"b'b"" @johnhawkinson", I spent a little time trying your test case of screen + mutt, with both ssh and Mosh and iTerm2 3.1.20170327-nightly and OS X 10.12.4 .  When I switch from  to iTerm2, that eliminates the end of line padding but not joined lines.  I don\'t get any substantial difference between Mosh and ssh for either of the terminal emulators.  I don\'t think Mosh is the right place to try and clean up this problem (especially since the redisplay code that handles this is pretty complex).  Better would be the outer terminal emulator," or the app producing non-copy-paste-friendly output.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,closed,2017-03-31 04:48:16,146.15,5,21,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,820,closed,-,-,-,5,21,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,824,closed,opened,2016-11-08 23:16:46,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,824,closed,title,2016-11-08 23:16:46,00:00,,1,,"b""b' Add a trivial test that the mosh script works without needing tmux'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,824,closed,body,2016-11-08 23:16:46,00:00,,1,,"b""b' None of the previous tests even ran the script unless tmux \\xe2\\x89\\xa5 1.6 is installed.  Thus was \\xe2\\x80\\x9cpassing\\xe2\\x80\\x9d on", e.g.," RHEL 6 even though its Perl is too old (5.10.1).'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,824,closed,closed,2016-11-08 23:43:01,26.25,0,2,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,824,closed,reopened,2016-11-09 01:17:33,94.53,0,2,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,824,closed,1,2016-11-08 23:16:46,332.25,,,1,"b""b' I decided this was good enough for now and took it anyway.  I did indeed run into configuration issues on FreeBSD", and I also made a small correction to your commit message ( ). I also tried mosh-1.2.2, which relies on  ," on Cygwin 2.6.0 (which is not quite current).  It worked fine.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,824,closed,closed,2016-11-13 04:49:01,211.47,0,2,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,824,closed,2,2016-11-08 23:16:46,1348.9,,1,,"b""b' Argh.  Stale pages in browser.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,824,closed,-,-,-,0,3,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,829,closed,opened,2016-11-13 21:36:37,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,829,closed,title,2016-11-13 21:36:37,00:00,,1,,"b""b' debian: Build-Depend tmux for better test coverage'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,829,closed,closed,2016-11-13 21:51:03,14.43,0,1,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,829,closed,1,2016-11-13 21:36:37,15.15,,1,,"b""b' This will probably just make  builds fail with the same problem.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,829,closed,2,2016-11-13 21:36:37,6.1,,1,,"b""b' Once Debian fixes their buildroot"," we can still use this.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,829,closed,reopened,2016-11-13 21:57:52,6.82,0,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,829,closed,3,2016-11-13 21:36:37,1075.25,,1,,"b""b'   was added as as in 0fc950bd8a3469bfb19c3049d35480a20205e66e so i think this PR can be closed'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,829,closed,closed,2017-08-25 15:53:07,1075.25,0,4,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,829,closed,-,-,-,0,4,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,833,open,opened,2016-12-03 04:07:22,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,833,open,title,2016-12-03 04:07:22,00:00,,1,,"b""b' Session establishment hangs with OS X 10.11 client and FreeBSD server'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,833,open,body,2016-12-03 04:07:22,00:00,,1,,"b'b"" My boss at $dayjob had this issue", so I spent a while on it:  On his OS X 10.11.1 MBP, talking to a FreeBSD 9.3 or 10.3 server, Homebrew\'s mosh 1.2.6_3 will hang during session startup, most of the time.  Examination shows that the mosh script is waiting for ssh, which has a half-closed TCP session (the server has closed its end) and is waiting for Godot.  This appears to be a problem with the OS X bundled ssh 6.9p1 client, but is annoyingly hard to debug:  * Only happens on OS X 10.11 (perhaps only on this specific machine).  Even running the 10.11 client on OS X 10.12 works fine.  But the Homebrew 7.3p1 ssh client also hangs on the 10.11 machine. * ssh only hangs when run by the Mosh perl script (or my cut-down debug version of it). * ssh only hangs when talking to a FreeBSD server.  OS X and Linux servers are fine. * Only happens when run with (the default). * does not affect the problem-it happens whether or not ssh is using Mosh\'s fake-proxy.  Fortunately, we discovered that using in place of on the ssh command line solves the problem.  @glance," was there a reason to use and not here? ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,833,open,closed,2016-12-22 02:59:40,1372.3,0,2,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,833,open,1,2016-12-03 04:07:22,1198.95,,1,,"b'b"" That attempted fix didn\'t work.  If this is a problem for anybody beyond my boss (who can use just fine)", we\'ll have to come up with something else, like closing the pipe to ssh if all required messages have been received," maybe with a timeout.  I also wonder if this might have something to do with badly configured firewalls or something; I\'ll get to check this next week.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,833,open,reopened,2017-01-07 00:06:19,1266.65,0,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,833,open,2,2016-12-03 04:07:22,1151.0,,1,,"b'b"" If confirmation helps", this is definitely still a problem. Using mosh from Sierra to Ubuntu 14.04. There\'s no  , BTW, just  ," but that does work as a workaround.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,833,open,-,-,-,0,4,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,opened,2017-04-11 14:36:01,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,title,2017-04-11 14:36:01,00:00,,1,,"b""b' /: PVS-Studio: Potentially incorrect virtual functions override'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,body,2017-04-11 14:36:01,00:00,,1,,"b'b"" Hello", I have found a bug using PVS-Studio tool. PVS-Studio is a static code analyzer for C, C++ and C#: url Analyzer warnings: * [V762]url  It is possible a virtual function was overridden incorrectly. See first argument of function \'==\' in derived class \'UserByte\' and base class \'Action\'. / 139. * [V762]url  It is possible a virtual function was overridden incorrectly. See first argument of function \'==\' in derived class \'Resize\' and base class \'Action\'. / 158.  A links to [declaration]url  and [implementation]url  of the \'Action::operator==\' function. A links to implementations of the \'[UserByte::operator==]url  and \'[Resize::operator==]url  functions.  In addition, I suggest having a look at the emails, sent from @pvs-.  Best regards," Phillip Khandeliants""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,1,2017-04-11 14:36:01,286.27,,1,,"b""b' A linter warning is not the same thing as a bug. In this case", is never used\\xe2\\x80\\x94the code could be removed, but it is not causing a problem. Even if it were used," whether that would be problematic would depend on the particular usage.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,closed,2017-04-11 19:22:18,286.28,0,3,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,2,2017-04-11 14:36:01,1336.45,,,1,"b'b"" All three are used-try taking them out :)  @khandeliants: I don\'t see any emails.  Can you link to a report?  Also"," could you add commands to to run PVS Studio for Mosh?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,reopened,2017-04-12 17:38:44,1336.43,0,3,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,3,2017-04-11 14:36:01,45.35,,1,,"b""b' Only the non-virtual and are used", and yes, I\\xe2\\x80\\x99d tested this claim before making it. Here," I\\xe2\\x80\\x99ll prove it: #877.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,4,2017-04-11 14:36:01,1189.97,,,1,"b""b' @cgull: We have spoken about this project with [Keith Winstein]url  but recently he hasn\\xe2\\x80\\x99t been answering the e-mails. We can add for you commands in for a more comfortable run of PVS-Studio and provide a temporary license key for a week. For more details please contact us at em@pvs-.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,5,2017-04-11 14:36:01,469.97,,1,,"b""b' @khandeliants Mosh is an open-source project", and we try to do everything in the open. If you find a bug in Mosh, please file a bug here, or if you believe your bug is security-sensitive and requires a confidential disclosure, please use the security contact address on our website url  If you wish to email the Mosh developers to start a discussion," please use the mosh-devel contact address in our man pages or website.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,6,2017-04-11 14:36:01,1002.92,1,,,"b""b' @andersk:  Sorry-I came to an", erm," low-quality conclusion when editing and testing that code.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,7,2017-04-11 14:36:01,430.45,,1,,"b'b"" I did commit @andersk\'s change recently.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,closed,2017-08-22 21:57:23,258.65,1,6,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,876,closed,-,-,-,1,6,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,opened,2017-10-26 18:49:06,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,title,2017-10-26 18:49:06,00:00,,1,,"b""b' Add true color support.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,body,2017-10-26 18:49:06,00:00,,1,,"b""b' Implement true color support define in: url The sequence is: ESC[ \\xe2\\x80\\xa6 38;2;;; \\xe2\\x80\\xa6 m Select RGB foreground color ESC[ \\xe2\\x80\\xa6 48;2;;; \\xe2\\x80\\xa6 m Select RGB background color'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,1,2017-10-26 18:49:06,1238.33,,,1,"b'b"" i did an initial test with minttty as a terminal (which supports true color)"," and things seem to work.  i will test some more later.  @kangjianbin can you say anything about scenarios or apps that you\'ve already tested?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,2,2017-10-26 18:49:06,79.88,,1,,"b""b' I only tested it with a patched Emacs. In windows", tested mosh in Mintty.  In Linux," tested it with xterm(which supports true color sequence but translate it to 256 colors) and xfce4-terminal. '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,3,2017-10-26 18:49:06,337.63,,1,,"b""b' What happens on terminals that don\\xe2\\x80\\x99t support true color? Unless there\\xe2\\x80\\x99s a way to detect or configure that"," we need to also preserve the 16 or 256 color values as a fallback.  See also #649.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,4,2017-10-26 18:49:06,136.63,,,1,"b'b"" Looks like there is no standard way to detect if a terminal supports true color yet (let me know if it is incorrect). There are several combinations: 1. App is true color   + Mosh supports true color and Terminal supports true color       Everything is good   + Mosh supports true color and Terminal doesn\'t supports true color       Color is incorrect.   + Mosh doesn\'t support true color and Terminal supports true color       Color is incorrect.   + Mosh doesn\'t support true color and Terminal doesn\'t support true color       Color isn incorrect.  2. App isn\'t true color    Everything is good.  So in all cases", we dont\' bring any regression but get benefit if the terminal supports TC.  We can also provide some configuration to let user choose if they want true color or not (for example, tmux). If TC is disabled, we fallback to 256 or 16 color mode. But in my opinion, it is application\'s responsibility to decide if outputs TC sequence or not. If application chooses to output TC sequence, it is high possibility that the terminal supports TC or user forces it to output TC seq (like me :-)  ). In both cases," mosh needn\'t do the fallback.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,5,2017-10-26 18:49:06,60.58,1,,,"b""b'  That\\xe2\\x80\\x99s where I\\xe2\\x80\\x99m skeptical. If the app is written well", then it will send both a reasonable 16/256 color fallback sequence and a true color sequence. The terminal ignores the true color sequence and you get the reasonable fallback color. By na\\xc3\\xafvely adding true color support to Mosh and not the terminal," you lose that reasonable fallback.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,6,2017-10-26 18:49:06,74.57,1,,,"b'b"" AFAIK", the behavior is different. I only verified Putty\'s behavior. Not easy to find a term that doesn\'t support true color in Linux.  For terminal (putty) that doesn\'t support true color, it parses the true color sequence to incorrect color instead of ignoring it.  And looks like both emacs and vim send either true color sequence or 256 color, not both. (May be incorrect. I just analyzed the commint," didn\'t verify it).p  ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,7,2017-10-26 18:49:06,19.78,,1,,"b""b' The [colon-delimited codes]url ", (*edit: [apparently that\\xe2\\x80\\x99s not quite right]url  are correctly ignored by PuTTY.  Also, even with an application that isn\\xe2\\x80\\x99t written well, because Mosh\\xe2\\x80\\x99s screen-diffing optimizations may result in things being drawn in a different order, not being careful about this could result in not just wrong colors," but *inconsistently changing* wrong colors.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,8,2017-10-26 18:49:06,38.02,,1,,"b'b"" This patch doesn\'t handle colon-delimited codes.  Looks like mosh doesn\'t handle the codes either? So it is not a problem.  >Also", even with an application that isn\\xe2\\x80\\x99t written well, because Mosh\\xe2\\x80\\x99s screen-diffing optimizations may result in things being drawn in a different order, not being careful about this could result in not just wrong colors, but inconsistently changing wrong colors.  Would you please explain why this patch can result in inconsistent wrong colors? When mosh-server receives true color seq," mosh-client outputs the same seq too. So looks like there isn\'t any inconsistency. ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,9,2017-10-26 18:49:06,25.92,,,1,b'b\' @kangjianbin, thank you for doing this!  I thought we needed more complicated code for storing 24-bit attributes in a  , but I think your implementation will work correctly.  My limited research says there\\\'s no  way to detect 24-bit color support in a terminal, so I agree with @kangjianbin on that point.  I think we should implement the colon-delimited codes on input, rather than discarding them.  But I also think that real usage of the colon-delimited codes is nonexistent, so either choice is OK.  I think we cannot realistically generate colon-delimited codes on output, since many terminal emulators do not support that.  @kangjianbin, have you tried any synthetic testing of your code, with scripts that generate 24-bit color sequences?  Have you verified that >1 attribute can be chained together in the same sequence?  Your code looks like it should be OK, but please test this.  Also, please write a test case for this code.  This should be fairly easy, just add another case to the code in  , and add a link and name in  .  @andersk," I expect ""reasonably-written"" apps that do the 16/256 color fallback you describe to be rare.  Can you give examples of such apps?  One issue is that semicolon-delimited codes for 24-bit color will be misinterpreted sometimes into various other attributes by terminal emulators that don\\\'t support 24-bit color.  24-bit color support is fairly common now. There are major exceptions like the MacOS bundled  ", and some of the major Android apps, see url It does appear that decent emulators with 24-bit support are now available with little effort on most platforms.  I think many uses of 24-bit color schemes will map into 256-color space badly, and users will have to disable them when using older terminals in any case, with or without this mapping.  I would be comfortable simply documenting that Mosh simply passes whatever colors the app generates, and letting users handle conflicts between newer apps and older terminals.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,10,2017-10-26 18:49:06,27.35,,,1,"b'b"" Another way to look at this is", how many GitHub issues will we get with different types of 24-bit support?  * No 24-bit support at all:  See #649.  :) * @kangjianbin\'s simple 24-bit support, with no mapping or support for separate 24-bit and 256-color attributes:  I think this would be a small number, mostly from users that have 256-color terminals and apps that use 24-bit color. * A more complex 24-bit support," with mapping or support for 24-bit and 256-color attributes simultaneously:  I think this would be an equal or smaller number to the previous choice.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,11,2017-10-26 18:49:06,57.43,,1,,"b""b' I think I withdraw my objection after noticing that we always reset attributes ( ) before outputting a true color sequence. That means if the color is wrong"," at least it will be deterministically wrong.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,12,2017-10-26 18:49:06,650.87,1,,,b'b\'  Nope, unfortunately this is still correct. I\\\'m not aware of any app doing this. Mosh could start doing this, however:  Outputting semicolons as delimiters, combined with a terminal emulator that doesn\\\'t understand true colors," might result in misparsing the RGB prefix ""2"" as well the R", G, B values as other ANSI codes. E.g. the intended color #030405 _could_ end up being dim (2), italic (3), underlined (4) and blinking (5) in some terminal emulators. I don\\\'t know what various terminal emulators that don\\\'t support true colors do here.  Outputting colons as delimiters is supposed to overcome this problem in the long run; terminal emulators can reliably ignore future parameters that take subparameters. Colons, however, are not supported by many terminal emulators. In turn, apps all decide to output semicolons. As such, this feature remains pretty much unused.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,13,2017-10-26 18:49:06,218.0,,1,,"b'b"" @andersk:  I didn\'t think to ask this before-do you  a use case where either  both 256 and 24-bit color", or downmapping from 24-bit to 256 color, is ?  (Does anybody else," for that matter?) ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,14,2017-10-26 18:49:06,55.43,,,1,"b""b' Well in theory", it would be nice to move toward a world where one doesn\\xe2\\x80\\x99t have to separately configure every application to use 24-bit color. That can only realistically happen if either (a) we get terminfo entries for 24-bit color and wait for them to become available on most systems, or (b) it\\xe2\\x80\\x99s possible to use 24-bit color in a backwards compatible way. In world (a), we need Mosh\\xe2\\x80\\x99s 24-bit color support to be configurable like 256 color support is now, and in world (b), we need Mosh to pass both 256 and 24-bit color (using colons for the latter). But the evidence suggests that both (a) and (b) are hypotheticals, so I don\\xe2\\x80\\x99t know what to say.  \\xe2\\x80\\x9cDear future readers who are dreaming up the awesome new terminal extensions of tomorrow, *please* try to think about these issues before you try to get your extensions widely deployed! Semicolons? Seriously??\\xe2\\x80\\x9d  Okay that probably isn\\xe2\\x80\\x99t going to help," but it made me feel better.  Perhaps we could try to use our influence as the world\\xe2\\x80\\x99s second most popular remote terminal protocol to push for one path or the other?'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,15,2017-10-26 18:49:06,12.08,,,1,"b""b' I just found url  url  url  It seems that", lacking cooperation from the ncurses maintainers, terminal maintainers are converging on an unofficial standard of setting or in the environment to indicate true color support. An environment variable isn\\xe2\\x80\\x99t great for this purpose because it\\xe2\\x80\\x99s inherited in terminals launched from other terminals," but I guess it\\xe2\\x80\\x99s better than nothing.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,16,2017-10-26 18:49:06,74.6,,1,,"b""b' Maybe we should just ask Ted Dickey (terminfo maintainer?) if we can get an attribute allocated for this...'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,17,2017-10-26 18:49:06,6.85,,1,,"b'b"" Thomas", not Ted. A couple of folks have already asked him, no success. But you could give it another try. That would be by far the cleanest solution. (I cannot understand why adding a few text lines is such a no-go for him. terminfo is not meant to describe the features he likes, it\'s meant to describe how terminal emulators work and what they\'re capable of," no matter if he likes those features or not.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,18,2017-10-26 18:49:06,17.83,,,1,"b""b' Thanks"," do you have a pointer to any of those previous discussions? Would like to understand the history here.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,19,2017-10-26 18:49:06,23.4,1,,,"b'b"" Follow the links from andersk\'s recent comment", they take you to some discussion (maybe not all) on the mailing list. I guess there was a bit more," like in 2017-09 another request that was left unanswered. Search through the [bug-ncurses]url  mailing list archive; unfortunately I don\'t have a list of all the relevant links.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,20,2017-10-26 18:49:06,200.25,,1,,"b""b'  (Reasonably common examples where that\\xe2\\x80\\x99s broken today: Screen in gnome-terminal"," or or or in Emacs in gnome-terminal. Screen or Emacs could of course work around this by unsetting the environment variable in their children\\xe2\\x80\\x94but is it reasonable to demand that every terminal emulator does so if they know nothing about true color?)'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,21,2017-10-26 18:49:06,54.62,,1,,"b'b"" @cgull As I know"," xterm do the down mapping. I guess it needs support some old VGA cards. Tmux also do the mapping if true color isn\'t enabled.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,22,2017-10-26 18:49:06,652.85,,,1,"b""b' Is there any update on this? Any suggestion is welcome.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,23,2017-10-26 18:49:06,253.1,,1,,"b'b"" @kangjianbin", sorry to not do this earlier.  I didn\'t spend much time on Mosh this week.  I just pushed your work, and some additional changes, to master.  Thank you, again!  I think we are likely to find some more issues that need to be resolved," but this is a good start.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,closed,2017-11-04 18:45:07,1436.02,4,13,8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,24,2017-10-26 18:49:06,914.13,,,1,"b""b' Ok thanks. My experience on mosh is limited"," but I would like to help if this commit causes problems.'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,25,2017-10-26 18:49:06,1089.4,,,1,"b'b"" I\'m seeing what looks like a discrepancy between true color with ssh and mosh. You can see it in the screenshots below"," notice the background of vim-airline at the bottom of the screen. It also affects visual selection which doesn\'t show in mosh but shows as a similar background in ssh.  mosh 1.3.0.171108.6fb4d0d on client and server nvim v0.2.1-953-g3e502fd7d (appimage) with [jellybeans]url  and [vim-airline]url **MOSH** ![screenshot 2017-11-08 at 10 55 35 pm]url **SSH** ![screenshot 2017-11-08 at 10 56 33 pm]url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,26,2017-10-26 18:49:06,4.0,,,1,"b'b"" Hmm", it seems to be related to the front-end terminal. Those screenshots are on a Chromebook running [Secure SSH]url  to localhost, then mosh to server. So the terminal emulator is [hterm]url If I mosh from gnome-terminal, then I don\'t see the problem.  So it appears that it\'s particular to running mosh in hterm. However true color works fine with OpenSSH," as evidenced by the screenshots. So what is mosh doing that hterm doesn\'t like?""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,27,2017-10-26 18:49:06,624.18,,1,,"b""b' Related conversation on the chromium-hterm mailing list: url '""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,28,2017-10-26 18:49:06,121.63,,,1,"b'b"" Yup", somewhat aggressive implementation of SGR sequence on my part, combined with a bug on hterm\'s part.  I\'m glad to see hterm is picking up a fix so quickly.  I will leave mosh as-is for the moment, but I may change mosh to send separate SGR sequences for each true-color attribute before our next release, to eliminate potential compatibility problems.  @rpwoodbu, you\'ll obviously want to ensure hterm and mosh-client are compatible," the next time you update mosh sources for url ""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,reopened,2017-11-09 16:38:28,1313.35,4,14,12,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,closed,2017-11-09 16:38:45,0.28,4,14,12,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,29,2017-10-26 18:49:06,624.63,,,1,"b'b"" it\'ll be fixed in the next  Shell release: url i\'d prefer to not hack mosh to accommodate bugs in hterm ... lets fix hterm! :)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,30,2017-10-26 18:49:06,452.55,,1,,b'b\' @vapier, agreed, but: * Both hterm and mosh are upstreams for url  if we and @rpwoodbu do releases before you do," he\\\'ll have to patch mosh or hterm. * I\\\'m waiting to see if any other terminal emulators have problems with those SGR sequences.  (All of the ones I\\\'ve tried so far are OK.) It\\\'s not a ""hack"" to fix it", it\\\'s just a minor deoptimization, anyway.\'',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,31,2017-10-26 18:49:06,970.92,,1,,"b'b"" It\'s damn unlikely that any other terminal emulator suffers from this exact same problem. It\'s much more likely that other apps also emit escape sequences that hterm used to misparse", e.g. []url  does.  Whether to work it around in mosh sounds more like a philosophical than a technical question to me. Probably either working around straight away or leaving as-is is better than continue discussing it," see [xkcd: Efficiency]url  :-)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,32,2017-10-26 18:49:06,1017.12,,1,,"b""b'  @egmontkob Mosh 1.2.4 and earlier do (for 256-color sequences"," #507).'""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,33,2017-10-26 18:49:06,305.15,,1,,"b'b"" i\'ve just released hterm-1.75 which fixes things"," so it should be all set on that side now""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,34,2017-10-26 18:49:06,324.63,,,1,"b'b"" for anyone else looking at "," don\'t use the one linked above ... that older version (in the 0.48 branch) is broken and emits things like  .  the [xterm doc]url  say: if you look at a [newer version]url  it renders fine in hterm.""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,35,2017-10-26 18:49:06,332.3,,,1,"b'b"" It used to work fine with imagemagick versions from those days", but then imagemagick changed its output format :P (I shouldn\'t have linked the older version," my bad.)""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mosh,939,closed,-,-,-,4,18,15,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
